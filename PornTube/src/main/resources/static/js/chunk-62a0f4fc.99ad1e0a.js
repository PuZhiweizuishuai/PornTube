(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62a0f4fc"],{"00b4":function(t,e,s){"use strict";s("ac1f");var i=s("23e7"),r=s("da84"),a=s("c65b"),o=s("e330"),n=s("1626"),l=s("861d"),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),h=r.Error,u=o(/./.test);i({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=this.exec;if(!n(e))return u(this,t);var s=a(e,this,t);if(null!==s&&!l(s))throw new h("RegExp exec method returned something other than an Object or null");return!!s}})},"2db4":function(t,e,s){"use strict";s("ca71");var i=s("8dd9"),r=s("a9ad"),a=s("7560"),o=s("f2e7"),n=s("fe6c"),l=s("58df"),c=s("80d2"),h=s("d9bd");e["a"]=Object(l["a"])(i["a"],r["a"],o["a"],Object(n["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:a["a"].options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:e,footer:s,insetFooter:i,left:r,right:a,top:o}=this.$vuetify.application;return{paddingBottom:Object(c["h"])(e+s+i),paddingLeft:Object(c["h"])(r),paddingRight:Object(c["h"])(a),paddingTop:Object(c["h"])(t+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(h["e"])("auto-height",this),0==this.timeout&&Object(h["d"])('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(c["t"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[Object(c["t"])(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:i["a"].options.computed.classes.call(this),style:i["a"].options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},5311:function(t,e,s){"use strict";var i=s("5607"),r=s("2b0e");e["a"]=r["default"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},"615b":function(t,e,s){},"9d01":function(t,e,s){},b0af:function(t,e,s){"use strict";s("615b");var i=s("10d2"),r=s("297c"),a=s("1c87"),o=s("58df");e["a"]=Object(o["a"])(r["a"],a["a"],i["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...a["a"].options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...i["a"].options.computed.classes.call(this)}},styles(){const t={...i["a"].options.computed.styles.call(this)};return this.img&&(t.background=`url("${this.img}") center center / cover no-repeat`),t}},methods:{genProgress(){const t=r["a"].options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),t(e,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},b73d:function(t,e,s){"use strict";s("ec29"),s("9d01");var i=s("c37a"),r=s("5311"),a=s("8547"),o=s("58df");function n(t){t.preventDefault()}var l=Object(o["a"])(i["a"],r["a"],a["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=i["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:n},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:n},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const s=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===s&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}}),c=s("c3f0"),h=s("0789"),u=s("490a"),d=s("80d2");e["a"]=l.extend({name:"v-switch",directives:{Touch:c["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(h["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(u["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===d["z"].left&&this.isActive||t.keyCode===d["z"].right&&!this.isActive)&&this.onChange()}}})},ca71:function(t,e,s){},dd7b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-main",[s("v-container",{attrs:{"fill-height":""}},[s("v-row",{attrs:{justify:"center",align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500"}},[s("v-row",{staticStyle:{height:"64px"},attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-btn",{attrs:{text:""},on:{click:t.backHome}},[s("v-icon",[t._v(" mdi-arrow-left ")]),t._v(" 返回 ")],1)],1)],1),s("v-row",{attrs:{justify:"center"}},[s("img",{attrs:{src:this.$store.state.webInfo.logoUrl,height:"36px"}})]),s("v-row",{attrs:{justify:"center"}},[s("h1",[t._v(t._s(this.$store.state.webInfo.name)+"     "+t._s(t.type))])]),s("v-row",{staticStyle:{height:"48px"}}),s("LoginFrom",{directives:[{name:"show",rawName:"v-show",value:t.showLogin,expression:"showLogin"}],on:{login:t.userLogin}}),s("RegisterFrom",{directives:[{name:"show",rawName:"v-show",value:0==t.showLogin,expression:"showLogin == false"}],on:{register:t.register}}),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"5"}},[s("v-btn",{attrs:{text:"",color:"primary"}},[t._v("忘记密码")])],1),s("v-col",{staticStyle:{"text-align":"right"},attrs:{cols:"5"}},[s("v-btn",{attrs:{text:""},on:{click:t.moveRegister}},[t._v(t._s(t.moveMessage))])],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{top:!0,timeout:3e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[s("v-btn",t._b({attrs:{color:"pink",text:""},on:{click:function(e){t.showMessage=!1}}},"v-btn",i,!1),[t._v(" 关闭 ")])]}}]),model:{value:t.showMessage,callback:function(e){t.showMessage=e},expression:"showMessage"}},[t._v(" "+t._s(t.message)+" ")])],1)],1)},r=[],a=(s("d3b7"),s("e9c4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"请输入你的邮箱或手机号",label:"邮箱或手机号",rules:[function(){return null!=t.username||"请输入邮箱或手机号"}],clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"密码",label:"密码",clearable:"",rules:[function(){return null!=t.password||"密码不能为空"}],type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"5"}},[s("img",{staticStyle:{cursor:"pointer"},attrs:{src:t.verifyImageUrl,alt:"验证码",title:"点击刷新"},on:{click:t.getVerifyImage}})]),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{attrs:{placeholder:"验证码",label:"验证码",rules:[function(){return null!=t.verifyCode||"验证码不能为空"}],clearable:""},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"3"}},[s("v-switch",{attrs:{label:"记住我"},model:{value:t.rememberMe,callback:function(e){t.rememberMe=e},expression:"rememberMe"}})],1),s("v-col",{attrs:{cols:"7"}})],1),s("v-row",{attrs:{justify:"center"}},[s("v-btn",{attrs:{color:"primary"},on:{click:t.submitLog}},[t._v("登录")])],1)],1)}),o=[],n={name:"LoginFrom",data:function(){return{verifyImageUrl:"/api/verifyImage",username:"",password:"",verifyCode:"",rememberMe:!1}},methods:{submitLog:function(){var t=this.username,e=this.password,s=this.verifyCode,i=this.rememberMe,r={username:t,password:e,verifyCode:s,rememberMe:i};""!==t&&""!==e&&""!==s&&this.$emit("login",r)},getVerifyImage:function(){this.verifyImageUrl="/api/verifyImage?t="+(new Date).getTime()}}},l=n,c=s("2877"),h=s("6544"),u=s.n(h),d=s("8336"),v=s("62ad"),p=s("0fd9"),g=s("b73d"),m=s("8654"),f=Object(c["a"])(l,a,o,!1,null,null,null),b=f.exports;u()(f,{VBtn:d["a"],VCol:v["a"],VRow:p["a"],VSwitch:g["a"],VTextField:m["a"]});var w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"请输入你的邮箱",label:"邮箱",rules:[function(){return null!=t.registerUser.mail||"邮箱不能为空"}],type:"email",clearable:""},model:{value:t.registerUser.mail,callback:function(e){t.$set(t.registerUser,"mail",e)},expression:"registerUser.mail"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"请输入你的手机号（系统原因，此项选填）",label:"手机号",clearable:""},model:{value:t.registerUser.phone,callback:function(e){t.$set(t.registerUser,"phone",e)},expression:"registerUser.phone"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"昵称",label:"昵称",rules:[function(){return null!=t.registerUser.username||"昵称不能为空"}],clearable:""},model:{value:t.registerUser.username,callback:function(e){t.$set(t.registerUser,"username",e)},expression:"registerUser.username"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"密码",label:"密码",rules:[function(){return null!=t.registerUser.password||"密码不能为空"}],clearable:"",type:"password"},model:{value:t.registerUser.password,callback:function(e){t.$set(t.registerUser,"password",e)},expression:"registerUser.password"}})],1)],1),1==this.$store.state.webInfo.openInvitationRegister?s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"邀请码",label:"邀请码",clearable:"",rules:[function(){return null!=t.registerUser.invitationCode||"邀请码不能为空"}]},model:{value:t.registerUser.invitationCode,callback:function(e){t.$set(t.registerUser,"invitationCode",e)},expression:"registerUser.invitationCode"}})],1)],1):t._e(),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"5"}},[s("img",{staticStyle:{cursor:"pointer"},attrs:{src:t.verifyImageUrl,alt:"验证码",title:"点击刷新"},on:{click:t.getVerifyImage}})]),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{attrs:{placeholder:"验证码",label:"验证码",rules:[function(){return null!=t.registerUser.verifyCode||"验证码不能为空"}],clearable:""},model:{value:t.registerUser.verifyCode,callback:function(e){t.$set(t.registerUser,"verifyCode",e)},expression:"registerUser.verifyCode"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-btn",{attrs:{color:"primary"},on:{click:t.submitRegister}},[t._v("注册")])],1),s("v-snackbar",{attrs:{color:t.color,timeout:3e3,top:!0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.message)+" ")])],1)},y=[],k=(s("ac1f"),s("00b4"),{name:"Register",data:function(){return{verifyImageUrl:"/api/verifyImage",registerUser:{mail:"",phone:"",password:"",invitationCode:"",verifyCode:"",username:""},snackbar:!1,color:"success",message:"分享成功"}},methods:{submitRegister:function(){var t=/^(([^()[\]\\.,;:\s@\"]+(\.[^()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!t.test(this.registerUser.mail))return this.message="邮箱格式错误",this.color="error",void(this.snackbar=!0);if(""===this.registerUser.password||this.registerUser.password.length<6||""===this.registerUser.verifyCode||""===this.registerUser.username)return this.message="密码不能为空且不能小于6个字符",this.color="error",void(this.snackbar=!0);if(1===this.$store.state.webInfo.openInvitationRegister&&""===this.registerUser.invitationCode&&"admin"!==this.registerUser.username)return this.message="邀请码不能为空",this.color="error",void(this.snackbar=!0);if(""!==this.registerUser.phone){var e=/^[1][3,4,5,7,8][0-9]{9}$/;if(!e.test(this.registerUser.phone))return this.message="手机号码格式错误",this.color="error",void(this.snackbar=!0)}this.$emit("register",this.registerUser)},getVerifyImage:function(){this.verifyImageUrl="/api/verifyImage?t="+(new Date).getTime()}}}),C=k,x=s("2db4"),U=Object(c["a"])(C,w,y,!1,null,null,null),V=U.exports;u()(U,{VBtn:d["a"],VCol:v["a"],VRow:p["a"],VSnackbar:x["a"],VTextField:m["a"]});var $={name:"Login",components:{LoginFrom:b,RegisterFrom:V},data:function(){return{verifyImageUrl:"/api/verifyImage",user:{},type:"登录",moveMessage:"没有账号，创建账号",showLogin:!0,message:"",showMessage:!1}},created:function(){},methods:{userLogin:function(t){var e=this;fetch("/api/login",{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"POST",credentials:"include",body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){if(200===t.status){var s=t.data;e.$store.commit("setUserInfo",s),e.$router.push("/")}else e.message=t.message,e.showMessage=!0})).catch((function(t){return null}))},register:function(t){var e=this;fetch("/api/register",{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"POST",credentials:"include",body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){200===t.status?(e.message="注册成功，即将为你跳转到登录页面！",e.showMessage=!0,e.moveRegister()):(e.message=t.message,e.showMessage=!0)})).catch((function(t){return null}))},moveRegister:function(){"登录"===this.type?this.type="注册":this.type="登录","没有账号，创建账号"===this.moveMessage?this.moveMessage="已有账号，我要登录":this.moveMessage="没有账号，创建账号",this.showLogin=!this.showLogin},backHome:function(){this.$router.push("/")}}},S=$,_=s("b0af"),j=s("a523"),T=s("132d"),I=s("f6c4"),B=Object(c["a"])(S,i,r,!1,null,null,null);e["default"]=B.exports;u()(B,{VBtn:d["a"],VCard:_["a"],VCol:v["a"],VContainer:j["a"],VIcon:T["a"],VMain:I["a"],VRow:p["a"],VSnackbar:x["a"]})},ec29:function(t,e,s){}}]);