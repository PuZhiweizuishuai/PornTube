(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c81b7af"],{"2db4":function(e,t,s){"use strict";s("ca71");var i=s("8dd9"),r=s("a9ad"),a=s("7560"),o=s("f2e7"),n=s("fe6c"),l=s("58df"),c=s("80d2"),u=s("d9bd");t["a"]=Object(l["a"])(i["a"],r["a"],o["a"],Object(n["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:e=>"string"===typeof e||!1===e},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:a["a"].options.computed.isDark.call(this)},styles(){if(this.absolute)return{};const{bar:e,bottom:t,footer:s,insetFooter:i,left:r,right:a,top:o}=this.$vuetify.application;return{paddingBottom:Object(c["f"])(t+s+i),paddingLeft:this.app?Object(c["f"])(r):void 0,paddingRight:this.app?Object(c["f"])(a):void 0,paddingTop:Object(c["f"])(e+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(u["e"])("auto-height",this),0==this.timeout&&Object(u["d"])('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(c["o"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[Object(c["o"])(this)])},genWrapper(){const e=this.hasBackground?this.setBackgroundColor:this.setTextColor,t=e(this.color,{staticClass:"v-snack__wrapper",class:i["a"].options.computed.classes.call(this),directives:[{name:"show",value:this.isActive}]});return this.$createElement("div",t,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},e))}},render(e){return e("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},5311:function(e,t,s){"use strict";var i=s("5607"),r=s("2b0e");t["a"]=r["default"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}})},"615b":function(e,t,s){},8547:function(e,t,s){"use strict";var i=s("2b0e"),r=s("80d2");t["a"]=i["default"].extend({name:"comparable",props:{valueComparator:{type:Function,default:r["i"]}}})},"9d01":function(e,t,s){},b0af:function(e,t,s){"use strict";s("615b");var i=s("10d2"),r=s("297c"),a=s("1c87"),o=s("58df");t["a"]=Object(o["a"])(r["a"],a["a"],i["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...a["a"].options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...i["a"].options.computed.classes.call(this)}},styles(){const e={...i["a"].options.computed.styles.call(this)};return this.img&&(e.background=`url("${this.img}") center center / cover no-repeat`),e}},methods:{genProgress(){const e=r["a"].options.methods.genProgress.call(this);return e?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[e]):null}},render(e){const{tag:t,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),e(t,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},ca71:function(e,t,s){},dd7b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-main",[s("v-container",{attrs:{"fill-height":""}},[s("v-row",{attrs:{justify:"center",align:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500"}},[s("v-row",{staticStyle:{height:"64px"},attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-btn",{attrs:{text:""},on:{click:e.backHome}},[s("v-icon",[e._v(" mdi-arrow-left ")]),e._v(" 返回 ")],1)],1)],1),s("v-row",{attrs:{justify:"center"}},[s("img",{attrs:{src:this.$store.state.webInfo.logoUrl,height:"36px"}})]),s("v-row",{attrs:{justify:"center"}},[s("h1",[e._v(e._s(this.$store.state.webInfo.name)+" "+e._s(e.type))])]),s("v-row",{staticStyle:{height:"48px"}}),s("LoginFrom",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],on:{login:e.userLogin}}),s("RegisterFrom",{directives:[{name:"show",rawName:"v-show",value:0==e.showLogin,expression:"showLogin == false"}],on:{register:e.register}}),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"5"}},[s("v-btn",{attrs:{text:"",color:"primary"}},[e._v("忘记密码")])],1),s("v-col",{staticStyle:{"text-align":"right"},attrs:{cols:"5"}},[s("v-btn",{attrs:{text:""},on:{click:e.moveRegister}},[e._v(e._s(e.moveMessage))])],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{top:!0,timeout:3e3},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[s("v-btn",e._b({attrs:{color:"pink",text:""},on:{click:function(t){e.showMessage=!1}}},"v-btn",i,!1),[e._v(" 关闭 ")])]}}]),model:{value:e.showMessage,callback:function(t){e.showMessage=t},expression:"showMessage"}},[e._v(" "+e._s(e.message)+" ")])],1)],1)},r=[],a=(s("d3b7"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"请输入你的邮箱或手机号",label:"邮箱或手机号",rules:[function(){return null!=e.username||"请输入邮箱或手机号"}],clearable:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"密码",label:"密码",clearable:"",rules:[function(){return null!=e.password||"密码不能为空"}],type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"5"}},[s("img",{staticStyle:{cursor:"pointer"},attrs:{src:e.verifyImageUrl,alt:"验证码",title:"点击刷新"},on:{click:e.getVerifyImage}})]),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{attrs:{placeholder:"验证码",label:"验证码",rules:[function(){return null!=e.verifyCode||"验证码不能为空"}],clearable:""},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"3"}},[s("v-switch",{attrs:{label:"记住我"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}})],1),s("v-col",{attrs:{cols:"7"}})],1),s("v-row",{attrs:{justify:"center"}},[s("v-btn",{attrs:{color:"primary"},on:{click:e.submitLog}},[e._v("登录")])],1)],1)}),o=[],n={name:"LoginFrom",data:function(){return{verifyImageUrl:"/api/verifyImage",username:"",password:"",verifyCode:"",rememberMe:!1}},methods:{submitLog:function(){var e=this.username,t=this.password,s=this.verifyCode,i=this.rememberMe,r={username:e,password:t,verifyCode:s,rememberMe:i};""!==e&&""!==t&&""!==s&&this.$emit("login",r)},getVerifyImage:function(){this.verifyImageUrl="/api/verifyImage?t="+(new Date).getTime()}}},l=n,c=s("2877"),u=s("6544"),h=s.n(u),d=s("8336"),v=s("62ad"),p=s("0fd9"),g=(s("ec29"),s("9d01"),s("c37a")),m=s("5311"),f=s("8547"),b=s("58df");function y(e){e.preventDefault()}var w=Object(b["a"])(g["a"],m["a"],f["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some(t=>this.valueComparator(t,e)):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=g["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:y},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:y},ref:"input"})},onBlur(){this.isFocused=!1},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const s=t.length;t=t.filter(t=>!this.valueComparator(t,e)),t.length===s&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(){this.isFocused=!0},onKeydown(e){}}}),k=s("c3f0"),C=s("0789"),x=s("490a"),U=s("80d2"),V=w.extend({name:"v-switch",directives:{Touch:k["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...g["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...this.attrs$}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(C["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(x["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(e){(e.keyCode===U["t"].left&&this.isActive||e.keyCode===U["t"].right&&!this.isActive)&&this.onChange()}}}),S=s("8654"),$=Object(c["a"])(l,a,o,!1,null,null,null),_=$.exports;h()($,{VBtn:d["a"],VCol:v["a"],VRow:p["a"],VSwitch:V,VTextField:S["a"]});var j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"请输入你的邮箱",label:"邮箱",rules:[function(){return null!=e.registerUser.mail||"邮箱不能为空"}],type:"email",clearable:""},model:{value:e.registerUser.mail,callback:function(t){e.$set(e.registerUser,"mail",t)},expression:"registerUser.mail"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"请输入你的手机号（系统原因，此项选填）",label:"手机号",clearable:""},model:{value:e.registerUser.phone,callback:function(t){e.$set(e.registerUser,"phone",t)},expression:"registerUser.phone"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"昵称",label:"昵称",rules:[function(){return null!=e.registerUser.username||"昵称不能为空"}],clearable:""},model:{value:e.registerUser.username,callback:function(t){e.$set(e.registerUser,"username",t)},expression:"registerUser.username"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"密码",label:"密码",rules:[function(){return null!=e.registerUser.password||"密码不能为空"}],clearable:"",type:"password"},model:{value:e.registerUser.password,callback:function(t){e.$set(e.registerUser,"password",t)},expression:"registerUser.password"}})],1)],1),1==this.$store.state.webInfo.openInvitationRegister?s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"10"}},[s("v-text-field",{attrs:{placeholder:"邀请码",label:"邀请码",clearable:"",rules:[function(){return null!=e.registerUser.invitationCode||"邀请码不能为空"}]},model:{value:e.registerUser.invitationCode,callback:function(t){e.$set(e.registerUser,"invitationCode",t)},expression:"registerUser.invitationCode"}})],1)],1):e._e(),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"5"}},[s("img",{staticStyle:{cursor:"pointer"},attrs:{src:e.verifyImageUrl,alt:"验证码",title:"点击刷新"},on:{click:e.getVerifyImage}})]),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{attrs:{placeholder:"验证码",label:"验证码",rules:[function(){return null!=e.registerUser.verifyCode||"验证码不能为空"}],clearable:""},model:{value:e.registerUser.verifyCode,callback:function(t){e.$set(e.registerUser,"verifyCode",t)},expression:"registerUser.verifyCode"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-btn",{attrs:{color:"primary"},on:{click:e.submitRegister}},[e._v("注册")])],1)],1)},T=[],I={name:"Register",data:function(){return{verifyImageUrl:"/api/verifyImage",registerUser:{mail:"",phone:"",password:"",invitationCode:"",verifyCode:"",username:""}}},methods:{submitRegister:function(){var e=/^(([^()[\]\\.,;:\s@\"]+(\.[^()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(e.test(this.registerUser.mail)&&(console.log(123456),!(""===this.registerUser.password||this.registerUser.password.length<6||""===this.registerUser.verifyCode||""===this.registerUser.username)&&(1!==this.$store.state.webInfo.openInvitationRegister||""!==this.registerUser.invitationCode||"admin"===this.registerUser.username))){if(""!==this.registerUser.phone){var t=/^[1][3,4,5,7,8][0-9]{9}$/;if(!t.test(this.registerUser.phone))return}console.log(this.registerUser),this.$emit("register",this.registerUser)}},getVerifyImage:function(){this.verifyImageUrl="/api/verifyImage?t="+(new Date).getTime()}}},B=I,A=Object(c["a"])(B,j,T,!1,null,null,null),O=A.exports;h()(A,{VBtn:d["a"],VCol:v["a"],VRow:p["a"],VTextField:S["a"]});var L={name:"Login",components:{LoginFrom:_,RegisterFrom:O},data:function(){return{verifyImageUrl:"/api/verifyImage",user:{},type:"登录",moveMessage:"没有账号，创建账号",showLogin:!0,message:"",showMessage:!1}},created:function(){},methods:{userLogin:function(e){var t=this;fetch("/api/login",{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"POST",credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(200===e.status){var s=e.data;t.$store.commit("setUserInfo",s),t.$router.push("/")}else t.message=e.message,t.showMessage=!0})).catch((function(e){return null}))},register:function(e){var t=this;fetch("/api/register",{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"POST",credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.status?(t.message="注册成功，即将为你跳转到登录页面！",t.showMessage=!0,t.moveRegister()):(t.message=e.message,t.showMessage=!0)})).catch((function(e){return null}))},moveRegister:function(){"登录"===this.type?this.type="注册":this.type="登录","没有账号，创建账号"===this.moveMessage?this.moveMessage="已有账号，我要登录":this.moveMessage="没有账号，创建账号",this.showLogin=!this.showLogin},backHome:function(){this.$router.push("/")}}},M=L,R=s("b0af"),E=s("a523"),F=s("132d"),D=s("f6c4"),N=s("2db4"),P=Object(c["a"])(M,i,r,!1,null,null,null);t["default"]=P.exports;h()(P,{VBtn:d["a"],VCard:R["a"],VCol:v["a"],VContainer:E["a"],VIcon:F["a"],VMain:D["a"],VRow:p["a"],VSnackbar:N["a"]})},ec29:function(e,t,s){}}]);