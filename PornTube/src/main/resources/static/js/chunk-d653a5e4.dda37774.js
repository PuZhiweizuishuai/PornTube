(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d653a5e4"],{"12ab":function(t,e,a){"use strict";var i=a("5e84"),o=a.n(i);o.a},1681:function(t,e,a){},"269a":function(t,e){t.exports=function(t,e){var a="function"===typeof t.exports?t.exports.extendOptions:t.options;for(var i in"function"===typeof t.exports&&(a.directives=t.exports.options.directives),a.directives=a.directives||{},e)a.directives[i]=a.directives[i]||e[i]}},5311:function(t,e,a){"use strict";var i=a("5607"),o=a("2b0e");e["a"]=o["default"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},"5e84":function(t,e,a){},"696f":function(t,e,a){},"85bc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{staticStyle:{"padding-bottom":"0px"},attrs:{"fill-height":"",fluid:""}},[a("v-row",[a("v-col",{staticStyle:{"padding-bottom":"0px"}},[a("DPlayer",{attrs:{article:parseInt(t.id),video:t.videoData.video[0],picurl:t.videoData.imgUrl}})],1)],1)],1),a("v-container",{staticStyle:{"padding-top":"0px"},attrs:{"fill-height":""}},[a("v-row",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:t.colsWidth}},[a("v-row",[a("v-col",[a("h3",{domProps:{textContent:t._s(t.videoData.title)}})])],1),a("v-row",[a("v-col",{staticStyle:{color:"#999","font-size":"12px","padding-top":"0px"}},[0!==t.videoData.childrenCategory.fatherId?a("router-link",{staticClass:"category-link",attrs:{to:"/v/"+t.videoData.fatherCategory.id}},[a("span",{domProps:{textContent:t._s(t.videoData.fatherCategory.name)}})]):t._e(),t._v(" / "),a("router-link",{staticClass:"category-link",attrs:{to:"/v/"+t.videoData.childrenCategory.id}},[a("span",{domProps:{textContent:t._s(t.videoData.childrenCategory.name)}})]),a("span",{domProps:{innerHTML:t._s("&nbsp;&nbsp;&nbsp;&nbsp;")}}),t._v(" 发布于： "),a("span",{domProps:{textContent:t._s(t.TimeUtil.renderTime(t.videoData.createTime))}}),a("br"),a("span",{domProps:{textContent:t._s(t.videoData.viewCount)}}),t._v(" 次观看 "),a("span",{domProps:{innerHTML:t._s("&nbsp;&nbsp;&nbsp;&nbsp;")}}),t._v(" "),a("span",{domProps:{textContent:t._s(t.videoData.danmakuCount)}}),t._v(" 弹幕 ")],1)],1),a("v-divider"),a("v-row",[a("v-col",{attrs:{cols:"2","align-self":"end"}},[a("router-link",{attrs:{to:"/user/"+t.videoData.userId}},[a("v-avatar",{attrs:{size:"62"}},[a("v-img",{attrs:{src:t.videoData.avatarUrl}})],1)],1)],1),a("v-col",[a("router-link",{attrs:{to:"/user/"+t.videoData.userId}},[a("span",{domProps:{textContent:t._s(t.videoData.username)}})]),a("span",{domProps:{innerHTML:t._s("&nbsp;&nbsp;&nbsp;&nbsp;")}}),a("span",{staticStyle:{color:"#999","font-size":"12px"},domProps:{textContent:t._s(t.videoData.introduction)}}),a("span",{domProps:{innerHTML:t._s("&nbsp;&nbsp;&nbsp;&nbsp;")}}),a("v-btn",{attrs:{small:"",outlined:"",color:"primary"}},[a("span",[t._v("关注")]),a("span",{domProps:{innerHTML:t._s("&nbsp;&nbsp;")}}),a("span",{domProps:{textContent:t._s(t.videoData.followCount)}})]),a("br"),a("br"),a("span",{domProps:{textContent:t._s(t.videoData.describes)}})],1)],1),a("v-divider"),a("v-row",[a("v-col",[t._v(" 标签： "),t._l(t.videoData.tag,(function(e){return a("span",{key:e},[a("v-btn",{attrs:{rounded:"",small:"",text:"",color:"primary",dark:""}},[t._v(t._s(e))])],1)}))],2)],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-rating",{attrs:{color:"orange","background-color":"orange lighten-3"},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),i),[a("v-icon",[t._v("mdi-thumb-up")]),a("span",{domProps:{textContent:t._s(t.videoData.likeCount)}})],1)]}}])},[a("span",[t._v("顶一下")])]),a("span",{domProps:{innerHTML:t._s("&nbsp;&nbsp;&nbsp;&nbsp;")}}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",o,!1),i),[a("v-icon",[t._v("mdi-thumb-down")]),a("span",{domProps:{textContent:t._s(t.videoData.dislikeCount)}})],1)]}}])},[a("span",[t._v("踩一下")])])],1)],1),a("v-row",[a("v-col",{attrs:{cols:t.colsWidth}},[a("Comment",{attrs:{count:t.videoData.commentCount}})],1),a("v-col",[t._v(" 相关视频： ")])],1)],1)],1)},o=[],s=(a("d3b7"),a("7693")),n=a("9878"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",[t._v(" "+t._s(t.commentCount)+" 条评论 ")])],1),a("v-row",[a("v-col",{staticStyle:{"padding-top":"0px"},attrs:{cols:"2"}},[this.$store.state.userInfo?a("router-link",{attrs:{to:"/user/"+this.$store.state.userInfo.id}},[a("v-avatar",{attrs:{size:"62"}},[a("v-img",{attrs:{src:this.$store.state.userInfo.avatarUrl,alt:this.$store.state.userInfo.username,title:this.$store.state.userInfo.username}})],1)],1):t._e(),null==this.$store.state.userInfo?a("v-avatar",{attrs:{size:"62"}},[a("v-img",{attrs:{src:"/images/head.png",alt:"头像",title:"请登录后评论"}})],1):t._e()],1),a("v-col",{staticStyle:{"padding-top":"0px"}},[a("v-textarea",{attrs:{placeholder:"发表公开评论",label:"评论",rows:"2","no-resize":!0}})],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticStyle:{float:"right"},attrs:{color:"primary"}},[t._v("评论")])],1)],1),a("v-divider"),a("v-row",[a("v-col",[t._v(" 评论列表，待完成 ")])],1)],1)},l=[],c=(a("a9e3"),{name:"VideoComment",props:{count:{type:Number,default:0}},data:function(){return{commentCount:this.count}}}),d=c,u=a("2877"),v=a("6544"),p=a.n(v),h=a("8212"),m=a("8336"),f=a("62ad"),g=a("ce7e"),b=a("adda"),x=a("0fd9"),y=a("a844"),w=Object(u["a"])(d,r,l,!1,null,null,null),_=w.exports;p()(w,{VAvatar:h["a"],VBtn:m["a"],VCol:f["a"],VDivider:g["a"],VImg:b["a"],VRow:x["a"],VTextarea:y["a"]});var I={name:"Video",components:{DPlayer:s["a"],Comment:_},data:function(){return{score:0,TimeUtil:n["a"],id:0,videoData:{},windowSize:{},colsWidth:8}},created:function(){this.id=this.$route.params.id,this.videoInfo(),this.onResize()},methods:{onResize:function(){this.windowSize={x:window.innerWidth,y:window.innerHeight},this.windowSize.x<900?this.colsWidth=12:this.colsWidth=8},videoInfo:function(){var t=this;fetch("/api/article/video/".concat(this.id),{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"GET",credentials:"include"}).then((function(t){return t.json()})).then((function(e){200===e.status&&e.data.isShow?(t.videoData=e.data,document.title=e.data.title):t.$router.push("/")})).catch((function(t){return null}))}}},C=I,H=(a("12ab"),a("a523")),k=a("132d"),D=(a("696f"),a("9d26")),S=a("a9ad"),V=a("16b7"),$=a("af2b"),z=a("5311"),P=a("7560"),T=a("80d2"),F=a("58df"),N=Object(F["a"])(S["a"],V["a"],z["a"],$["a"],P["a"]).extend({name:"v-rating",props:{backgroundColor:{type:String,default:"accent"},color:{type:String,default:"primary"},clearable:Boolean,dense:Boolean,emptyIcon:{type:String,default:"$ratingEmpty"},fullIcon:{type:String,default:"$ratingFull"},halfIcon:{type:String,default:"$ratingHalf"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,size:[Number,String],value:{type:Number,default:0}},data(){return{hoverIndex:-1,internalValue:this.value}},computed:{directives(){return this.readonly||!this.ripple?[]:[{name:"ripple",value:{circle:!0}}]},iconProps(){const{dark:t,large:e,light:a,medium:i,small:o,size:s,xLarge:n,xSmall:r}=this.$props;return{dark:t,large:e,light:a,medium:i,size:s,small:o,xLarge:n,xSmall:r}},isHovering(){return this.hover&&this.hoverIndex>=0}},watch:{internalValue(t){t!==this.value&&this.$emit("input",t)},value(t){this.internalValue=t}},methods:{createClickFn(t){return e=>{if(this.readonly)return;const a=this.genHoverIndex(e,t);this.clearable&&this.internalValue===a?this.internalValue=0:this.internalValue=a}},createProps(t){const e={index:t,value:this.internalValue,click:this.createClickFn(t),isFilled:Math.floor(this.internalValue)>t,isHovered:Math.floor(this.hoverIndex)>t};return this.halfIncrements&&(e.isHalfHovered=!e.isHovered&&(this.hoverIndex-t)%1>0,e.isHalfFilled=!e.isFilled&&(this.internalValue-t)%1>0),e},genHoverIndex(t,e){let a=this.isHalfEvent(t);return this.halfIncrements&&this.$vuetify.rtl&&(a=!a),e+(a?.5:1)},getIconName(t){const e=this.isHovering?t.isHovered:t.isFilled,a=this.isHovering?t.isHalfHovered:t.isHalfFilled;return e?this.fullIcon:a?this.halfIcon:this.emptyIcon},getColor(t){if(this.isHovering){if(t.isHovered||t.isHalfHovered)return this.color}else if(t.isFilled||t.isHalfFilled)return this.color;return this.backgroundColor},isHalfEvent(t){if(this.halfIncrements){const e=t.target&&t.target.getBoundingClientRect();if(e&&t.pageX-e.left<e.width/2)return!0}return!1},onMouseEnter(t,e){this.runDelay("open",()=>{this.hoverIndex=this.genHoverIndex(t,e)})},onMouseLeave(){this.runDelay("close",()=>this.hoverIndex=-1)},genItem(t){const e=this.createProps(t);if(this.$scopedSlots.item)return this.$scopedSlots.item(e);const a={click:e.click};return this.hover&&(a.mouseenter=e=>this.onMouseEnter(e,t),a.mouseleave=this.onMouseLeave,this.halfIncrements&&(a.mousemove=e=>this.onMouseEnter(e,t))),this.$createElement(D["a"],this.setTextColor(this.getColor(e),{attrs:{tabindex:-1},directives:this.directives,props:this.iconProps,on:a}),[this.getIconName(e)])}},render(t){const e=Object(T["h"])(Number(this.length)).map(t=>this.genItem(t));return t("div",{staticClass:"v-rating",class:{"v-rating--readonly":this.readonly,"v-rating--dense":this.dense}},e)}}),R=a("3a2f"),M=a("269a"),B=a.n(M),E=a("dc22"),L=Object(u["a"])(C,i,o,!1,null,null,null);e["default"]=L.exports;p()(L,{VAvatar:h["a"],VBtn:m["a"],VCol:f["a"],VContainer:H["a"],VDivider:g["a"],VIcon:k["a"],VImg:b["a"],VRating:N,VRow:x["a"],VTooltip:R["a"]}),B()(L,{Resize:E["a"]})},"8ce9":function(t,e,a){},a844:function(t,e,a){"use strict";a("1681");var i=a("8654"),o=a("58df");const s=Object(o["a"])(i["a"]);e["a"]=s.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...i["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=i["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){i["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},ce7e:function(t,e,a){"use strict";a("8ce9");var i=a("7560");e["a"]=i["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})}}]);