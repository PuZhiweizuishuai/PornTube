import{V as b}from"./VideoCard-CzXdTGKP.js";import{_ as I,c as n,w as e,r,o as l,a as i,g as v,f as C,b as m,e as c,t as y,F as p,d as L}from"./index-TiTfTDly.js";import"./time-util-nx3sX2E9.js";import"./string-utils-8vaaKgF8.js";const N={name:"CategoryView",components:{VideoCared:b},data(){return{videoList:[],page:1,size:24,length:0,categoryId:0,categoryList:[],categoryChiled:{},showChileName:!1}},created(){this.$route.query.page===void 0?this.page=1:this.page=parseInt(this.$route.query.page),this.categoryId=parseInt(this.$route.params.id),this.getCategory(),this.getVideoList()},methods:{setCategoryFather(){this.categoryList.id!==this.categoryId&&(this.categoryId=this.categoryList.id,this.showChileName=!1,this.getVideoList())},getCategory(){this.httpGet(`/category/tree?category=${this.categoryId}`,t=>{this.categoryList=t.data,this.categoryList.id!==this.categoryId&&(this.showChileName=!0,this.getNowCategory())})},getNowCategory(){for(let t=0;t<this.categoryList.children.length;t++){const o=this.categoryList.children[t];if(o.id===this.categoryId){this.categoryChiled=o;return}}},getVideoList(){this.httpGet(`/article/category/${this.categoryId}?page=${this.page}&limit=${this.size}`,t=>{t.data==null?(this.videoList=[],this.page=1,this.length=0):(this.videoList=t.data.list,this.page=t.data.currPage,this.length=t.data.totalPage)})},setCategory(t){this.categoryId=t.id,this.showChileName=!0,this.categoryChiled=t,this.getVideoList()},pageChange(t){this.page=t,this.$router.push({query:{page:this.page}}),this.getVideoList(),window.scrollTo({top:0,behavior:"smooth"})},back(){this.$router.go(-1)}}},B={class:"d-flex align-center"};function F(t,o,q,z,a,g){const h=r("v-btn"),f=r("v-icon"),u=r("v-col"),d=r("v-row"),V=r("v-card"),w=r("v-divider"),k=r("VideoCared"),x=r("v-pagination"),_=r("v-container");return l(),n(_,{fluid:"",class:"fill-height pa-6"},{default:e(()=>[i(V,{flat:"",class:"mb-4 pa-3 rounded-lg"},{default:e(()=>[i(d,{align:"center"},{default:e(()=>[i(u,{cols:"12",sm:"8"},{default:e(()=>[C("div",B,[i(h,{icon:"mdi-arrow-left-thick",color:"primary",variant:"outlined",class:"mr-2",density:"comfortable",onClick:o[0]||(o[0]=s=>g.back())}),i(h,{class:"font-weight-bold text-h6 text-sm-h5 mr-1",variant:"text",color:"primary",onClick:o[1]||(o[1]=s=>g.setCategoryFather())},{default:e(()=>[c(y(a.categoryList.name),1)]),_:1}),a.showChileName?(l(),m(p,{key:0},[i(f,{color:"grey"},{default:e(()=>o[3]||(o[3]=[c("mdi-chevron-right")])),_:1}),i(h,{class:"font-weight-bold text-h6 text-sm-h5 ml-1",variant:"text",color:"primary"},{default:e(()=>[c(y(a.categoryChiled.name),1)]),_:1})],64)):v("",!0)])]),_:1})]),_:1}),i(d,{class:"mt-2"},{default:e(()=>[i(u,{cols:"12"},{default:e(()=>[(l(!0),m(p,null,L(a.categoryList.children,s=>(l(),n(h,{key:s.id,variant:"text",color:"primary",onClick:G=>g.setCategory(s)},{default:e(()=>[c(y(s.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),i(w,{class:"mb-6"}),a.videoList.length>0?(l(),n(d,{key:0,"no-gutters":""},{default:e(()=>[(l(!0),m(p,null,L(a.videoList,s=>(l(),n(u,{key:s.id},{default:e(()=>[i(k,{video:s},null,8,["video"])]),_:2},1024))),128))]),_:1})):(l(),n(d,{key:1,class:"mt-4"},{default:e(()=>[i(u,{cols:"12",class:"text-center"},{default:e(()=>[i(f,{size:"x-large",color:"grey",class:"mb-2"},{default:e(()=>o[4]||(o[4]=[c("mdi-video-off")])),_:1}),o[5]||(o[5]=C("p",{class:"text-body-1"},"暂无视频内容",-1))]),_:1})]),_:1})),a.length>1?(l(),n(_,{key:2},{default:e(()=>[i(d,{justify:"center"},{default:e(()=>[i(x,{modelValue:a.page,"onUpdate:modelValue":[o[2]||(o[2]=s=>a.page=s),g.pageChange],length:a.length,"total-visible":7,rounded:""},null,8,["modelValue","length","onUpdate:modelValue"])]),_:1})]),_:1})):v("",!0)]),_:1})}const D=I(N,[["render",F]]);export{D as default};
