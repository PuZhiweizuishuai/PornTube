import{_ as xn}from"./time-util-nx3sX2E9.js";import{_ as ut,u as kn,b as it,o as je,f as Le,c as Ue,w as W,r as ie,a as U,t as Me,e as _e,g as ht,m as Gt,F as En,d as _n}from"./index-TiTfTDly.js";import{U as pr}from"./ua-parser-DP5omx3I.js";var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sn(ne){return ne&&ne.__esModule&&Object.prototype.hasOwnProperty.call(ne,"default")?ne.default:ne}function Jt(ne){throw new Error('Could not dynamically require "'+ne+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rt={exports:{}};Rt.exports;var cr;function qa(){return cr||(cr=1,function(ne,X){/*!
 * artplayer.js v5.2.2
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2025 Harvey Zack
 * Released under the MIT License.
 */(function(b,H,v,f,m){var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Xt<"u"?Xt:{},u=typeof y[f]=="function"&&y[f],g=u.cache||{},w=typeof Jt=="function"&&Jt.bind(ne);function i(l,h){if(!g[l]){if(!b[l]){var d=typeof y[f]=="function"&&y[f];if(!h&&d)return d(l,!0);if(u)return u(l,!0);if(w&&typeof l=="string")return w(l);var _=Error("Cannot find module '"+l+"'");throw _.code="MODULE_NOT_FOUND",_}x.resolve=function(E){var p=b[l][1][E];return p??E},x.cache={};var S=g[l]=new i.Module(l);b[l][0].call(S.exports,x,S,S.exports,this)}return g[l].exports;function x(E){var p=x.resolve(E);return p===!1?{}:i(p)}}i.isParcelRequire=!0,i.Module=function(l){this.id=l,this.bundle=i,this.exports={}},i.modules=b,i.cache=g,i.parent=u,i.register=function(l,h){b[l]=[function(d,_){_.exports=h},{}]},Object.defineProperty(i,"root",{get:function(){return y[f]}}),y[f]=i;for(var o=0;o<H.length;o++)i(H[o]);{var c=i(v);ne.exports=c}})({"5lTcX":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("bundle-text:./style/index.less"),y=f.interopDefault(m),u=b("option-validator"),g=f.interopDefault(u),w=b("./utils/emitter"),i=f.interopDefault(w),o=b("./utils"),c=b("./scheme"),l=f.interopDefault(c),h=b("./config"),d=f.interopDefault(h),_=b("./template"),S=f.interopDefault(_),x=b("./i18n"),E=f.interopDefault(x),p=b("./player"),L=f.interopDefault(p),j=b("./control"),O=f.interopDefault(j),A=b("./contextmenu"),P=f.interopDefault(A),F=b("./info"),Y=f.interopDefault(F),R=b("./subtitle"),$=f.interopDefault(R),B=b("./events"),N=f.interopDefault(B),z=b("./hotkey"),q=f.interopDefault(z),G=b("./layer"),se=f.interopDefault(G),fe=b("./loading"),I=f.interopDefault(fe),ke=b("./notice"),Ee=f.interopDefault(ke),Oe=b("./mask"),Ie=f.interopDefault(Oe),Z=b("./icons"),ge=f.interopDefault(Z),re=b("./setting"),K=f.interopDefault(re),Se=b("./storage"),oe=f.interopDefault(Se),Ae=b("./plugins"),ve=f.interopDefault(Ae);let Re=0,pe=[];class le extends i.default{constructor(Ne,Je){super(),this.id=++Re;let ot=o.mergeDeep(le.option,Ne);if(ot.container=Ne.container,this.option=(0,g.default)(ot,l.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new S.default(this),this.events=new N.default(this),this.storage=new oe.default(this),this.icons=new ge.default(this),this.i18n=new E.default(this),this.notice=new Ee.default(this),this.player=new L.default(this),this.layers=new se.default(this),this.controls=new O.default(this),this.contextmenu=new P.default(this),this.subtitle=new $.default(this),this.info=new Y.default(this),this.loading=new I.default(this),this.hotkey=new q.default(this),this.mask=new Ie.default(this),this.setting=new K.default(this),this.plugins=new ve.default(this),typeof Je=="function"&&this.on("ready",()=>Je.call(this,this)),le.DEBUG){let Qe=et=>console.log(`[ART.${this.id}] -> ${et}`);Qe("Version@"+le.version),Qe("Env@"+le.env),Qe("Build@"+le.build);for(let et=0;et<d.default.events.length;et++)this.on("video:"+d.default.events[et],tt=>Qe("Event@"+tt.type))}pe.push(this)}static get instances(){return pe}static get version(){return"5.2.2"}static get env(){return"production"}static get build(){return"2025-01-19 17:32:44"}static get config(){return d.default}static get utils(){return o}static get scheme(){return l.default}static get Emitter(){return i.default}static get validator(){return g.default}static get kindOf(){return g.default.kindOf}static get html(){return S.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:Ne=>Ne},moreVideoAttr:{controls:!1,preload:o.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator==null?void 0:navigator.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(Ne=!0){this.events.destroy(),this.template.destroy(Ne),pe.splice(pe.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}v.default=le,le.STYLE=y.default,le.DEBUG=!1,le.CONTEXTMENU=!0,le.NOTICE_TIME=2e3,le.SETTING_WIDTH=250,le.SETTING_ITEM_WIDTH=200,le.SETTING_ITEM_HEIGHT=35,le.RESIZE_TIME=200,le.SCROLL_TIME=200,le.SCROLL_GAP=50,le.AUTO_PLAYBACK_MAX=10,le.AUTO_PLAYBACK_MIN=5,le.AUTO_PLAYBACK_TIMEOUT=3e3,le.RECONNECT_TIME_MAX=5,le.RECONNECT_SLEEP_TIME=1e3,le.CONTROL_HIDE_TIME=3e3,le.DBCLICK_TIME=300,le.DBCLICK_FULLSCREEN=!0,le.MOBILE_DBCLICK_PLAY=!0,le.MOBILE_CLICK_PLAY=!1,le.AUTO_ORIENTATION_TIME=200,le.INFO_LOOP_TIME=1e3,le.FAST_FORWARD_VALUE=3,le.FAST_FORWARD_TIME=1e3,le.TOUCH_MOVE_RATIO=.5,le.VOLUME_STEP=.1,le.SEEK_STEP=5,le.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],le.ASPECT_RATIO=["default","4:3","16:9"],le.FLIP=["normal","horizontal","vertical"],le.FULLSCREEN_WEB_IN_BODY=!1,le.LOG_VERSION=!0,le.USE_RAF=!1,o.isBrowser&&(window.Artplayer=le,o.setStyleText("artplayer-style",y.default),setTimeout(()=>{le.LOG_VERSION&&console.log(`%c ArtPlayer %c ${le.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"0016T","option-validator":"bAWi2","./utils/emitter":"66mFZ","./utils":"71aH7","./scheme":"AKEiO","./config":"lyjeQ","./template":"X13Zf","./i18n":"3jKkj","./player":"a90nx","./control":"8Z0Uf","./contextmenu":"2KYsr","./info":"02ajl","./subtitle":"eSWto","./events":"jo4S1","./hotkey":"6NoFy","./layer":"6G6hZ","./loading":"3dsEe","./notice":"dWGTw","./mask":"5POkG","./icons":"6OeNg","./setting":"3eYNH","./storage":"2aaJe","./plugins":"8MTUM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"0016T":[function(b,H,v){H.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;width:100%;height:100%;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;width:100%;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;width:100%;height:100%;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;width:100%;height:50%;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);width:100%;height:100%;position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;padding:var(--art-padding);pointer-events:none;width:100%;height:auto;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-droging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{fill:var(--art-theme);width:15px;height:15px}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],bAWi2:[function(b,H,v){var f;f=function(){function m(c){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(c)}var y=Object.prototype.toString,u=function(c){if(c===void 0)return"undefined";if(c===null)return"null";var l=m(c);if(l==="boolean")return"boolean";if(l==="string")return"string";if(l==="number")return"number";if(l==="symbol")return"symbol";if(l==="function")return g(c)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(c):c instanceof Array)return"array";if(c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return"buffer";if(function(h){try{if(typeof h.length=="number"&&typeof h.callee=="function")return!0}catch(d){if(d.message.indexOf("callee")!==-1)return!0}return!1}(c))return"arguments";if(c instanceof Date||typeof c.toDateString=="function"&&typeof c.getDate=="function"&&typeof c.setDate=="function")return"date";if(c instanceof Error||typeof c.message=="string"&&c.constructor&&typeof c.constructor.stackTraceLimit=="number")return"error";if(c instanceof RegExp||typeof c.flags=="string"&&typeof c.ignoreCase=="boolean"&&typeof c.multiline=="boolean"&&typeof c.global=="boolean")return"regexp";switch(g(c)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof c.throw=="function"&&typeof c.return=="function"&&typeof c.next=="function")return"generator";switch(l=y.call(c)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return l.slice(8,-1).toLowerCase().replace(/\s/g,"")};function g(c){return c.constructor?c.constructor.name:null}function w(c,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return i(c,l,h),o(c,l,h),function(d,_,S){var x=u(_),E=u(d);if(x==="object"){if(E!=="object")throw Error("[Type Error]: '".concat(S.join("."),"' require 'object' type, but got '").concat(E,"'"));Object.keys(_).forEach(function(p){var L=d[p],j=_[p],O=S.slice();O.push(p),i(L,j,O),o(L,j,O),w(L,j,O)})}if(x==="array"){if(E!=="array")throw Error("[Type Error]: '".concat(S.join("."),"' require 'array' type, but got '").concat(E,"'"));d.forEach(function(p,L){var j=d[L],O=_[L]||_[0],A=S.slice();A.push(L),i(j,O,A),o(j,O,A),w(j,O,A)})}}(c,l,h),c}function i(c,l,h){if(u(l)==="string"){var d=u(c);if(l[0]==="?"&&(l=l.slice(1)+"|undefined"),!(-1<l.indexOf("|")?l.split("|").map(function(_){return _.toLowerCase().trim()}).filter(Boolean).some(function(_){return d===_}):l.toLowerCase().trim()===d))throw Error("[Type Error]: '".concat(h.join("."),"' require '").concat(l,"' type, but got '").concat(d,"'"))}}function o(c,l,h){if(u(l)==="function"){var d=l(c,u(c),h);if(d!==!0){var _=u(d);throw _==="string"?Error(d):_==="error"?d:Error("[Validator Error]: The scheme for '".concat(h.join("."),"' validator require return true, but got '").concat(d,"'"))}}}return w.kindOf=u,w},H.exports=f()},{}],"66mFZ":[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v),v.default=class{on(f,m,y){let u=this.e||(this.e={});return(u[f]||(u[f]=[])).push({fn:m,ctx:y}),this}once(f,m,y){let u=this;function g(...w){u.off(f,g),m.apply(y,w)}return g._=m,this.on(f,g,y)}emit(f,...m){let y=((this.e||(this.e={}))[f]||[]).slice();for(let u=0;u<y.length;u+=1)y[u].fn.apply(y[u].ctx,m);return this}off(f,m){let y=this.e||(this.e={}),u=y[f],g=[];if(u&&m)for(let w=0,i=u.length;w<i;w+=1)u[w].fn!==m&&u[w].fn._!==m&&g.push(u[w]);return g.length?y[f]=g:delete y[f],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(b,H,v){v.interopDefault=function(f){return f&&f.__esModule?f:{default:f}},v.defineInteropFlag=function(f){Object.defineProperty(f,"__esModule",{value:!0})},v.exportAll=function(f,m){return Object.keys(f).forEach(function(y){y==="default"||y==="__esModule"||Object.prototype.hasOwnProperty.call(m,y)||Object.defineProperty(m,y,{enumerable:!0,get:function(){return f[y]}})}),m},v.export=function(f,m,y){Object.defineProperty(f,m,{enumerable:!0,get:y})}},{}],"71aH7":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./dom");f.exportAll(m,v);var y=b("./error");f.exportAll(y,v);var u=b("./subtitle");f.exportAll(u,v);var g=b("./file");f.exportAll(g,v);var w=b("./property");f.exportAll(w,v);var i=b("./time");f.exportAll(i,v);var o=b("./format");f.exportAll(o,v);var c=b("./compatibility");f.exportAll(c,v)},{"./dom":"bSNiV","./error":"hwmZz","./subtitle":"inzwq","./file":"6b7Ip","./property":"5NSdr","./time":"epmNy","./format":"gapRl","./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bSNiV:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"query",()=>y),f.export(v,"queryAll",()=>u),f.export(v,"addClass",()=>g),f.export(v,"removeClass",()=>w),f.export(v,"hasClass",()=>i),f.export(v,"append",()=>o),f.export(v,"remove",()=>c),f.export(v,"setStyle",()=>l),f.export(v,"setStyles",()=>h),f.export(v,"getStyle",()=>d),f.export(v,"sublings",()=>_),f.export(v,"inverseClass",()=>S),f.export(v,"tooltip",()=>x),f.export(v,"isInViewport",()=>E),f.export(v,"includeFromEvent",()=>p),f.export(v,"replaceElement",()=>L),f.export(v,"createElement",()=>j),f.export(v,"getIcon",()=>O),f.export(v,"setStyleText",()=>A),f.export(v,"supportsFlex",()=>P),f.export(v,"getRect",()=>F),f.export(v,"loadImg",()=>Y);var m=b("./compatibility");function y(R,$=document){return $.querySelector(R)}function u(R,$=document){return Array.from($.querySelectorAll(R))}function g(R,$){return R.classList.add($)}function w(R,$){return R.classList.remove($)}function i(R,$){return R.classList.contains($)}function o(R,$){return $ instanceof Element?R.appendChild($):R.insertAdjacentHTML("beforeend",String($)),R.lastElementChild||R.lastChild}function c(R){return R.parentNode.removeChild(R)}function l(R,$,B){return R.style[$]=B,R}function h(R,$){for(let B in $)l(R,B,$[B]);return R}function d(R,$,B=!0){let N=window.getComputedStyle(R,null).getPropertyValue($);return B?parseFloat(N):N}function _(R){return Array.from(R.parentElement.children).filter($=>$!==R)}function S(R,$){_(R).forEach(B=>w(B,$)),g(R,$)}function x(R,$,B="top"){m.isMobile||(R.setAttribute("aria-label",$),g(R,"hint--rounded"),g(R,`hint--${B}`))}function E(R,$=0){let B=R.getBoundingClientRect(),N=window.innerHeight||document.documentElement.clientHeight,z=window.innerWidth||document.documentElement.clientWidth,q=B.top-$<=N&&B.top+B.height+$>=0,G=B.left-$<=z+$&&B.left+B.width+$>=0;return q&&G}function p(R,$){return R.composedPath&&R.composedPath().indexOf($)>-1}function L(R,$){return $.parentNode.replaceChild(R,$),R}function j(R){return document.createElement(R)}function O(R="",$=""){let B=j("i");return g(B,"art-icon"),g(B,`art-icon-${R}`),o(B,$),B}function A(R,$){let B=document.getElementById(R);B||((B=document.createElement("style")).id=R,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.head.appendChild(B)}):(document.head||document.documentElement).appendChild(B)),B.textContent=$}function P(){let R=document.createElement("div");return R.style.display="flex",R.style.display==="flex"}function F(R){return R.getBoundingClientRect()}function Y(R,$){return new Promise((B,N)=>{let z=new Image;z.onload=function(){if($&&$!==1){let q=document.createElement("canvas"),G=q.getContext("2d");q.width=z.width*$,q.height=z.height*$,G.drawImage(z,0,0,q.width,q.height),q.toBlob(se=>{let fe=URL.createObjectURL(se),I=new Image;I.onload=function(){B(I)},I.onerror=function(){URL.revokeObjectURL(fe),N(Error(`Image load failed: ${R}`))},I.src=fe})}else B(z)},z.onerror=function(){N(Error(`Image load failed: ${R}`))},z.src=R})}},{"./compatibility":"6ZTr6","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6ZTr6":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"userAgent",()=>m),f.export(v,"isSafari",()=>y),f.export(v,"isWechat",()=>u),f.export(v,"isIE",()=>g),f.export(v,"isAndroid",()=>w),f.export(v,"isIOS",()=>i),f.export(v,"isIOS13",()=>o),f.export(v,"isMobile",()=>c),f.export(v,"isBrowser",()=>l);let m=typeof navigator<"u"?navigator.userAgent:"",y=/^((?!chrome|android).)*safari/i.test(m),u=/MicroMessenger/i.test(m),g=/MSIE|Trident/i.test(m),w=/android/i.test(m),i=/iPad|iPhone|iPod/i.test(m)&&!window.MSStream,o=i||m.includes("Macintosh")&&navigator.maxTouchPoints>=1,c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(m)||o,l=typeof window<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hwmZz:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"ArtPlayerError",()=>m),f.export(v,"errorHandle",()=>y);class m extends Error{constructor(g,w){super(g),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,w||this.constructor),this.name="ArtPlayerError"}}function y(u,g){if(!u)throw new m(g);return u}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],inzwq:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(g){return`WEBVTT \r
\r
`.concat(g.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(w,i,o)=>{let c=o.slice(0,3);return o.length===1&&(c=o+"00"),o.length===2&&(c=o+"0"),`${i},${c}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat(`\r
\r
`))}function y(g){return URL.createObjectURL(new Blob([g],{type:"text/vtt"}))}function u(g){let w=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function i(o=""){return o.split(/[:.]/).map((c,l,h)=>{if(l===h.length-1){if(c.length===1)return`.${c}00`;if(c.length===2)return`.${c}0`}else if(c.length===1)return(l===0?"0":":0")+c;return l===0?c:l===h.length-1?`.${c}`:`:${c}`}).join("")}return`WEBVTT

`+g.split(/\r?\n/).map(o=>{let c=o.match(w);return c?{start:i(c[1].trim()),end:i(c[2].trim()),text:c[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(l=>l.trim()).join(`
`)}:null}).filter(o=>o).map((o,c)=>o?c+1+`
${o.start} --> ${o.end}
${o.text}`:"").filter(o=>o.trim()).join(`

`)}f.defineInteropFlag(v),f.export(v,"srtToVtt",()=>m),f.export(v,"vttToBlob",()=>y),f.export(v,"assToVtt",()=>u)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6b7Ip":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y,u){let g=document.createElement("a");g.style.display="none",g.href=y,g.download=u,document.body.appendChild(g),g.click(),document.body.removeChild(g)}f.defineInteropFlag(v),f.export(v,"getExt",()=>function y(u){return u.includes("?")?y(u.split("?")[0]):u.includes("#")?y(u.split("#")[0]):u.trim().toLowerCase().split(".").pop()}),f.export(v,"download",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5NSdr":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"def",()=>m),f.export(v,"has",()=>u),f.export(v,"get",()=>g),f.export(v,"mergeDeep",()=>function w(...i){let o=c=>c&&typeof c=="object"&&!Array.isArray(c);return i.reduce((c,l)=>(Object.keys(l).forEach(h=>{let d=c[h],_=l[h];Array.isArray(d)&&Array.isArray(_)?c[h]=d.concat(..._):o(d)&&o(_)?c[h]=w(d,_):c[h]=_}),c),{})});let m=Object.defineProperty,{hasOwnProperty:y}=Object.prototype;function u(w,i){return y.call(w,i)}function g(w,i){return Object.getOwnPropertyDescriptor(w,i)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],epmNy:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(g=0){return new Promise(w=>setTimeout(w,g))}function y(g,w){let i;return function(...o){clearTimeout(i),i=setTimeout(()=>(i=null,g.apply(this,o)),w)}}function u(g,w){let i=!1;return function(...o){i||(g.apply(this,o),i=!0,setTimeout(function(){i=!1},w))}}f.defineInteropFlag(v),f.export(v,"sleep",()=>m),f.export(v,"debounce",()=>y),f.export(v,"throttle",()=>u)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gapRl:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(i,o,c){return Math.max(Math.min(i,Math.max(o,c)),Math.min(o,c))}function y(i){return i.charAt(0).toUpperCase()+i.slice(1)}function u(i){if(!i)return"00:00";let o=Math.floor(i/3600),c=Math.floor((i-3600*o)/60),l=Math.floor(i-3600*o-60*c);return(o>0?[o,c,l]:[c,l]).map(h=>h<10?`0${h}`:String(h)).join(":")}function g(i){return i.replace(/[&<>'"]/g,o=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[o]||o)}function w(i){let o={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},c=RegExp(`(${Object.keys(o).join("|")})`,"g");return i.replace(c,l=>o[l]||l)}f.defineInteropFlag(v),f.export(v,"clamp",()=>m),f.export(v,"capitalize",()=>y),f.export(v,"secondToTime",()=>u),f.export(v,"escape",()=>g),f.export(v,"unescape",()=>w)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],AKEiO:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"ComponentOption",()=>l);var m=b("../utils");let y="array",u="boolean",g="string",w="number",i="object",o="function";function c(h,d,_){return(0,m.errorHandle)(d===g||d===w||h instanceof Element,`${_.join(".")} require '${g}' or 'Element' type`)}let l={html:c,disable:`?${u}`,name:`?${g}`,index:`?${w}`,style:`?${i}`,click:`?${o}`,mounted:`?${o}`,tooltip:`?${g}|${w}`,width:`?${w}`,selector:`?${y}`,onSelect:`?${o}`,switch:`?${u}`,onSwitch:`?${o}`,range:`?${y}`,onRange:`?${o}`,onChange:`?${o}`};v.default={id:g,container:c,url:g,poster:g,type:g,theme:g,lang:g,volume:w,isLive:u,muted:u,autoplay:u,autoSize:u,autoMini:u,loop:u,flip:u,playbackRate:u,aspectRatio:u,screenshot:u,setting:u,hotkey:u,pip:u,mutex:u,backdrop:u,fullscreen:u,fullscreenWeb:u,subtitleOffset:u,miniProgressBar:u,useSSR:u,playsInline:u,lock:u,fastForward:u,autoPlayback:u,autoOrientation:u,airplay:u,proxy:`?${o}`,plugins:[o],layers:[l],contextmenu:[l],settings:[l],controls:[{...l,position:(h,d,_)=>{let S=["top","left","right"];return(0,m.errorHandle)(S.includes(h),`${_.join(".")} only accept ${S.toString()} as parameters`)}}],quality:[{default:`?${u}`,html:g,url:g}],highlight:[{time:w,text:g}],thumbnails:{url:g,number:w,column:w,width:w,height:w,scale:w},subtitle:{url:g,name:g,type:g,style:i,escape:u,encoding:g,onVttLoad:o},moreVideoAttr:i,i18n:i,icons:i,cssVar:i,customType:i}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lyjeQ:[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v),v.default={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],X13Zf:[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v);var f=b("./utils");class m{constructor(u){this.art=u;let{option:g,constructor:w}=u;g.container instanceof Element?this.$container=g.container:(this.$container=(0,f.query)(g.container),(0,f.errorHandle)(this.$container,`No container element found by ${g.container}`)),(0,f.errorHandle)((0,f.supportsFlex)(),"The current browser does not support flex layout");let i=this.$container.tagName.toLowerCase();(0,f.errorHandle)(i==="div",`Unsupported container element type, only support 'div' but got '${i}'`),(0,f.errorHandle)(w.instances.every(o=>o.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=u.id,this.init()}static get html(){return'<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">5.2.2</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>'}query(u){return(0,f.query)(u,this.$container)}init(){let{option:u}=this.art;if(u.useSSR||(this.$container.innerHTML=m.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),u.proxy){let g=u.proxy.call(this.art,this.art);(0,f.errorHandle)(g instanceof HTMLVideoElement||g instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,f.replaceElement)(g,this.$video),g.className="art-video",this.$video=g}u.backdrop&&(0,f.addClass)(this.$player,"art-backdrop"),f.isMobile&&(0,f.addClass)(this.$player,"art-mobile")}destroy(u){u?this.$container.innerHTML="":(0,f.addClass)(this.$player,"art-destroy")}}v.default=m},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3jKkj":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("../utils"),y=b("./zh-cn"),u=f.interopDefault(y);v.default=class{constructor(g){this.art=g,this.languages={"zh-cn":u.default},this.language={},this.update(g.option.i18n)}init(){let g=this.art.option.lang.toLowerCase();this.language=this.languages[g]||{}}get(g){return this.language[g]||g}update(g){this.languages=(0,m.mergeDeep)(this.languages,g),this.init()}}},{"../utils":"71aH7","./zh-cn":"5Y91w","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5Y91w":[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v);let f={"Video Info":"统计信息",Close:"关闭","Video Load Failed":"加载失败",Volume:"音量",Play:"播放",Pause:"暂停",Rate:"速度",Mute:"静音","Video Flip":"画面翻转",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新连接","Show Setting":"显示设置","Hide Setting":"隐藏设置",Screenshot:"截图","Play Speed":"播放速度","Aspect Ratio":"画面比例",Default:"默认",Normal:"正常",Open:"打开","Switch Video":"切换","Switch Subtitle":"切换字幕",Fullscreen:"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"网页全屏","Exit Web Fullscreen":"退出网页全屏","Mini Player":"迷你播放器","PIP Mode":"开启画中画","Exit PIP Mode":"退出画中画","PIP Not Supported":"不支持画中画","Fullscreen Not Supported":"不支持全屏","Subtitle Offset":"字幕偏移","Last Seen":"上次看到","Jump Play":"跳转播放",AirPlay:"隔空播放","AirPlay Not Available":"隔空播放不可用"};v.default=f,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=f)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],a90nx:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./urlMix"),y=f.interopDefault(m),u=b("./attrMix"),g=f.interopDefault(u),w=b("./playMix"),i=f.interopDefault(w),o=b("./pauseMix"),c=f.interopDefault(o),l=b("./toggleMix"),h=f.interopDefault(l),d=b("./seekMix"),_=f.interopDefault(d),S=b("./volumeMix"),x=f.interopDefault(S),E=b("./currentTimeMix"),p=f.interopDefault(E),L=b("./durationMix"),j=f.interopDefault(L),O=b("./switchMix"),A=f.interopDefault(O),P=b("./playbackRateMix"),F=f.interopDefault(P),Y=b("./aspectRatioMix"),R=f.interopDefault(Y),$=b("./screenshotMix"),B=f.interopDefault($),N=b("./fullscreenMix"),z=f.interopDefault(N),q=b("./fullscreenWebMix"),G=f.interopDefault(q),se=b("./pipMix"),fe=f.interopDefault(se),I=b("./loadedMix"),ke=f.interopDefault(I),Ee=b("./playedMix"),Oe=f.interopDefault(Ee),Ie=b("./playingMix"),Z=f.interopDefault(Ie),ge=b("./autoSizeMix"),re=f.interopDefault(ge),K=b("./rectMix"),Se=f.interopDefault(K),oe=b("./flipMix"),Ae=f.interopDefault(oe),ve=b("./miniMix"),Re=f.interopDefault(ve),pe=b("./posterMix"),le=f.interopDefault(pe),ze=b("./autoHeightMix"),Ne=f.interopDefault(ze),Je=b("./cssVarMix"),ot=f.interopDefault(Je),Qe=b("./themeMix"),et=f.interopDefault(Qe),tt=b("./typeMix"),Ce=f.interopDefault(tt),vt=b("./stateMix"),mt=f.interopDefault(vt),$t=b("./subtitleOffsetMix"),Pt=f.interopDefault($t),Qt=b("./airplayMix"),en=f.interopDefault(Qt),Tt=b("./qualityMix"),bt=f.interopDefault(Tt),Mt=b("./thumbnailsMix"),gt=f.interopDefault(Mt),tn=b("./optionInit"),qe=f.interopDefault(tn),st=b("./eventInit"),We=f.interopDefault(st);v.default=class{constructor(be){(0,y.default)(be),(0,g.default)(be),(0,i.default)(be),(0,c.default)(be),(0,h.default)(be),(0,_.default)(be),(0,x.default)(be),(0,p.default)(be),(0,j.default)(be),(0,A.default)(be),(0,F.default)(be),(0,R.default)(be),(0,B.default)(be),(0,z.default)(be),(0,G.default)(be),(0,fe.default)(be),(0,ke.default)(be),(0,Oe.default)(be),(0,Z.default)(be),(0,re.default)(be),(0,Se.default)(be),(0,Ae.default)(be),(0,Re.default)(be),(0,le.default)(be),(0,Ne.default)(be),(0,ot.default)(be),(0,et.default)(be),(0,Ce.default)(be),(0,mt.default)(be),(0,Pt.default)(be),(0,en.default)(be),(0,bt.default)(be),(0,gt.default)(be),(0,We.default)(be),(0,qe.default)(be)}}},{"./urlMix":"kQoac","./attrMix":"deCma","./playMix":"fOJuP","./pauseMix":"fzHAy","./toggleMix":"cBHxQ","./seekMix":"koAPr","./volumeMix":"6eyuR","./currentTimeMix":"faaWv","./durationMix":"5y91K","./switchMix":"iceD8","./playbackRateMix":"keKwh","./aspectRatioMix":"jihET","./screenshotMix":"36kPY","./fullscreenMix":"2GYOJ","./fullscreenWebMix":"5aYAP","./pipMix":"7EnIB","./loadedMix":"3N9mP","./playedMix":"et96R","./playingMix":"9DzzM","./autoSizeMix":"i1LDY","./rectMix":"IqARI","./flipMix":"7E7Vs","./miniMix":"gpugx","./posterMix":"1SuFS","./autoHeightMix":"8x4te","./cssVarMix":"1CaTA","./themeMix":"2FqhO","./typeMix":"1fQQs","./stateMix":"iBOQW","./subtitleOffsetMix":"6vlBV","./airplayMix":"eftqT","./qualityMix":"5SdyX","./thumbnailsMix":"4HcqV","./optionInit":"fCWZK","./eventInit":"f8Lv3","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kQoac:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{option:g,template:{$video:w}}=u;(0,m.def)(u,"url",{get:()=>w.src,async set(i){if(i){let o=u.url,c=g.type||(0,m.getExt)(i),l=g.customType[c];c&&l?(await(0,m.sleep)(),u.loading.show=!0,l.call(u,w,i,u)):(URL.revokeObjectURL(o),w.src=i),o!==u.url&&(u.option.url=i,u.isReady&&o&&u.once("video:canplay",()=>{u.emit("restart",i)}))}else await(0,m.sleep)(),u.loading.show=!0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],deCma:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$video:g}}=u;(0,m.def)(u,"attr",{value(w,i){if(i===void 0)return g[w];g[w]=i}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fOJuP:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{i18n:g,notice:w,option:i,constructor:{instances:o},template:{$video:c}}=u;(0,m.def)(u,"play",{value:async function(){let l=await c.play();if(w.show=g.get("Play"),u.emit("play"),i.mutex)for(let h=0;h<o.length;h++){let d=o[h];d!==u&&d.pause()}return l}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fzHAy:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$video:g},i18n:w,notice:i}=u;(0,m.def)(u,"pause",{value(){let o=g.pause();return i.show=w.get("Pause"),u.emit("pause"),o}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cBHxQ:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"toggle",{value:()=>u.playing?u.pause():u.play()})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],koAPr:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{notice:g}=u;(0,m.def)(u,"seek",{set(w){u.currentTime=w,u.emit("seek",u.currentTime),u.duration&&(g.show=`${(0,m.secondToTime)(u.currentTime)} / ${(0,m.secondToTime)(u.duration)}`)}}),(0,m.def)(u,"forward",{set(w){u.seek=u.currentTime+w}}),(0,m.def)(u,"backward",{set(w){u.seek=u.currentTime-w}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6eyuR":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$video:g},i18n:w,notice:i,storage:o}=u;(0,m.def)(u,"volume",{get:()=>g.volume||0,set:c=>{g.volume=(0,m.clamp)(c,0,1),i.show=`${w.get("Volume")}: ${parseInt(100*g.volume,10)}`,g.volume!==0&&o.set("volume",g.volume)}}),(0,m.def)(u,"muted",{get:()=>g.muted,set:c=>{g.muted=c,u.emit("muted",c)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],faaWv:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{$video:g}=u.template;(0,m.def)(u,"currentTime",{get:()=>g.currentTime||0,set:w=>{Number.isNaN(w=parseFloat(w))||(g.currentTime=(0,m.clamp)(w,0,u.duration))}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5y91K":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"duration",{get:()=>{let{duration:g}=u.template.$video;return g===1/0?0:g||0}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iceD8:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){function g(w,i){return new Promise((o,c)=>{if(w===u.url)return;let{playing:l,aspectRatio:h,playbackRate:d}=u;u.pause(),u.url=w,u.notice.show="",u.once("video:error",c),u.once("video:loadedmetadata",()=>{u.currentTime=i}),u.once("video:canplay",async()=>{u.playbackRate=d,u.aspectRatio=h,l&&await u.play(),u.notice.show="",o()})})}(0,m.def)(u,"switchQuality",{value:w=>g(w,u.currentTime)}),(0,m.def)(u,"switchUrl",{value:w=>g(w,0)}),(0,m.def)(u,"switch",{set:u.switchUrl})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],keKwh:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$video:g},i18n:w,notice:i}=u;(0,m.def)(u,"playbackRate",{get:()=>g.playbackRate,set(o){o?o!==g.playbackRate&&(g.playbackRate=o,i.show=`${w.get("Rate")}: ${o===1?w.get("Normal"):`${o}x`}`):u.playbackRate=1}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jihET:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{i18n:g,notice:w,template:{$video:i,$player:o}}=u;(0,m.def)(u,"aspectRatio",{get:()=>o.dataset.aspectRatio||"default",set(c){if(c||(c="default"),c==="default")(0,m.setStyle)(i,"width",null),(0,m.setStyle)(i,"height",null),(0,m.setStyle)(i,"margin",null),delete o.dataset.aspectRatio;else{let l=c.split(":").map(Number),{clientWidth:h,clientHeight:d}=o,_=l[0]/l[1];h/d>_?((0,m.setStyle)(i,"width",`${_*d}px`),(0,m.setStyle)(i,"height","100%"),(0,m.setStyle)(i,"margin","0 auto")):((0,m.setStyle)(i,"width","100%"),(0,m.setStyle)(i,"height",`${h/_}px`),(0,m.setStyle)(i,"margin","auto 0")),o.dataset.aspectRatio=c}w.show=`${g.get("Aspect Ratio")}: ${c==="default"?g.get("Default"):c}`,u.emit("aspectRatio",c)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"36kPY":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{notice:g,template:{$video:w}}=u,i=(0,m.createElement)("canvas");(0,m.def)(u,"getDataURL",{value:()=>new Promise((o,c)=>{try{i.width=w.videoWidth,i.height=w.videoHeight,i.getContext("2d").drawImage(w,0,0),o(i.toDataURL("image/png"))}catch(l){g.show=l,c(l)}})}),(0,m.def)(u,"getBlobUrl",{value:()=>new Promise((o,c)=>{try{i.width=w.videoWidth,i.height=w.videoHeight,i.getContext("2d").drawImage(w,0,0),i.toBlob(l=>{o(URL.createObjectURL(l))})}catch(l){g.show=l,c(l)}})}),(0,m.def)(u,"screenshot",{value:async o=>{let c=await u.getDataURL(),l=o||`artplayer_${(0,m.secondToTime)(w.currentTime)}`;return(0,m.download)(c,`${l}.png`),u.emit("screenshot",c),c}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2GYOJ":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>g);var m=b("../libs/screenfull"),y=f.interopDefault(m),u=b("../utils");function g(w){let{i18n:i,notice:o,template:{$video:c,$player:l}}=w,h=_=>{y.default.on("change",()=>{_.emit("fullscreen",y.default.isFullscreen),y.default.isFullscreen?(_.state="fullscreen",(0,u.addClass)(l,"art-fullscreen")):(0,u.removeClass)(l,"art-fullscreen"),_.emit("resize")}),y.default.on("error",S=>{_.emit("fullscreenError",S)}),(0,u.def)(_,"fullscreen",{get:()=>y.default.isFullscreen,async set(S){S?await y.default.request(l):await y.default.exit()}})},d=_=>{_.proxy(document,"webkitfullscreenchange",()=>{_.emit("fullscreen",_.fullscreen),_.emit("resize")}),(0,u.def)(_,"fullscreen",{get:()=>document.fullscreenElement===c,set(S){S?(_.state="fullscreen",c.webkitEnterFullscreen()):c.webkitExitFullscreen()}})};w.once("video:loadedmetadata",()=>{y.default.isEnabled?h(w):c.webkitSupportsFullscreen?d(w):(0,u.def)(w,"fullscreen",{get:()=>!1,set(){o.show=i.get("Fullscreen Not Supported")}}),(0,u.def)(w,"fullscreen",(0,u.get)(w,"fullscreen"))})}},{"../libs/screenfull":"8v40z","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8v40z":[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v);let f=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],m=(()=>{if(typeof document>"u")return!1;let g=f[0],w={};for(let i of f)if(i[1]in document){for(let[o,c]of i.entries())w[g[o]]=c;return w}return!1})(),y={change:m.fullscreenchange,error:m.fullscreenerror},u={request:(g=document.documentElement,w)=>new Promise((i,o)=>{let c=()=>{u.off("change",c),i()};u.on("change",c);let l=g[m.requestFullscreen](w);l instanceof Promise&&l.then(c).catch(o)}),exit:()=>new Promise((g,w)=>{if(!u.isFullscreen){g();return}let i=()=>{u.off("change",i),g()};u.on("change",i);let o=document[m.exitFullscreen]();o instanceof Promise&&o.then(i).catch(w)}),toggle:(g,w)=>u.isFullscreen?u.exit():u.request(g,w),onchange(g){u.on("change",g)},onerror(g){u.on("error",g)},on(g,w){let i=y[g];i&&document.addEventListener(i,w,!1)},off(g,w){let i=y[g];i&&document.removeEventListener(i,w,!1)},raw:m};Object.defineProperties(u,{isFullscreen:{get:()=>!!document[m.fullscreenElement]},element:{enumerable:!0,get:()=>document[m.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[m.fullscreenEnabled]}}),m||(u={isEnabled:!1}),v.default=u},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5aYAP":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{constructor:g,template:{$container:w,$player:i}}=u,o="";(0,m.def)(u,"fullscreenWeb",{get:()=>(0,m.hasClass)(i,"art-fullscreen-web"),set(c){c?(o=i.style.cssText,g.FULLSCREEN_WEB_IN_BODY&&(0,m.append)(document.body,i),u.state="fullscreenWeb",(0,m.setStyle)(i,"width","100%"),(0,m.setStyle)(i,"height","100%"),(0,m.addClass)(i,"art-fullscreen-web"),u.emit("fullscreenWeb",!0)):(g.FULLSCREEN_WEB_IN_BODY&&(0,m.append)(w,i),o&&(i.style.cssText=o,o=""),(0,m.removeClass)(i,"art-fullscreen-web"),u.emit("fullscreenWeb",!1)),u.emit("resize")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7EnIB":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{i18n:g,notice:w,template:{$video:i}}=u;document.pictureInPictureEnabled?function(o){let{template:{$video:c},proxy:l,notice:h}=o;c.disablePictureInPicture=!1,(0,m.def)(o,"pip",{get:()=>document.pictureInPictureElement,set(d){d?(o.state="pip",c.requestPictureInPicture().catch(_=>{throw h.show=_,_})):document.exitPictureInPicture().catch(_=>{throw h.show=_,_})}}),l(c,"enterpictureinpicture",()=>{o.emit("pip",!0)}),l(c,"leavepictureinpicture",()=>{o.emit("pip",!1)})}(u):i.webkitSupportsPresentationMode?function(o){let{$video:c}=o.template;c.webkitSetPresentationMode("inline"),(0,m.def)(o,"pip",{get:()=>c.webkitPresentationMode==="picture-in-picture",set(l){l?(o.state="pip",c.webkitSetPresentationMode("picture-in-picture"),o.emit("pip",!0)):(c.webkitSetPresentationMode("inline"),o.emit("pip",!1))}})}(u):(0,m.def)(u,"pip",{get:()=>!1,set(){w.show=g.get("PIP Not Supported")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3N9mP":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{$video:g}=u.template;(0,m.def)(u,"loaded",{get:()=>u.loadedTime/g.duration}),(0,m.def)(u,"loadedTime",{get:()=>g.buffered.length?g.buffered.end(g.buffered.length-1):0})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],et96R:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"played",{get:()=>u.currentTime/u.duration})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9DzzM":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{$video:g}=u.template;(0,m.def)(u,"playing",{get:()=>typeof g.playing=="boolean"?g.playing:g.currentTime>0&&!g.paused&&!g.ended&&g.readyState>2})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],i1LDY:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{$container:g,$player:w,$video:i}=u.template;(0,m.def)(u,"autoSize",{value(){let{videoWidth:o,videoHeight:c}=i,{width:l,height:h}=(0,m.getRect)(g),d=o/c;l/h>d?((0,m.setStyle)(w,"width",`${h*d/l*100}%`),(0,m.setStyle)(w,"height","100%")):((0,m.setStyle)(w,"width","100%"),(0,m.setStyle)(w,"height",`${l/d/h*100}%`)),u.emit("autoSize",{width:u.width,height:u.height})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],IqARI:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"rect",{get:()=>(0,m.getRect)(u.template.$player)});let g=["bottom","height","left","right","top","width"];for(let w=0;w<g.length;w++){let i=g[w];(0,m.def)(u,i,{get:()=>u.rect[i]})}(0,m.def)(u,"x",{get:()=>u.left+window.pageXOffset}),(0,m.def)(u,"y",{get:()=>u.top+window.pageYOffset})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7E7Vs":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$player:g},i18n:w,notice:i}=u;(0,m.def)(u,"flip",{get:()=>g.dataset.flip||"normal",set(o){o||(o="normal"),o==="normal"?delete g.dataset.flip:g.dataset.flip=o,i.show=`${w.get("Video Flip")}: ${w.get((0,m.capitalize)(o))}`,u.emit("flip",o)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gpugx:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{icons:g,proxy:w,storage:i,template:{$player:o,$video:c}}=u,l=!1,h=0,d=0;function _(){let{$mini:E}=u.template;E&&((0,m.removeClass)(o,"art-mini"),(0,m.setStyle)(E,"display","none"),o.prepend(c),u.emit("mini",!1))}function S(E,p){u.playing?((0,m.setStyle)(E,"display","none"),(0,m.setStyle)(p,"display","flex")):((0,m.setStyle)(E,"display","flex"),(0,m.setStyle)(p,"display","none"))}function x(){let{$mini:E}=u.template,p=(0,m.getRect)(E),L=window.innerHeight-p.height-50,j=window.innerWidth-p.width-50;i.set("top",L),i.set("left",j),(0,m.setStyle)(E,"top",`${L}px`),(0,m.setStyle)(E,"left",`${j}px`)}(0,m.def)(u,"mini",{get:()=>(0,m.hasClass)(o,"art-mini"),set(E){if(E){u.state="mini",(0,m.addClass)(o,"art-mini");let p=function(){let{$mini:O}=u.template;if(O)return(0,m.append)(O,c),(0,m.setStyle)(O,"display","flex");{let A=(0,m.createElement)("div");(0,m.addClass)(A,"art-mini-popup"),(0,m.append)(document.body,A),u.template.$mini=A,(0,m.append)(A,c);let P=(0,m.append)(A,'<div class="art-mini-close"></div>');(0,m.append)(P,g.close),w(P,"click",_);let F=(0,m.append)(A,'<div class="art-mini-state"></div>'),Y=(0,m.append)(F,g.play),R=(0,m.append)(F,g.pause);return w(Y,"click",()=>u.play()),w(R,"click",()=>u.pause()),S(Y,R),u.on("video:playing",()=>S(Y,R)),u.on("video:pause",()=>S(Y,R)),u.on("video:timeupdate",()=>S(Y,R)),w(A,"mousedown",$=>{l=$.button===0,h=$.pageX,d=$.pageY}),u.on("document:mousemove",$=>{if(l){(0,m.addClass)(A,"art-mini-droging");let B=$.pageX-h,N=$.pageY-d;(0,m.setStyle)(A,"transform",`translate(${B}px, ${N}px)`)}}),u.on("document:mouseup",()=>{if(l){l=!1,(0,m.removeClass)(A,"art-mini-droging");let $=(0,m.getRect)(A);i.set("left",$.left),i.set("top",$.top),(0,m.setStyle)(A,"left",`${$.left}px`),(0,m.setStyle)(A,"top",`${$.top}px`),(0,m.setStyle)(A,"transform",null)}}),A}}(),L=i.get("top"),j=i.get("left");L&&j?((0,m.setStyle)(p,"top",`${L}px`),(0,m.setStyle)(p,"left",`${j}px`),(0,m.isInViewport)(p)||x()):x(),u.emit("mini",!0)}else _()}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1SuFS":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$poster:g}}=u;(0,m.def)(u,"poster",{get:()=>{try{return g.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(w){(0,m.setStyle)(g,"backgroundImage",`url(${w})`)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8x4te":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{template:{$container:g,$video:w}}=u;(0,m.def)(u,"autoHeight",{value(){let{clientWidth:i}=g,{videoHeight:o,videoWidth:c}=w,l=i/c*o;(0,m.setStyle)(g,"height",l+"px"),u.emit("autoHeight",l)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1CaTA":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{$player:g}=u.template;(0,m.def)(u,"cssVar",{value:(w,i)=>i?g.style.setProperty(w,i):getComputedStyle(g).getPropertyValue(w)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2FqhO":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"theme",{get:()=>u.cssVar("--art-theme"),set(g){u.cssVar("--art-theme",g)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1fQQs":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"type",{get:()=>u.option.type,set(g){u.option.type=g}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],iBOQW:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let g=["mini","pip","fullscreen","fullscreenWeb"];(0,m.def)(u,"state",{get:()=>g.find(w=>u[w])||"standard",set(w){for(let i=0;i<g.length;i++){let o=g[i];o!==w&&u[o]&&(u[o]=!1)}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6vlBV":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{notice:g,i18n:w,template:i}=u;(0,m.def)(u,"subtitleOffset",{get:()=>{var o;return((o=i.$track)==null?void 0:o.offset)||0},set(o){let{cues:c}=u.subtitle;if(!i.$track||c.length===0)return;let l=(0,m.clamp)(o,-10,10);i.$track.offset=l;for(let h=0;h<c.length;h++){let d=c[h];d.originalStartTime=d.originalStartTime??d.startTime,d.originalEndTime=d.originalEndTime??d.endTime,d.startTime=(0,m.clamp)(d.originalStartTime+l,0,u.duration),d.endTime=(0,m.clamp)(d.originalEndTime+l,0,u.duration)}u.subtitle.update(),g.show=`${w.get("Subtitle Offset")}: ${o}s`,u.emit("subtitleOffset",o)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eftqT:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{i18n:g,notice:w,proxy:i,template:{$video:o}}=u,c=!0;window.WebKitPlaybackTargetAvailabilityEvent&&o.webkitShowPlaybackTargetPicker?i(o,"webkitplaybacktargetavailabilitychanged",l=>{switch(l.availability){case"available":c=!0;break;case"not-available":c=!1}}):c=!1,(0,m.def)(u,"airplay",{value(){c?(o.webkitShowPlaybackTargetPicker(),u.emit("airplay")):w.show=g.get("AirPlay Not Available")}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5SdyX":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){(0,m.def)(u,"quality",{set(g){let{controls:w,notice:i,i18n:o}=u,c=g.find(l=>l.default)||g[0];w.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:(c==null?void 0:c.html)||"",selector:g,onSelect:async l=>(await u.switchQuality(l.url),i.show=`${o.get("Switch Video")}: ${l.html}`,l.html)})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4HcqV":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{events:g,option:w,template:{$progress:i,$video:o}}=u,c=null,l=null,h=!1,d=!1,_=!1;g.hover(i,()=>{_=!0},()=>{_=!1}),u.on("setBar",async(S,x,E)=>{var A;let p=(A=u.controls)==null?void 0:A.thumbnails,{url:L,scale:j}=w.thumbnails;if(!p||!L)return;let O=S==="played"&&E&&m.isMobile;if(S==="hover"||O){if(h||(h=!0,l=await(0,m.loadImg)(L,j),d=!0),!d||!_)return;let P=i.clientWidth*x;(0,m.setStyle)(p,"display","flex"),P>0&&P<i.clientWidth?function(F){var I;let Y=(I=u.controls)==null?void 0:I.thumbnails;if(!Y)return;let{number:R,column:$,width:B,height:N,scale:z}=w.thumbnails,q=B*z||l.naturalWidth/$,G=N*z||q/(o.videoWidth/o.videoHeight),se=Math.floor(F/(i.clientWidth/R)),fe=Math.ceil(se/$)-1;(0,m.setStyle)(Y,"backgroundImage",`url(${l.src})`),(0,m.setStyle)(Y,"height",`${G}px`),(0,m.setStyle)(Y,"width",`${q}px`),(0,m.setStyle)(Y,"backgroundPosition",`-${(se%$||$-1)*q}px -${fe*G}px`),F<=q/2?(0,m.setStyle)(Y,"left",0):F>i.clientWidth-q/2?(0,m.setStyle)(Y,"left",`${i.clientWidth-q}px`):(0,m.setStyle)(Y,"left",`${F-q/2}px`)}(P):m.isMobile||(0,m.setStyle)(p,"display","none"),O&&(clearTimeout(c),c=setTimeout(()=>{(0,m.setStyle)(p,"display","none")},500))}}),(0,m.def)(u,"thumbnails",{get:()=>u.option.thumbnails,set(S){S.url&&!u.option.isLive&&(u.option.thumbnails=S,clearTimeout(c),c=null,l=null,h=!1,d=!1)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fCWZK:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{option:g,storage:w,template:{$video:i,$poster:o}}=u;for(let l in g.moreVideoAttr)u.attr(l,g.moreVideoAttr[l]);g.muted&&(u.muted=g.muted),g.volume&&(i.volume=(0,m.clamp)(g.volume,0,1));let c=w.get("volume");for(let l in typeof c=="number"&&(i.volume=(0,m.clamp)(c,0,1)),g.poster&&(0,m.setStyle)(o,"backgroundImage",`url(${g.poster})`),g.autoplay&&(i.autoplay=g.autoplay),g.playsInline&&(i.playsInline=!0,i["webkit-playsinline"]=!0),g.theme&&(g.cssVar["--art-theme"]=g.theme),g.cssVar)u.cssVar(l,g.cssVar[l]);u.url=g.url}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f8Lv3:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>g);var m=b("../config"),y=f.interopDefault(m),u=b("../utils");function g(w){let{i18n:i,notice:o,option:c,constructor:l,proxy:h,template:{$player:d,$video:_,$poster:S}}=w,x=0;for(let E=0;E<y.default.events.length;E++)h(_,y.default.events[E],p=>{w.emit(`video:${p.type}`,p)});w.on("video:canplay",()=>{x=0,w.loading.show=!1}),w.once("video:canplay",()=>{w.loading.show=!1,w.controls.show=!0,w.mask.show=!0,w.isReady=!0,w.emit("ready")}),w.on("video:ended",()=>{c.loop?(w.seek=0,w.play(),w.controls.show=!1,w.mask.show=!1):(w.controls.show=!0,w.mask.show=!0)}),w.on("video:error",async E=>{x<l.RECONNECT_TIME_MAX?(await(0,u.sleep)(l.RECONNECT_SLEEP_TIME),x+=1,w.url=c.url,o.show=`${i.get("Reconnect")}: ${x}`,w.emit("error",E,x)):(w.mask.show=!0,w.loading.show=!1,w.controls.show=!0,(0,u.addClass)(d,"art-error"),await(0,u.sleep)(l.RECONNECT_SLEEP_TIME),o.show=i.get("Video Load Failed"))}),w.on("video:loadedmetadata",()=>{w.emit("resize"),u.isMobile&&(w.loading.show=!1,w.controls.show=!0,w.mask.show=!0)}),w.on("video:loadstart",()=>{w.loading.show=!0,w.mask.show=!1,w.controls.show=!0}),w.on("video:pause",()=>{w.controls.show=!0,w.mask.show=!0}),w.on("video:play",()=>{w.mask.show=!1,(0,u.setStyle)(S,"display","none")}),w.on("video:playing",()=>{w.mask.show=!1}),w.on("video:progress",()=>{w.playing&&(w.loading.show=!1)}),w.on("video:seeked",()=>{w.loading.show=!1,w.mask.show=!0}),w.on("video:seeking",()=>{w.loading.show=!0,w.mask.show=!1}),w.on("video:timeupdate",()=>{w.mask.show=!1}),w.on("video:waiting",()=>{w.loading.show=!0,w.mask.show=!1})}},{"../config":"lyjeQ","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8Z0Uf":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("../utils/component"),y=f.interopDefault(m),u=b("./fullscreen"),g=f.interopDefault(u),w=b("./fullscreenWeb"),i=f.interopDefault(w),o=b("./pip"),c=f.interopDefault(o),l=b("./playAndPause"),h=f.interopDefault(l),d=b("./progress"),_=f.interopDefault(d),S=b("./time"),x=f.interopDefault(S),E=b("./volume"),p=f.interopDefault(E),L=b("./setting"),j=f.interopDefault(L),O=b("./screenshot"),A=f.interopDefault(O),P=b("./airplay"),F=f.interopDefault(P),Y=b("../utils");class R extends y.default{constructor(B){super(B),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:N}=B,{$player:z,$bottom:q}=this.art.template;B.on("mousemove",()=>{Y.isMobile||(this.show=!0)}),B.on("click",()=>{Y.isMobile?this.toggle():this.show=!0}),B.on("document:mousemove",G=>{this.isHover=(0,Y.includeFromEvent)(G,q)}),B.on("video:timeupdate",()=>{!B.setting.show&&!this.isHover&&!B.isInput&&B.playing&&this.show&&Date.now()-this.timer>=N.CONTROL_HIDE_TIME&&(this.show=!1)}),B.on("control",G=>{G?((0,Y.removeClass)(z,"art-hide-cursor"),(0,Y.addClass)(z,"art-hover"),this.timer=Date.now()):((0,Y.addClass)(z,"art-hide-cursor"),(0,Y.removeClass)(z,"art-hover"))}),this.init()}init(){let{option:B}=this.art;B.isLive||this.add((0,_.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,h.default)({name:"playAndPause",position:"left",index:10})),this.add((0,p.default)({name:"volume",position:"left",index:20})),B.isLive||this.add((0,x.default)({name:"time",position:"left",index:30})),B.quality.length&&(0,Y.sleep)().then(()=>{this.art.quality=B.quality}),B.screenshot&&!Y.isMobile&&this.add((0,A.default)({name:"screenshot",position:"right",index:20})),B.setting&&this.add((0,j.default)({name:"setting",position:"right",index:30})),B.pip&&this.add((0,c.default)({name:"pip",position:"right",index:40})),B.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,F.default)({name:"airplay",position:"right",index:50})),B.fullscreenWeb&&this.add((0,i.default)({name:"fullscreenWeb",position:"right",index:60})),B.fullscreen&&this.add((0,g.default)({name:"fullscreen",position:"right",index:70}));for(let N=0;N<B.controls.length;N++)this.add(B.controls[N])}add(B){let N=typeof B=="function"?B(this.art):B,{$progress:z,$controlsLeft:q,$controlsRight:G}=this.art.template;switch(N.position){case"top":this.$parent=z;break;case"left":this.$parent=q;break;case"right":this.$parent=G;break;default:(0,Y.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(N)}check(B){B.$control_value.innerHTML=B.html;for(let N=0;N<B.$control_option.length;N++){let z=B.$control_option[N];z.default=z===B,z.default&&(0,Y.inverseClass)(z.$control_item,"art-current")}}selector(B,N,z){let{proxy:q}=this.art.events;(0,Y.addClass)(N,"art-control-selector");let G=(0,Y.createElement)("div");(0,Y.addClass)(G,"art-selector-value"),(0,Y.append)(G,B.html),N.innerText="",(0,Y.append)(N,G);let se=(0,Y.createElement)("div");(0,Y.addClass)(se,"art-selector-list"),(0,Y.append)(N,se);for(let I=0;I<B.selector.length;I++){let ke=B.selector[I],Ee=(0,Y.createElement)("div");(0,Y.addClass)(Ee,"art-selector-item"),ke.default&&(0,Y.addClass)(Ee,"art-current"),Ee.dataset.index=I,Ee.dataset.value=ke.value,Ee.innerHTML=ke.html,(0,Y.append)(se,Ee),(0,Y.def)(ke,"$control_option",{get:()=>B.selector}),(0,Y.def)(ke,"$control_item",{get:()=>Ee}),(0,Y.def)(ke,"$control_value",{get:()=>G})}let fe=q(se,"click",async I=>{let ke=I.composedPath()||[],Ee=B.selector.find(Oe=>Oe.$control_item===ke.find(Ie=>Oe.$control_item===Ie));this.check(Ee),B.onSelect&&(G.innerHTML=await B.onSelect.call(this.art,Ee,Ee.$control_item,I))});z.push(fe)}}v.default=R},{"../utils/component":"18nVI","./fullscreen":"c61Lj","./fullscreenWeb":"03jeB","./pip":"u8l8e","./playAndPause":"ebXtb","./progress":"bgoVP","./time":"ikc2j","./volume":"b8NFx","./setting":"03o9l","./screenshot":"4KCF5","./airplay":"4IS2d","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"18nVI":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./dom"),y=b("./error"),u=b("option-validator"),g=f.interopDefault(u),w=b("../scheme");v.default=class{constructor(i){this.id=0,this.art=i,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,m.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(i){let{$player:o}=this.art.template,c=`art-${this.name}-show`;i?(0,m.addClass)(o,c):(0,m.removeClass)(o,c),this.art.emit(this.name,i)}toggle(){this.show=!this.show}add(i){let o=typeof i=="function"?i(this.art):i;if(o.html=o.html||"",(0,g.default)(o,w.ComponentOption),!this.$parent||!this.name||o.disable)return;let c=o.name||`${this.name}${this.id}`,l=this.cache.get(c);(0,y.errorHandle)(!l,`Can't add an existing [${c}] to the [${this.name}]`),this.id+=1;let h=(0,m.createElement)("div");(0,m.addClass)(h,`art-${this.name}`),(0,m.addClass)(h,`art-${this.name}-${c}`);let d=Array.from(this.$parent.children);h.dataset.index=o.index||this.id;let _=d.find(x=>Number(x.dataset.index)>=Number(h.dataset.index));_?_.insertAdjacentElement("beforebegin",h):(0,m.append)(this.$parent,h),o.html&&(0,m.append)(h,o.html),o.style&&(0,m.setStyles)(h,o.style),o.tooltip&&(0,m.tooltip)(h,o.tooltip);let S=[];if(o.click){let x=this.art.events.proxy(h,"click",E=>{E.preventDefault(),o.click.call(this.art,this,E)});S.push(x)}return o.selector&&["left","right"].includes(o.position)&&this.selector(o,h,S),this[c]=h,this.cache.set(c,{$ref:h,events:S,option:o}),o.mounted&&o.mounted.call(this.art,h),h}remove(i){let o=this.cache.get(i);(0,y.errorHandle)(o,`Can't find [${i}] from the [${this.name}]`),o.option.beforeUnmount&&o.option.beforeUnmount.call(this.art,o.$ref);for(let c=0;c<o.events.length;c++)this.art.events.remove(o.events[c]);this.cache.delete(i),delete this[i],(0,m.remove)(o.$ref)}update(i){let o=this.cache.get(i.name);return o&&(i=Object.assign(o.option,i),this.remove(i.name)),this.add(i)}}},{"./dom":"bSNiV","./error":"hwmZz","option-validator":"bAWi2","../scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],c61Lj:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,tooltip:g.i18n.get("Fullscreen"),mounted:w=>{let{proxy:i,icons:o,i18n:c}=g,l=(0,m.append)(w,o.fullscreenOn),h=(0,m.append)(w,o.fullscreenOff);(0,m.setStyle)(h,"display","none"),i(w,"click",()=>{g.fullscreen=!g.fullscreen}),g.on("fullscreen",d=>{d?((0,m.tooltip)(w,c.get("Exit Fullscreen")),(0,m.setStyle)(l,"display","none"),(0,m.setStyle)(h,"display","inline-flex")):((0,m.tooltip)(w,c.get("Fullscreen")),(0,m.setStyle)(l,"display","inline-flex"),(0,m.setStyle)(h,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03jeB":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,tooltip:g.i18n.get("Web Fullscreen"),mounted:w=>{let{proxy:i,icons:o,i18n:c}=g,l=(0,m.append)(w,o.fullscreenWebOn),h=(0,m.append)(w,o.fullscreenWebOff);(0,m.setStyle)(h,"display","none"),i(w,"click",()=>{g.fullscreenWeb=!g.fullscreenWeb}),g.on("fullscreenWeb",d=>{d?((0,m.tooltip)(w,c.get("Exit Web Fullscreen")),(0,m.setStyle)(l,"display","none"),(0,m.setStyle)(h,"display","inline-flex")):((0,m.tooltip)(w,c.get("Web Fullscreen")),(0,m.setStyle)(l,"display","inline-flex"),(0,m.setStyle)(h,"display","none"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],u8l8e:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,tooltip:g.i18n.get("PIP Mode"),mounted:w=>{let{proxy:i,icons:o,i18n:c}=g;(0,m.append)(w,o.pip),i(w,"click",()=>{g.pip=!g.pip}),g.on("pip",l=>{(0,m.tooltip)(w,c.get(l?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ebXtb:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,mounted:w=>{let{proxy:i,icons:o,i18n:c}=g,l=(0,m.append)(w,o.play),h=(0,m.append)(w,o.pause);function d(){(0,m.setStyle)(l,"display","flex"),(0,m.setStyle)(h,"display","none")}function _(){(0,m.setStyle)(l,"display","none"),(0,m.setStyle)(h,"display","flex")}(0,m.tooltip)(l,c.get("Play")),(0,m.tooltip)(h,c.get("Pause")),i(l,"click",()=>{g.play()}),i(h,"click",()=>{g.pause()}),g.playing?_():d(),g.on("video:playing",()=>{_()}),g.on("video:pause",()=>{d()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bgoVP:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"getPosFromEvent",()=>y),f.export(v,"setCurrentTime",()=>u),f.export(v,"default",()=>g);var m=b("../utils");function y(w,i){let{$progress:o}=w.template,{left:c}=(0,m.getRect)(o),l=m.isMobile?i.touches[0].clientX:i.clientX,h=(0,m.clamp)(l-c,0,o.clientWidth),d=h/o.clientWidth*w.duration,_=(0,m.secondToTime)(d),S=(0,m.clamp)(h/o.clientWidth,0,1);return{second:d,time:_,width:h,percentage:S}}function u(w,i){if(w.isRotate){let o=i.touches[0].clientY/w.height,c=o*w.duration;w.emit("setBar","played",o,i),w.seek=c}else{let{second:o,percentage:c}=y(w,i);w.emit("setBar","played",c,i),w.seek=o}}function g(w){return i=>{let{icons:o,option:c,proxy:l}=i;return{...w,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:h=>{let d=null,_=!1,S=(0,m.query)(".art-progress-hover",h),x=(0,m.query)(".art-progress-loaded",h),E=(0,m.query)(".art-progress-played",h),p=(0,m.query)(".art-progress-highlight",h),L=(0,m.query)(".art-progress-indicator",h),j=(0,m.query)(".art-progress-tip",h);function O(A,P){let{width:F,time:Y}=P||y(i,A);j.innerText=Y;let R=j.clientWidth;F<=R/2?(0,m.setStyle)(j,"left",0):F>h.clientWidth-R/2?(0,m.setStyle)(j,"left",`${h.clientWidth-R}px`):(0,m.setStyle)(j,"left",`${F-R/2}px`)}o.indicator?(0,m.append)(L,o.indicator):(0,m.setStyle)(L,"backgroundColor","var(--art-theme)"),i.on("setBar",function(A,P,F){let Y=A==="played"&&F&&m.isMobile;A==="loaded"&&(0,m.setStyle)(x,"width",`${100*P}%`),A==="hover"&&(0,m.setStyle)(S,"width",`${100*P}%`),A==="played"&&((0,m.setStyle)(E,"width",`${100*P}%`),(0,m.setStyle)(L,"left",`${100*P}%`)),Y&&((0,m.setStyle)(j,"display","flex"),O(F,{width:h.clientWidth*P,time:(0,m.secondToTime)(P*i.duration)}),clearTimeout(d),d=setTimeout(()=>{(0,m.setStyle)(j,"display","none")},500))}),i.on("video:loadedmetadata",function(){p.innerText="";for(let A=0;A<c.highlight.length;A++){let P=c.highlight[A],F=(0,m.clamp)(P.time,0,i.duration)/i.duration*100,Y=`<span data-text="${P.text}" data-time="${P.time}" style="left: ${F}%"></span>`;(0,m.append)(p,Y)}}),i.on("video:progress",()=>{i.emit("setBar","loaded",i.loaded)}),i.constructor.USE_RAF?i.on("raf",()=>{i.emit("setBar","played",i.played)}):i.on("video:timeupdate",()=>{i.emit("setBar","played",i.played)}),i.on("video:ended",()=>{i.emit("setBar","played",1)}),i.emit("setBar","loaded",i.loaded||0),m.isMobile||(l(h,"click",A=>{A.target!==L&&u(i,A)}),l(h,"mousemove",A=>{let{percentage:P}=y(i,A);i.emit("setBar","hover",P,A),(0,m.setStyle)(j,"display","flex"),(0,m.includeFromEvent)(A,p)?function(F){let{width:Y}=y(i,F),{text:R}=F.target.dataset;j.innerText=R;let $=j.clientWidth;Y<=$/2?(0,m.setStyle)(j,"left",0):Y>h.clientWidth-$/2?(0,m.setStyle)(j,"left",`${h.clientWidth-$}px`):(0,m.setStyle)(j,"left",`${Y-$/2}px`)}(A):O(A)}),l(h,"mouseleave",A=>{(0,m.setStyle)(j,"display","none"),i.emit("setBar","hover",0,A)}),l(h,"mousedown",A=>{_=A.button===0}),i.on("document:mousemove",A=>{if(_){let{second:P,percentage:F}=y(i,A);i.emit("setBar","played",F,A),i.seek=P}}),i.on("document:mouseup",()=>{_&&(_=!1)}))}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ikc2j:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,style:m.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:w=>{function i(){let c=`${(0,m.secondToTime)(g.currentTime)} / ${(0,m.secondToTime)(g.duration)}`;c!==w.innerText&&(w.innerText=c)}i();let o=["video:loadedmetadata","video:timeupdate","video:progress"];for(let c=0;c<o.length;c++)g.on(o[c],i)}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],b8NFx:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,mounted:w=>{let{proxy:i,icons:o}=g,c=(0,m.append)(w,o.volume),l=(0,m.append)(w,o.volumeClose),h=(0,m.append)(w,'<div class="art-volume-panel"></div>'),d=(0,m.append)(h,'<div class="art-volume-inner"></div>'),_=(0,m.append)(d,'<div class="art-volume-val"></div>'),S=(0,m.append)(d,'<div class="art-volume-slider"></div>'),x=(0,m.append)(S,'<div class="art-volume-handle"></div>'),E=(0,m.append)(x,'<div class="art-volume-loaded"></div>'),p=(0,m.append)(S,'<div class="art-volume-indicator"></div>');function L(O){let{top:A,height:P}=(0,m.getRect)(S);return 1-(O.clientY-A)/P}function j(){if(g.muted||g.volume===0)(0,m.setStyle)(c,"display","none"),(0,m.setStyle)(l,"display","flex"),(0,m.setStyle)(p,"top","100%"),(0,m.setStyle)(E,"top","100%"),_.innerText=0;else{let O=100*g.volume;(0,m.setStyle)(c,"display","flex"),(0,m.setStyle)(l,"display","none"),(0,m.setStyle)(p,"top",`${100-O}%`),(0,m.setStyle)(E,"top",`${100-O}%`),_.innerText=Math.floor(O)}}if(j(),g.on("video:volumechange",j),i(c,"click",()=>{g.muted=!0}),i(l,"click",()=>{g.muted=!1}),m.isMobile)(0,m.setStyle)(h,"display","none");else{let O=!1;i(S,"mousedown",A=>{O=A.button===0,g.volume=L(A)}),g.on("document:mousemove",A=>{O&&(g.muted=!1,g.volume=L(A))}),g.on("document:mouseup",()=>{O&&(O=!1)})}}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"03o9l":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,tooltip:g.i18n.get("Show Setting"),mounted:w=>{let{proxy:i,icons:o,i18n:c}=g;(0,m.append)(w,o.setting),i(w,"click",()=>{g.setting.toggle(),g.setting.resize()}),g.on("setting",l=>{(0,m.tooltip)(w,c.get(l?"Hide Setting":"Show Setting"))})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4KCF5":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,tooltip:g.i18n.get("Screenshot"),mounted:w=>{let{proxy:i,icons:o}=g;(0,m.append)(w,o.screenshot),i(w,"click",()=>{g.screenshot()})}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4IS2d":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>({...u,tooltip:g.i18n.get("AirPlay"),mounted:w=>{let{proxy:i,icons:o}=g;(0,m.append)(w,o.airplay),i(w,"click",()=>g.airplay())}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2KYsr":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("../utils"),y=b("../utils/component"),u=f.interopDefault(y),g=b("./playbackRate"),w=f.interopDefault(g),i=b("./aspectRatio"),o=f.interopDefault(i),c=b("./flip"),l=f.interopDefault(c),h=b("./info"),d=f.interopDefault(h),_=b("./version"),S=f.interopDefault(_),x=b("./close"),E=f.interopDefault(x);class p extends u.default{constructor(j){super(j),this.name="contextmenu",this.$parent=j.template.$contextmenu,m.isMobile||this.init()}init(){let{option:j,proxy:O,template:{$player:A,$contextmenu:P}}=this.art;j.playbackRate&&this.add((0,w.default)({name:"playbackRate",index:10})),j.aspectRatio&&this.add((0,o.default)({name:"aspectRatio",index:20})),j.flip&&this.add((0,l.default)({name:"flip",index:30})),this.add((0,d.default)({name:"info",index:40})),this.add((0,S.default)({name:"version",index:50})),this.add((0,E.default)({name:"close",index:60}));for(let F=0;F<j.contextmenu.length;F++)this.add(j.contextmenu[F]);O(A,"contextmenu",F=>{if(!this.art.constructor.CONTEXTMENU)return;F.preventDefault(),this.show=!0;let Y=F.clientX,R=F.clientY,{height:$,width:B,left:N,top:z}=(0,m.getRect)(A),{height:q,width:G}=(0,m.getRect)(P),se=Y-N,fe=R-z;Y+G>N+B&&(se=B-G),R+q>z+$&&(fe=$-q),(0,m.setStyles)(P,{top:`${fe}px`,left:`${se}px`})}),O(A,"click",F=>{(0,m.includeFromEvent)(F,P)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}v.default=p},{"../utils":"71aH7","../utils/component":"18nVI","./playbackRate":"69eLi","./aspectRatio":"lUefg","./flip":"kysiM","./info":"gqIgJ","./version":"kRU7C","./close":"jQ8Pm","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"69eLi":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>{let{i18n:w,constructor:{PLAYBACK_RATE:i}}=g,o=i.map(c=>`<span data-value="${c}">${c===1?w.get("Normal"):c.toFixed(1)}</span>`).join("");return{...u,html:`${w.get("Play Speed")}: ${o}`,click:(c,l)=>{let{value:h}=l.target.dataset;h&&(g.playbackRate=Number(h),c.show=!1)},mounted:c=>{let l=(0,m.query)('[data-value="1"]',c);l&&(0,m.inverseClass)(l,"art-current"),g.on("video:ratechange",()=>{let h=(0,m.queryAll)("span",c).find(d=>Number(d.dataset.value)===g.playbackRate);h&&(0,m.inverseClass)(h,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],lUefg:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>{let{i18n:w,constructor:{ASPECT_RATIO:i}}=g,o=i.map(c=>`<span data-value="${c}">${c==="default"?w.get("Default"):c}</span>`).join("");return{...u,html:`${w.get("Aspect Ratio")}: ${o}`,click:(c,l)=>{let{value:h}=l.target.dataset;h&&(g.aspectRatio=h,c.show=!1)},mounted:c=>{let l=(0,m.query)('[data-value="default"]',c);l&&(0,m.inverseClass)(l,"art-current"),g.on("aspectRatio",h=>{let d=(0,m.queryAll)("span",c).find(_=>_.dataset.value===h);d&&(0,m.inverseClass)(d,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kysiM:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return g=>{let{i18n:w,constructor:{FLIP:i}}=g,o=i.map(c=>`<span data-value="${c}">${w.get((0,m.capitalize)(c))}</span>`).join("");return{...u,html:`${w.get("Video Flip")}: ${o}`,click:(c,l)=>{let{value:h}=l.target.dataset;h&&(g.flip=h.toLowerCase(),c.show=!1)},mounted:c=>{let l=(0,m.query)('[data-value="normal"]',c);l&&(0,m.inverseClass)(l,"art-current"),g.on("flip",h=>{let d=(0,m.queryAll)("span",c).find(_=>_.dataset.value===h);d&&(0,m.inverseClass)(d,"art-current")})}}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],gqIgJ:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){return u=>({...y,html:u.i18n.get("Video Info"),click:g=>{u.info.show=!0,g.show=!1}})}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kRU7C:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){return{...y,html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 5.2.2</a>'}}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jQ8Pm:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){return u=>({...y,html:u.i18n.get("Close"),click:g=>{g.show=!1}})}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"02ajl":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./utils"),y=b("./utils/component"),u=f.interopDefault(y);class g extends u.default{constructor(i){super(i),this.name="info",m.isMobile||this.init()}init(){let{proxy:i,constructor:o,template:{$infoPanel:c,$infoClose:l,$video:h}}=this.art;i(l,"click",()=>{this.show=!1});let d=null,_=(0,m.queryAll)("[data-video]",c)||[];this.art.on("destroy",()=>clearTimeout(d)),function S(){for(let x=0;x<_.length;x++){let E=_[x],p=h[E.dataset.video],L=typeof p=="number"?p.toFixed(2):p;E.innerText!==L&&(E.innerText=L)}d=setTimeout(S,o.INFO_LOOP_TIME)}()}}v.default=g},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eSWto:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./utils"),y=b("./utils/component"),u=f.interopDefault(y),g=b("option-validator"),w=f.interopDefault(g),i=b("./scheme"),o=f.interopDefault(i);class c extends u.default{constructor(h){super(h),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(h.option.subtitle);let d=!1;h.on("video:timeupdate",()=>{if(!this.url)return;let _=this.art.template.$video.webkitDisplayingFullscreen;typeof _=="boolean"&&_!==d&&(d=_,this.createTrack(_?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(h){this.switch(h)}get textTrack(){var h,d;return(d=(h=this.art.template.$video)==null?void 0:h.textTracks)==null?void 0:d[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(h,d){let{$subtitle:_}=this.art.template;return typeof h=="object"?(0,m.setStyles)(_,h):(0,m.setStyle)(_,h,d)}update(){let{option:{subtitle:h},template:{$subtitle:d}}=this.art;d.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),d.innerHTML=this.activeCues.map((_,S)=>_.text.split(/\r?\n/).filter(x=>x.trim()).map(x=>`<div class="art-subtitle-line" data-group="${S}">${h.escape?(0,m.escape)(x):x}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(h,d={}){let{i18n:_,notice:S,option:x}=this.art,E={...x.subtitle,...d,url:h},p=await this.init(E);return d.name&&(S.show=`${_.get("Switch Subtitle")}: ${d.name}`),p}createTrack(h,d){let{template:_,proxy:S,option:x}=this.art,{$video:E,$track:p}=_,L=(0,m.createElement)("track");L.default=!0,L.kind=h,L.src=d,L.label=x.subtitle.name||"Artplayer",L.track.mode="hidden",L.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),p.onload=null,(0,m.remove)(p),(0,m.append)(E,L),_.$track=L,this.destroyEvent=S(this.textTrack,"cuechange",()=>this.update())}async init(h){let{notice:d,template:{$subtitle:_}}=this.art;return this.textTrack?((0,w.default)(h,o.default.subtitle),h.url?(this.option=h,this.style(h.style),fetch(h.url).then(S=>S.arrayBuffer()).then(S=>{let x=new TextDecoder(h.encoding).decode(S);switch(h.type||(0,m.getExt)(h.url)){case"srt":{let E=(0,m.srtToVtt)(x),p=h.onVttLoad(E);return(0,m.vttToBlob)(p)}case"ass":{let E=(0,m.assToVtt)(x),p=h.onVttLoad(E);return(0,m.vttToBlob)(p)}case"vtt":{let E=h.onVttLoad(x);return(0,m.vttToBlob)(E)}default:return h.url}}).then(S=>(_.innerHTML="",this.url===S||(URL.revokeObjectURL(this.url),this.createTrack("metadata",S)),S)).catch(S=>{throw _.innerHTML="",d.show=S,S})):void 0):null}}v.default=c},{"./utils":"71aH7","./utils/component":"18nVI","option-validator":"bAWi2","./scheme":"AKEiO","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],jo4S1:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./clickInit"),y=f.interopDefault(m),u=b("./hoverInit"),g=f.interopDefault(u),w=b("./moveInit"),i=f.interopDefault(w),o=b("./resizeInit"),c=f.interopDefault(o),l=b("./gestureInit"),h=f.interopDefault(l),d=b("./viewInit"),_=f.interopDefault(d),S=b("./documentInit"),x=f.interopDefault(S),E=b("./updateInit"),p=f.interopDefault(E),L=b("./restoreInit"),j=f.interopDefault(L);v.default=class{constructor(O){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,y.default)(O,this),(0,g.default)(O,this),(0,i.default)(O,this),(0,c.default)(O,this),(0,h.default)(O,this),(0,_.default)(O,this),(0,x.default)(O,this),(0,p.default)(O,this),(0,j.default)(O,this)}proxy(O,A,P,F={}){if(Array.isArray(A))return A.map(R=>this.proxy(O,R,P,F));O.addEventListener(A,P,F);let Y=()=>O.removeEventListener(A,P,F);return this.destroyEvents.push(Y),Y}hover(O,A,P){A&&this.proxy(O,"mouseenter",A),P&&this.proxy(O,"mouseleave",P)}remove(O){let A=this.destroyEvents.indexOf(O);A>-1&&(O(),this.destroyEvents.splice(A,1))}destroy(){for(let O=0;O<this.destroyEvents.length;O++)this.destroyEvents[O]()}}},{"./clickInit":"6UrCm","./hoverInit":"4jWHi","./moveInit":"eqaUm","./resizeInit":"eDXPO","./gestureInit":"95GtS","./viewInit":"InUBx","./documentInit":"hoLfM","./updateInit":"cl8m3","./restoreInit":"bK8As","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6UrCm":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u,g){let{constructor:w,template:{$player:i,$video:o}}=u;g.proxy(document,["click","contextmenu"],l=>{(0,m.includeFromEvent)(l,i)?(u.isInput=l.target.tagName==="INPUT",u.isFocus=!0,u.emit("focus",l)):(u.isInput=!1,u.isFocus=!1,u.emit("blur",l))});let c=[];g.proxy(o,"click",l=>{let h=Date.now();c.push(h);let{MOBILE_CLICK_PLAY:d,DBCLICK_TIME:_,MOBILE_DBCLICK_PLAY:S,DBCLICK_FULLSCREEN:x}=w,E=c.filter(p=>h-p<=_);switch(E.length){case 1:u.emit("click",l),m.isMobile?!u.isLock&&d&&u.toggle():u.toggle(),c=E;break;case 2:u.emit("dblclick",l),m.isMobile?!u.isLock&&S&&u.toggle():x&&(u.fullscreen=!u.fullscreen),c=[];break;default:c=[]}})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4jWHi":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u,g){let{$player:w}=u.template;g.hover(w,i=>{(0,m.addClass)(w,"art-hover"),u.emit("hover",!0,i)},i=>{(0,m.removeClass)(w,"art-hover"),u.emit("hover",!1,i)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eqaUm:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y,u){let{$player:g}=y.template;u.proxy(g,"mousemove",w=>{y.emit("mousemove",w)})}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],eDXPO:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u,g){let{option:w,constructor:i}=u;u.on("resize",()=>{let{aspectRatio:c,notice:l}=u;u.state==="standard"&&w.autoSize&&u.autoSize(),u.aspectRatio=c,l.show=""});let o=(0,m.debounce)(()=>u.emit("resize"),i.RESIZE_TIME);g.proxy(window,["orientationchange","resize"],()=>o()),screen&&screen.orientation&&screen.orientation.onchange&&g.proxy(screen.orientation,"change",()=>o())}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"95GtS":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>u);var m=b("../utils"),y=b("../control/progress");function u(g,w){if(m.isMobile&&!g.option.isLive){let{$video:i,$progress:o}=g.template,c=null,l=!1,h=0,d=0,_=0,S=E=>{if(E.touches.length===1&&!g.isLock){c===o&&(0,y.setCurrentTime)(g,E),l=!0;let{pageX:p,pageY:L}=E.touches[0];h=p,d=L,_=g.currentTime}},x=E=>{if(E.touches.length===1&&l&&g.duration){let{pageX:p,pageY:L}=E.touches[0],j=function(P,F,Y,R){var $=F-R,B=Y-P,N=0;if(2>Math.abs(B)&&2>Math.abs($))return N;var z=180*Math.atan2($,B)/Math.PI;return z>=-45&&z<45?N=4:z>=45&&z<135?N=1:z>=-135&&z<-45?N=2:(z>=135&&z<=180||z>=-180&&z<-135)&&(N=3),N}(h,d,p,L),O=[3,4].includes(j),A=[1,2].includes(j);if(O&&!g.isRotate||A&&g.isRotate){let P=(0,m.clamp)((p-h)/g.width,-1,1),F=(0,m.clamp)((L-d)/g.height,-1,1),Y=g.isRotate?F:P,R=c===i?g.constructor.TOUCH_MOVE_RATIO:1,$=(0,m.clamp)(_+g.duration*Y*R,0,g.duration);g.seek=$,g.emit("setBar","played",(0,m.clamp)($/g.duration,0,1),E),g.notice.show=`${(0,m.secondToTime)($)} / ${(0,m.secondToTime)(g.duration)}`}}};w.proxy(o,"touchstart",E=>{c=o,S(E)}),w.proxy(i,"touchstart",E=>{c=i,S(E)}),w.proxy(i,"touchmove",x),w.proxy(o,"touchmove",x),w.proxy(document,"touchend",()=>{l&&(h=0,d=0,_=0,l=!1,c=null)})}}},{"../utils":"71aH7","../control/progress":"bgoVP","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],InUBx:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u,g){let{option:w,constructor:i,template:{$container:o}}=u,c=(0,m.throttle)(()=>{u.emit("view",(0,m.isInViewport)(o,i.SCROLL_GAP))},i.SCROLL_TIME);g.proxy(window,"scroll",()=>c()),u.on("view",l=>{w.autoMini&&(u.mini=!l)})}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hoLfM:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y,u){u.proxy(document,"mousemove",g=>{y.emit("document:mousemove",g)}),u.proxy(document,"mouseup",g=>{y.emit("document:mouseup",g)})}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cl8m3:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){if(y.constructor.USE_RAF){let u=null;(function g(){y.playing&&y.emit("raf"),y.isDestroy||(u=requestAnimationFrame(g))})(),y.on("destroy",()=>{cancelAnimationFrame(u)})}}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],bK8As:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y,u){}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6NoFy":[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v);var f=b("./utils");v.default=class{constructor(m){this.art=m,this.keys={},m.option.hotkey&&!f.isMobile&&this.init()}init(){let{proxy:m,constructor:y}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=y.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=y.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=y.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=y.VOLUME_STEP}),m(document,"keydown",u=>{if(this.art.isFocus){let g=document.activeElement.tagName.toUpperCase(),w=document.activeElement.getAttribute("contenteditable");if(g!=="INPUT"&&g!=="TEXTAREA"&&w!==""&&w!=="true"&&!u.altKey&&!u.ctrlKey&&!u.metaKey&&!u.shiftKey){let i=this.keys[u.code];if(i){u.preventDefault();for(let o=0;o<i.length;o++)i[o].call(this.art,u);this.art.emit("hotkey",u)}}}this.art.emit("keydown",u)})}add(m,y){return this.keys[m]?this.keys[m].push(y):this.keys[m]=[y],this}remove(m,y){if(this.keys[m]){let u=this.keys[m].indexOf(y);u!==-1&&this.keys[m].splice(u,1)}return this}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6G6hZ":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./utils/component"),y=f.interopDefault(m);class u extends y.default{constructor(w){super(w);let{option:i,template:{$layer:o}}=w;this.name="layer",this.$parent=o;for(let c=0;c<i.layers.length;c++)this.add(i.layers[c])}}v.default=u},{"./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"3dsEe":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./utils"),y=b("./utils/component"),u=f.interopDefault(y);class g extends u.default{constructor(i){super(i),this.name="loading",(0,m.append)(i.template.$loading,i.icons.loading)}}v.default=g},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],dWGTw:[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v);var f=b("./utils");v.default=class{constructor(m){this.art=m,this.timer=null}set show(m){let{constructor:y,template:{$player:u,$noticeInner:g}}=this.art;m?(g.innerText=m instanceof Error?m.message.trim():m,(0,f.addClass)(u,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{g.innerText="",(0,f.removeClass)(u,"art-notice-show")},y.NOTICE_TIME)):(0,f.removeClass)(u,"art-notice-show")}}},{"./utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"5POkG":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./utils"),y=b("./utils/component"),u=f.interopDefault(y);class g extends u.default{constructor(i){super(i),this.name="mask";let{template:o,icons:c,events:l}=i,h=(0,m.append)(o.$state,c.state),d=(0,m.append)(o.$state,c.error);(0,m.setStyle)(d,"display","none"),i.on("destroy",()=>{(0,m.setStyle)(h,"display","none"),(0,m.setStyle)(d,"display",null)}),l.proxy(o.$state,"click",()=>i.play())}}v.default=g},{"./utils":"71aH7","./utils/component":"18nVI","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"6OeNg":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("../utils"),y=b("bundle-text:./loading.svg"),u=f.interopDefault(y),g=b("bundle-text:./state.svg"),w=f.interopDefault(g),i=b("bundle-text:./check.svg"),o=f.interopDefault(i),c=b("bundle-text:./play.svg"),l=f.interopDefault(c),h=b("bundle-text:./pause.svg"),d=f.interopDefault(h),_=b("bundle-text:./volume.svg"),S=f.interopDefault(_),x=b("bundle-text:./volume-close.svg"),E=f.interopDefault(x),p=b("bundle-text:./screenshot.svg"),L=f.interopDefault(p),j=b("bundle-text:./setting.svg"),O=f.interopDefault(j),A=b("bundle-text:./arrow-left.svg"),P=f.interopDefault(A),F=b("bundle-text:./arrow-right.svg"),Y=f.interopDefault(F),R=b("bundle-text:./playback-rate.svg"),$=f.interopDefault(R),B=b("bundle-text:./aspect-ratio.svg"),N=f.interopDefault(B),z=b("bundle-text:./config.svg"),q=f.interopDefault(z),G=b("bundle-text:./pip.svg"),se=f.interopDefault(G),fe=b("bundle-text:./lock.svg"),I=f.interopDefault(fe),ke=b("bundle-text:./unlock.svg"),Ee=f.interopDefault(ke),Oe=b("bundle-text:./fullscreen-off.svg"),Ie=f.interopDefault(Oe),Z=b("bundle-text:./fullscreen-on.svg"),ge=f.interopDefault(Z),re=b("bundle-text:./fullscreen-web-off.svg"),K=f.interopDefault(re),Se=b("bundle-text:./fullscreen-web-on.svg"),oe=f.interopDefault(Se),Ae=b("bundle-text:./switch-on.svg"),ve=f.interopDefault(Ae),Re=b("bundle-text:./switch-off.svg"),pe=f.interopDefault(Re),le=b("bundle-text:./flip.svg"),ze=f.interopDefault(le),Ne=b("bundle-text:./error.svg"),Je=f.interopDefault(Ne),ot=b("bundle-text:./close.svg"),Qe=f.interopDefault(ot),et=b("bundle-text:./airplay.svg"),tt=f.interopDefault(et);v.default=class{constructor(Ce){let vt={loading:u.default,state:w.default,play:l.default,pause:d.default,check:o.default,volume:S.default,volumeClose:E.default,screenshot:L.default,setting:O.default,pip:se.default,arrowLeft:P.default,arrowRight:Y.default,playbackRate:$.default,aspectRatio:N.default,config:q.default,lock:I.default,flip:ze.default,unlock:Ee.default,fullscreenOff:Ie.default,fullscreenOn:ge.default,fullscreenWebOff:K.default,fullscreenWebOn:oe.default,switchOn:ve.default,switchOff:pe.default,error:Je.default,close:Qe.default,airplay:tt.default,...Ce.option.icons};for(let mt in vt)(0,m.def)(this,mt,{get:()=>(0,m.getIcon)(mt,vt[mt])})}}},{"../utils":"71aH7","bundle-text:./loading.svg":"7tDub","bundle-text:./state.svg":"1ElZc","bundle-text:./check.svg":"lmgoP","bundle-text:./play.svg":"lVWoQ","bundle-text:./pause.svg":"5Mnax","bundle-text:./volume.svg":"w3eIa","bundle-text:./volume-close.svg":"rHjo1","bundle-text:./screenshot.svg":"2KcqM","bundle-text:./setting.svg":"8rQMV","bundle-text:./arrow-left.svg":"kqGBE","bundle-text:./arrow-right.svg":"aFjpC","bundle-text:./playback-rate.svg":"lx7ZM","bundle-text:./aspect-ratio.svg":"2sEjf","bundle-text:./config.svg":"fQTgE","bundle-text:./pip.svg":"2CaxO","bundle-text:./lock.svg":"aCGnW","bundle-text:./unlock.svg":"bTrAV","bundle-text:./fullscreen-off.svg":"bA3p0","bundle-text:./fullscreen-on.svg":"fTuY8","bundle-text:./fullscreen-web-off.svg":"tvKf4","bundle-text:./fullscreen-web-on.svg":"1F1oB","bundle-text:./switch-on.svg":"7qNHs","bundle-text:./switch-off.svg":"28aV8","bundle-text:./flip.svg":"1uXI6","bundle-text:./error.svg":"9f4dh","bundle-text:./close.svg":"4nTtS","bundle-text:./airplay.svg":"cDPXC","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"7tDub":[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><path fill="none" class="bk" d="M0 0h100v100H0z"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(30 105.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(60 75.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(90 65 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(120 58.66 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(150 54.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(180 50 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-150 45.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-120 41.34 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-90 35 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#fff" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>'},{}],"1ElZc":[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path fill="#fff" d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875ZM12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12q0-2.075.788-3.9t2.137-3.175q1.35-1.35 3.175-2.137T12 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22Z"/></svg>'},{}],lmgoP:[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"/></svg>'},{}],lVWoQ:[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"/></svg>'},{}],"5Mnax":[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zm8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"/></svg>'},{}],w3eIa:[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zm4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"/><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"/></svg>'},{}],rHjo1:[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"/><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zm5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"/></svg>'},{}],"2KcqM":[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10Zm0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8Z"/></svg>'},{}],"8rQMV":[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'},{}],kqGBE:[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6z" fill="#fff"/></svg>'},{}],aFjpC:[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" viewBox="0 0 32 32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6z" fill="#fff"/></svg>'},{}],lx7ZM:[function(b,H,v){H.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M10 8v8l6-4-6-4zM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2zM5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8zm0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4l.8-.7zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22l.1-1zM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2sEjf":[function(b,H,v){H.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width:100%;height:100%;transform:translate(0,0)"><defs><clipPath id="a"><path d="M0 0h88v88H0z"/></clipPath></defs><g style="display:block" clip-path="url('#a')"><path fill="#FFF" d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 0l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31c-.78-.79-2.04-.79-2.83 0zm-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13-2.83-2.82zM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8h56z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></svg>`},{}],fQTgE:[function(b,H,v){H.exports='<svg height="24" viewBox="0 0 24 24" width="24"><path d="M15 17h6v1h-6v-1zm-4 0H3v1h8v2h1v-5h-1v2zm3-9h1V3h-1v2H3v1h11v2zm4-3v1h3V5h-3zM6 14h1V9H6v2H3v1h3v2zm4-2h11v-1H10v1z" fill="#fff" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"2CaxO":[function(b,H,v){H.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25 17h-8v6h8v-6Zm4 8V10.98C29 9.88 28.1 9 27 9H9c-1.1 0-2 .88-2 1.98V25c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2Zm-2 .02H9V10.97h18v14.05Z"/></svg>'},{}],aCGnW:[function(b,H,v){H.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M298.667 426.667v-85.334a213.333 213.333 0 1 1 426.666 0v85.334H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667zM512 213.333a128 128 0 0 0-128 128v85.334h256v-85.334a128 128 0 0 0-128-128z" fill="#fff"/></svg>'},{}],bTrAV:[function(b,H,v){H.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.334a213.333 213.333 0 0 1 368.085-146.816z" fill="#fff"/></svg>'},{}],bA3p0:[function(b,H,v){H.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M768 298.667h170.667V384h-256V128H768v170.667zM341.333 384h-256v-85.333H256V128h85.333v256zM768 725.333V896h-85.333V640h256v85.333H768zM341.333 640v256H256V725.333H85.333V640h256z"/></svg>'},{}],fTuY8:[function(b,H,v){H.exports='<svg class="icon" width="22" height="22" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M625.778 256H768v142.222h113.778v-256h-256V256zM256 398.222V256h142.222V142.222h-256v256H256zm512 227.556V768H625.778v113.778h256v-256H768zM398.222 768H256V625.778H142.222v256h256V768z"/></svg>'},{}],tvKf4:[function(b,H,v){H.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384H896zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448H256z"/></svg>'},{}],"1F1oB":[function(b,H,v){H.exports='<svg class="icon" width="18" height="18" viewBox="0 0 1152 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0zM1024 128v768H128V128h896zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448H448zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384H704z"/></svg>'},{}],"7qNHs":[function(b,H,v){H.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1664 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#648FFC" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024zm0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448z"/></svg>'},{}],"28aV8":[function(b,H,v){H.exports='<svg class="icon" width="26" height="26" viewBox="0 0 1740 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898zm-.564-975.36A464.589 464.589 0 1 1 48.026 513.024 463.872 463.872 0 0 1 511.334 48.435v.205z"/></svg>'},{}],"1uXI6":[function(b,H,v){H.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M554.667 810.667V896h-85.334v-85.333h85.334zm-384-632.662a42.667 42.667 0 0 1 34.986 18.219l203.904 291.328a42.667 42.667 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667zm682.666 0a42.667 42.667 0 0 1 42.368 37.718l.299 4.949v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.667 42.667 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.667 42.667 0 0 1 34.944-18.219zM554.667 640v85.333h-85.334V640h85.334zm-358.4-320.896V716.8L335.957 512 196.31 319.104zm358.4 150.23v85.333h-85.334v-85.334h85.334zm0-170.667V384h-85.334v-85.333h85.334zm0-170.667v85.333h-85.334V128h85.334z" fill="#fff"/></svg>'},{}],"9f4dh":[function(b,H,v){H.exports='<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.082 93.082 0 0 1 34.448 33.341zM512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88zm0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2z"/></svg>'},{}],"4nTtS":[function(b,H,v){H.exports='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733-17.066-17.067-42.666-17.067-59.733 0L512 452.267l-268.8-268.8c-17.067-17.067-42.667-17.067-59.733 0-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733L571.733 512z"/></svg>'},{}],cDPXC:[function(b,H,v){H.exports='<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/><path d="M4 17h10l-5-6z"/></g></svg>'},{}],"3eYNH":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./flip"),y=f.interopDefault(m),u=b("./aspectRatio"),g=f.interopDefault(u),w=b("./playbackRate"),i=f.interopDefault(w),o=b("./subtitleOffset"),c=f.interopDefault(o),l=b("../utils/component"),h=f.interopDefault(l),d=b("../utils");class _ extends h.default{constructor(x){super(x);let{option:E,controls:p,template:{$setting:L}}=x;this.name="setting",this.$parent=L,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...E.settings],E.setting&&(this.format(),this.render(),x.on("blur",()=>{this.show&&(this.show=!1,this.render())}),x.on("focus",j=>{let O=(0,d.includeFromEvent)(j,p.setting),A=(0,d.includeFromEvent)(j,this.$parent);!this.show||O||A||(this.show=!1,this.render())}),x.on("resize",()=>this.resize()))}get builtin(){let x=[],{option:E}=this.art;return E.playbackRate&&x.push((0,i.default)(this.art)),E.aspectRatio&&x.push((0,g.default)(this.art)),E.flip&&x.push((0,y.default)(this.art)),E.subtitleOffset&&x.push((0,c.default)(this.art)),x}traverse(x,E=this.option){var p;for(let L=0;L<E.length;L++){let j=E[L];x(j),(p=j.selector)!=null&&p.length&&this.traverse.call(this,x,j.selector)}}check(x){x.$parent.tooltip=x.html,this.traverse(E=>{E.default=E===x,E.default&&E.$item&&(0,d.inverseClass)(E.$item,"art-current")},x.$option),this.render(x.$parents)}format(x=this.option,E,p,L=[]){for(let j=0;j<x.length;j++){let O=x[j];if(O!=null&&O.name?((0,d.errorHandle)(!L.includes(O.name),`The [${O.name}] is already exist in [setting]`),L.push(O.name)):O.name=`setting-${this.id++}`,!O.$formatted){(0,d.def)(O,"$parent",{get:()=>E}),(0,d.def)(O,"$parents",{get:()=>p}),(0,d.def)(O,"$option",{get:()=>x});let A=[];(0,d.def)(O,"$events",{get:()=>A}),(0,d.def)(O,"$formatted",{get:()=>!0})}this.format(O.selector||[],O,x,L)}this.option=x}find(x=""){let E=null;return this.traverse(p=>{p.name===x&&(E=p)}),E}resize(){var O,A;let{controls:x,constructor:{SETTING_WIDTH:E,SETTING_ITEM_HEIGHT:p},template:{$player:L,$setting:j}}=this.art;if(x.setting&&this.show){let P=((A=(O=this.active[0])==null?void 0:O.$parent)==null?void 0:A.width)||E,{left:F,width:Y}=(0,d.getRect)(x.setting),{left:R,width:$}=(0,d.getRect)(L),B=F-R+Y/2-P/2,N=this.active===this.option?this.active.length*p:(this.active.length+1)*p;if((0,d.setStyle)(j,"height",`${N}px`),(0,d.setStyle)(j,"width",`${P}px`),this.art.isRotate||d.isMobile)return;B+P>$?((0,d.setStyle)(j,"left",null),(0,d.setStyle)(j,"right",null)):((0,d.setStyle)(j,"left",`${B}px`),(0,d.setStyle)(j,"right","auto"))}}inactivate(x){for(let E=0;E<x.$events.length;E++)this.art.events.remove(x.$events[E]);x.$events.length=0}remove(x){let E=this.find(x);(0,d.errorHandle)(E,`Can't find [${x}] in the [setting]`);let p=E.$option.indexOf(E);E.$option.splice(p,1),this.inactivate(E),E.$item&&(0,d.remove)(E.$item),this.render()}update(x){let E=this.find(x.name);return E?(this.inactivate(E),Object.assign(E,x),this.format(),this.creatItem(E,!0),this.render(),E):this.add(x)}add(x,E=this.option){return E.push(x),this.format(),this.creatItem(x),this.render(),x}creatHeader(x){if(!this.cache.has(x.$option))return;let E=this.cache.get(x.$option),{proxy:p,icons:{arrowLeft:L},constructor:{SETTING_ITEM_HEIGHT:j}}=this.art,O=(0,d.createElement)("div");(0,d.setStyle)(O,"height",`${j}px`),(0,d.addClass)(O,"art-setting-item"),(0,d.addClass)(O,"art-setting-item-back");let A=(0,d.append)(O,'<div class="art-setting-item-left"></div>'),P=(0,d.createElement)("div");(0,d.addClass)(P,"art-setting-item-left-icon"),(0,d.append)(P,L),(0,d.append)(A,P),(0,d.append)(A,x.$parent.html);let F=p(O,"click",()=>this.render(x.$parents));x.$parent.$events.push(F),(0,d.append)(E,O)}creatItem(x,E=!1){var z,q;if(!this.cache.has(x.$option))return;let p=this.cache.get(x.$option),L=x.$item,j="selector";(0,d.has)(x,"switch")&&(j="switch"),(0,d.has)(x,"range")&&(j="range");let{icons:O,proxy:A,constructor:P}=this.art,F=(0,d.createElement)("div");(0,d.addClass)(F,"art-setting-item"),(0,d.setStyle)(F,"height",`${P.SETTING_ITEM_HEIGHT}px`),F.dataset.name=x.name||"",F.dataset.value=x.value||"";let Y=(0,d.append)(F,'<div class="art-setting-item-left"></div>'),R=(0,d.append)(F,'<div class="art-setting-item-right"></div>'),$=(0,d.createElement)("div");switch((0,d.addClass)($,"art-setting-item-left-icon"),j){case"switch":case"range":(0,d.append)($,x.icon||O.config);break;case"selector":(z=x.selector)!=null&&z.length?(0,d.append)($,x.icon||O.config):(0,d.append)($,O.check)}(0,d.append)(Y,$),(0,d.def)(x,"$icon",{configurable:!0,get:()=>$}),(0,d.def)(x,"icon",{configurable:!0,get:()=>$.innerHTML,set(G){$.innerHTML="",(0,d.append)($,G)}});let B=(0,d.createElement)("div");(0,d.addClass)(B,"art-setting-item-left-text"),(0,d.append)(B,x.html||""),(0,d.append)(Y,B),(0,d.def)(x,"$html",{configurable:!0,get:()=>B}),(0,d.def)(x,"html",{configurable:!0,get:()=>B.innerHTML,set(G){B.innerHTML="",(0,d.append)(B,G)}});let N=(0,d.createElement)("div");switch((0,d.addClass)(N,"art-setting-item-right-tooltip"),(0,d.append)(N,x.tooltip||""),(0,d.append)(R,N),(0,d.def)(x,"$tooltip",{configurable:!0,get:()=>N}),(0,d.def)(x,"tooltip",{configurable:!0,get:()=>N.innerHTML,set(G){N.innerHTML="",(0,d.append)(N,G)}}),j){case"switch":{let G=(0,d.createElement)("div");(0,d.addClass)(G,"art-setting-item-right-icon");let se=(0,d.append)(G,O.switchOn),fe=(0,d.append)(G,O.switchOff);(0,d.setStyle)(x.switch?fe:se,"display","none"),(0,d.append)(R,G),(0,d.def)(x,"$switch",{configurable:!0,get:()=>G});let I=x.switch;(0,d.def)(x,"switch",{configurable:!0,get:()=>I,set(ke){I=ke,ke?((0,d.setStyle)(fe,"display","none"),(0,d.setStyle)(se,"display",null)):((0,d.setStyle)(fe,"display",null),(0,d.setStyle)(se,"display","none"))}});break}case"range":{let G=(0,d.createElement)("div");(0,d.addClass)(G,"art-setting-item-right-icon");let se=(0,d.append)(G,'<input type="range">');se.value=x.range[0],se.min=x.range[1],se.max=x.range[2],se.step=x.range[3],(0,d.addClass)(se,"art-setting-range"),(0,d.append)(R,G),(0,d.def)(x,"$range",{configurable:!0,get:()=>se});let fe=[...x.range];(0,d.def)(x,"range",{configurable:!0,get:()=>fe,set(I){fe=[...I],se.value=I[0],se.min=I[1],se.max=I[2],se.step=I[3]}})}break;case"selector":if((q=x.selector)!=null&&q.length){let G=(0,d.createElement)("div");(0,d.addClass)(G,"art-setting-item-right-icon"),(0,d.append)(G,O.arrowRight),(0,d.append)(R,G)}}switch(j){case"switch":if(x.onSwitch){let G=A(F,"click",async se=>{x.switch=await x.onSwitch.call(this.art,x,F,se)});x.$events.push(G)}break;case"range":if(x.$range){if(x.onRange){let G=A(x.$range,"change",async se=>{x.range[0]=x.$range.valueAsNumber,x.tooltip=await x.onRange.call(this.art,x,F,se)});x.$events.push(G)}if(x.onChange){let G=A(x.$range,"input",async se=>{x.range[0]=x.$range.valueAsNumber,x.tooltip=await x.onChange.call(this.art,x,F,se)});x.$events.push(G)}}break;case"selector":{let G=A(F,"click",async se=>{var fe;(fe=x.selector)!=null&&fe.length?this.render(x.selector):(this.check(x),x.$parent.onSelect&&(x.$parent.tooltip=await x.$parent.onSelect.call(this.art,x,F,se)))});x.$events.push(G),x.default&&(0,d.addClass)(F,"art-current")}}(0,d.def)(x,"$item",{configurable:!0,get:()=>F}),E?(0,d.replaceElement)(F,L):(0,d.append)(p,F),x.mounted&&setTimeout(()=>x.mounted.call(this.art,x.$item,x),0)}render(x=this.option){var E;if(this.active=x,this.cache.has(x)){let p=this.cache.get(x);(0,d.inverseClass)(p,"art-current")}else{let p=(0,d.createElement)("div");this.cache.set(x,p),(0,d.addClass)(p,"art-setting-panel"),(0,d.append)(this.$parent,p),(0,d.inverseClass)(p,"art-current"),(E=x[0])!=null&&E.$parent&&this.creatHeader(x[0]);for(let L=0;L<x.length;L++)this.creatItem(x[L])}this.resize()}}v.default=_},{"./flip":"kONUB","./aspectRatio":"84NBV","./playbackRate":"aetWt","./subtitleOffset":"fIBkO","../utils/component":"18nVI","../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],kONUB:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{i18n:g,icons:w,constructor:{SETTING_ITEM_WIDTH:i,FLIP:o}}=u;function c(h){return g.get((0,m.capitalize)(h))}function l(){let h=u.setting.find(`flip-${u.flip}`);u.setting.check(h)}return{width:i,name:"flip",html:g.get("Video Flip"),tooltip:c(u.flip),icon:w.flip,selector:o.map(h=>({value:h,name:`flip-${h}`,default:h===u.flip,html:c(h)})),onSelect:h=>(u.flip=h.value,h.html),mounted:()=>{l(),u.on("flip",()=>l())}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"84NBV":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){let{i18n:u,icons:g,constructor:{SETTING_ITEM_WIDTH:w,ASPECT_RATIO:i}}=y;function o(l){return l==="default"?u.get("Default"):l}function c(){let l=y.setting.find(`aspect-ratio-${y.aspectRatio}`);y.setting.check(l)}return{width:w,name:"aspect-ratio",html:u.get("Aspect Ratio"),icon:g.aspectRatio,tooltip:o(y.aspectRatio),selector:i.map(l=>({value:l,name:`aspect-ratio-${l}`,default:l===y.aspectRatio,html:o(l)})),onSelect:l=>(y.aspectRatio=l.value,l.html),mounted:()=>{c(),y.on("aspectRatio",()=>c())}}}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],aetWt:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){let{i18n:u,icons:g,constructor:{SETTING_ITEM_WIDTH:w,PLAYBACK_RATE:i}}=y;function o(l){return l===1?u.get("Normal"):l.toFixed(1)}function c(){let l=y.setting.find(`playback-rate-${y.playbackRate}`);y.setting.check(l)}return{width:w,name:"playback-rate",html:u.get("Play Speed"),tooltip:o(y.playbackRate),icon:g.playbackRate,selector:i.map(l=>({value:l,name:`playback-rate-${l}`,default:l===y.playbackRate,html:o(l)})),onSelect:l=>(y.playbackRate=l.value,l.html),mounted:()=>{c(),y.on("video:ratechange",()=>c())}}}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fIBkO:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(y){let{i18n:u,icons:g,constructor:w}=y;return{width:w.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:u.get("Subtitle Offset"),icon:g.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:i=>(y.subtitleOffset=i.range[0],i.range[0]+"s"),mounted:(i,o)=>{y.on("subtitleOffset",c=>{o.$range.value=c,o.tooltip=c+"s"})}}}f.defineInteropFlag(v),f.export(v,"default",()=>m)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"2aaJe":[function(b,H,v){b("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(v),v.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(f){try{let m=JSON.parse(window.localStorage.getItem(this.name))||{};return f?m[f]:m}catch{return f?this.settings[f]:this.settings}}set(f,m){try{let y=Object.assign({},this.get(),{[f]:m});window.localStorage.setItem(this.name,JSON.stringify(y))}catch{this.settings[f]=m}}del(f){try{let m=this.get();delete m[f],window.localStorage.setItem(this.name,JSON.stringify(m))}catch{delete this.settings[f]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"8MTUM":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("../utils"),y=b("./miniProgressBar"),u=f.interopDefault(y),g=b("./autoOrientation"),w=f.interopDefault(g),i=b("./autoPlayback"),o=f.interopDefault(i),c=b("./fastForward"),l=f.interopDefault(c),h=b("./lock"),d=f.interopDefault(h);v.default=class{constructor(_){this.art=_,this.id=0;let{option:S}=_;S.miniProgressBar&&!S.isLive&&this.add(u.default),S.lock&&m.isMobile&&this.add(d.default),S.autoPlayback&&!S.isLive&&this.add(o.default),S.autoOrientation&&m.isMobile&&this.add(w.default),S.fastForward&&m.isMobile&&!S.isLive&&this.add(l.default);for(let x=0;x<S.plugins.length;x++)this.add(S.plugins[x])}add(_){this.id+=1;let S=_.call(this.art,this.art);return S instanceof Promise?S.then(x=>this.next(_,x)):this.next(_,S)}next(_,S){let x=S&&S.name||_.name||`plugin${this.id}`;return(0,m.errorHandle)(!(0,m.has)(this,x),`Cannot add a plugin that already has the same name: ${x}`),(0,m.def)(this,x,{value:S}),this}}},{"../utils":"71aH7","./miniProgressBar":"87pSL","./autoOrientation":"ePEg5","./autoPlayback":"cVO99","./fastForward":"hFDwt","./lock":"1hsTH","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"87pSL":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){return u.on("control",g=>{g?(0,m.removeClass)(u.template.$player,"art-mini-progress-bar"):(0,m.addClass)(u.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],ePEg5:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{constructor:g,template:{$player:w,$video:i}}=u;return u.on("fullscreenWeb",o=>{if(o){let{videoWidth:c,videoHeight:l}=i,{clientWidth:h,clientHeight:d}=document.documentElement;(c>l&&h<d||c<l&&h>d)&&setTimeout(()=>{(0,m.setStyle)(w,"width",`${d}px`),(0,m.setStyle)(w,"height",`${h}px`),(0,m.setStyle)(w,"transform-origin","0 0"),(0,m.setStyle)(w,"transform",`rotate(90deg) translate(0, -${h}px)`),(0,m.addClass)(w,"art-auto-orientation"),u.isRotate=!0,u.emit("resize")},g.AUTO_ORIENTATION_TIME)}else(0,m.hasClass)(w,"art-auto-orientation")&&((0,m.removeClass)(w,"art-auto-orientation"),u.isRotate=!1,u.emit("resize"))}),u.on("fullscreen",async o=>{var l;if(!((l=screen==null?void 0:screen.orientation)!=null&&l.lock))return;let c=screen.orientation.type;if(o){let{videoWidth:h,videoHeight:d}=i,{clientWidth:_,clientHeight:S}=document.documentElement;if(h>d&&_<S||h<d&&_>S){let x=c.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(x),(0,m.addClass)(w,"art-auto-orientation-fullscreen")}}else(0,m.hasClass)(w,"art-auto-orientation-fullscreen")&&(await screen.orientation.lock(c),(0,m.removeClass)(w,"art-auto-orientation-fullscreen"))}),{name:"autoOrientation",get state(){return(0,m.hasClass)(w,"art-auto-orientation")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],cVO99:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{i18n:g,icons:w,storage:i,constructor:o,proxy:c,template:{$poster:l}}=u,h=u.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),d=(0,m.query)(".art-auto-playback-last",h),_=(0,m.query)(".art-auto-playback-jump",h),S=(0,m.query)(".art-auto-playback-close",h);(0,m.append)(S,w.close);let x=null;function E(){let p=(i.get("times")||{})[u.option.id||u.option.url];clearTimeout(x),(0,m.setStyle)(h,"display","none"),p&&p>=o.AUTO_PLAYBACK_MIN&&((0,m.setStyle)(h,"display","flex"),d.innerText=`${g.get("Last Seen")} ${(0,m.secondToTime)(p)}`,_.innerText=g.get("Jump Play"),c(S,"click",()=>{(0,m.setStyle)(h,"display","none")}),c(_,"click",()=>{u.seek=p,u.play(),(0,m.setStyle)(l,"display","none"),(0,m.setStyle)(h,"display","none")}),u.once("video:timeupdate",()=>{x=setTimeout(()=>{(0,m.setStyle)(h,"display","none")},o.AUTO_PLAYBACK_TIMEOUT)}))}return u.on("video:timeupdate",()=>{if(u.playing){let p=i.get("times")||{},L=Object.keys(p);L.length>o.AUTO_PLAYBACK_MAX&&delete p[L[0]],p[u.option.id||u.option.url]=u.currentTime,i.set("times",p)}}),u.on("ready",E),u.on("restart",E),{name:"auto-playback",get times(){return i.get("times")||{}},clear:()=>i.del("times"),delete(p){let L=i.get("times")||{};return delete L[p],i.set("times",L),L}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hFDwt:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{constructor:g,proxy:w,template:{$player:i,$video:o}}=u,c=null,l=!1,h=1,d=()=>{clearTimeout(c),l&&(l=!1,u.playbackRate=h,(0,m.removeClass)(i,"art-fast-forward"))};return w(o,"touchstart",_=>{_.touches.length===1&&u.playing&&!u.isLock&&(c=setTimeout(()=>{l=!0,h=u.playbackRate,u.playbackRate=g.FAST_FORWARD_VALUE,(0,m.addClass)(i,"art-fast-forward")},g.FAST_FORWARD_TIME))}),w(document,"touchmove",d),w(document,"touchend",d),{name:"fastForward",get state(){return(0,m.hasClass)(i,"art-fast-forward")}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"1hsTH":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>y);var m=b("../utils");function y(u){let{layers:g,icons:w,template:{$player:i}}=u;function o(){return(0,m.hasClass)(i,"art-lock")}function c(){(0,m.addClass)(i,"art-lock"),u.isLock=!0,u.emit("lock",!0)}function l(){(0,m.removeClass)(i,"art-lock"),u.isLock=!1,u.emit("lock",!1)}return g.add({name:"lock",mounted(h){let d=(0,m.append)(h,w.lock),_=(0,m.append)(h,w.unlock);(0,m.setStyle)(d,"display","none"),u.on("lock",S=>{S?((0,m.setStyle)(d,"display","inline-flex"),(0,m.setStyle)(_,"display","none")):((0,m.setStyle)(d,"display","none"),(0,m.setStyle)(_,"display","inline-flex"))})},click(){o()?l():c()}}),{name:"lock",get state(){return o()},set state(h){h?c():l()}}}},{"../utils":"71aH7","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["5lTcX"],"5lTcX","parcelRequire4dc0")}(Rt,Rt.exports)),Rt.exports}var Wa=qa();const Ka=Sn(Wa);var Nt={exports:{}};Nt.exports;var ur;function Za(){return ur||(ur=1,function(ne,X){/*!
 * artplayer-plugin-danmuku.js v5.1.5
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2025 Harvey Zack
 * Released under the MIT License.
 */(function(b,H,v,f,m){var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Xt<"u"?Xt:{},u=typeof y[f]=="function"&&y[f],g=u.cache||{},w=typeof Jt=="function"&&Jt.bind(ne);function i(l,h){if(!g[l]){if(!b[l]){var d=typeof y[f]=="function"&&y[f];if(!h&&d)return d(l,!0);if(u)return u(l,!0);if(w&&typeof l=="string")return w(l);var _=Error("Cannot find module '"+l+"'");throw _.code="MODULE_NOT_FOUND",_}x.resolve=function(E){var p=b[l][1][E];return p??E},x.cache={};var S=g[l]=new i.Module(l);b[l][0].call(S.exports,x,S,S.exports,this)}return g[l].exports;function x(E){var p=x.resolve(E);return p===!1?{}:i(p)}}i.isParcelRequire=!0,i.Module=function(l){this.id=l,this.bundle=i,this.exports={}},i.modules=b,i.cache=g,i.parent=u,i.register=function(l,h){b[l]=[function(d,_){_.exports=h},{}]},Object.defineProperty(i,"root",{get:function(){return y[f]}}),y[f]=i;for(var o=0;o<H.length;o++)i(H[o]);{var c=i(v);ne.exports=c}})({bgm6t:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>o);var m=b("./danmuku"),y=f.interopDefault(m),u=b("./setting"),g=f.interopDefault(u),w=b("./heatmap"),i=f.interopDefault(w);function o(c){return l=>{let h=new y.default(l,c),d=new g.default(l,h);return h.option.heatmap&&(0,i.default)(l,h,h.option.heatmap),{name:"artplayerPluginDanmuku",emit:h.emit.bind(h),load:h.load.bind(h),config:h.config.bind(h),hide:h.hide.bind(h),show:h.show.bind(h),reset:h.reset.bind(h),mount:d.mount.bind(d),get option(){return h.option},get isHide(){return h.isHide},get isStop(){return h.isStop}}}}o.icons=g.default.icons,typeof window<"u"&&(window.artplayerPluginDanmuku=o)},{"./danmuku":"4ns48","./setting":"lO8OT","./heatmap":"8AxLD","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4ns48":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("./bilibili"),y=b("bundle-text:./worker"),u=f.interopDefault(y);class g{constructor(i,o){let{constructor:c,template:l}=i;this.utils=c.utils,this.validator=c.validator,this.$danmuku=l.$danmuku,this.$player=l.$player,this.art=i,this.queue=[],this.$refs=[],this.isStop=!1,this.isHide=!1,this.timer=null,this.index=0,this.option=g.option,this.states={wait:[],ready:[],emit:[],stop:[]},this.config(o);let h=new Blob([u.default],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(h)),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.reset=this.reset.bind(this),this.resize=this.resize.bind(this),this.destroy=this.destroy.bind(this),i.on("video:play",this.start),i.on("video:playing",this.start),i.on("video:pause",this.stop),i.on("video:waiting",this.stop),i.on("destroy",this.destroy),i.on("resize",this.resize),this.load()}static get option(){return{danmuku:[],speed:5,margin:[10,"25%"],opacity:1,color:"#FFFFFF",mode:0,modes:[0,1,2],fontSize:25,antiOverlap:!0,synchronousPlayback:!1,mount:void 0,heatmap:!1,width:512,points:[],filter:()=>!0,beforeEmit:()=>!0,beforeVisible:()=>!0,visible:!0,emitter:!0,maxLength:200,lockTime:5,theme:"dark",OPACITY:{},FONT_SIZE:{},MARGIN:{},SPEED:{},COLOR:[]}}static get scheme(){return{danmuku:"array|function|string",speed:"number",margin:"array",opacity:"number",color:"string",mode:"number",modes:"array",fontSize:"number|string",antiOverlap:"boolean",synchronousPlayback:"boolean",mount:"?htmldivelement|string",heatmap:"object|boolean",width:"number",points:"array",filter:"function",beforeEmit:"function",beforeVisible:"function",visible:"boolean",emitter:"boolean",maxLength:"number",lockTime:"number",theme:"string",OPACITY:"object",FONT_SIZE:"object",MARGIN:"object",SPEED:"object",COLOR:"array"}}static get cssText(){return' user-select: none; position: absolute; white-space: pre; pointer-events: none; perspective: 500px; display: inline-block; will-change: transform; font-weight: normal; line-height: 1.125; visibility: hidden; font-family: SimHei, "Microsoft JhengHei", Arial, Helvetica, sans-serif; text-shadow: rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px; '}get isRotate(){var i,o;return(o=(i=this.art.plugins)==null?void 0:i.autoOrientation)==null?void 0:o.state}get marginTop(){let{clamp:i}=this.utils,o=this.option.margin[0],{clientHeight:c}=this.$player;return typeof o=="number"?i(o,0,c):typeof o=="string"&&o.endsWith("%")?i(c*(parseFloat(o)/100),0,c):g.option.margin[0]}get marginBottom(){let{clamp:i}=this.utils,o=this.option.margin[1],{clientHeight:c}=this.$player;return typeof o=="number"?i(o,0,c):typeof o=="string"&&o.endsWith("%")?i(c*(parseFloat(o)/100),0,c):g.option.margin[1]}get fontSize(){let{clamp:i}=this.utils,{clientHeight:o}=this.$player,c=this.option.fontSize;return typeof c=="number"?Math.round(i(c,12,o)):typeof c=="string"&&c.endsWith("%")?Math.round(i(o*(parseFloat(c)/100),12,o)):g.option.fontSize}get $ref(){let i=this.$refs.pop()||document.createElement("div");return i.style.cssText=g.cssText,i.dataset.mode="",i.className="",i}get readys(){let{currentTime:i}=this.art,o=[];return this.filter("ready",c=>o.push(c)),this.filter("wait",c=>{i+.1>=c.time&&c.time>=i-.1&&o.push(c)}),o}get visibles(){let i=[],{clientWidth:o}=this.$player,c=this.getLeft(this.$player);return this.filter("emit",l=>{let h=l.$ref.offsetTop,d=this.getLeft(l.$ref)-c,_=l.$ref.clientHeight,S=l.$ref.clientWidth,x=d+S,E=x/l.$restTime,p={};p.top=h,p.left=d,p.height=_,p.width=S,p.right=o-x,p.speed=E,p.distance=x,p.time=l.$restTime,p.mode=l.mode,i.push(p)}),i}get speed(){return this.option.synchronousPlayback&&this.art.playbackRate?this.option.speed/Number(this.art.playbackRate):this.option.speed}async load(i){let{errorHandle:o}=this.utils,c=[],l=i||this.option.danmuku;try{typeof l=="function"?c=await l():l instanceof Promise?c=await l:typeof l=="string"?c=await(0,m.bilibiliDanmuParseFromUrl)(l):Array.isArray(l)&&(c=l),o(Array.isArray(c),"Danmuku need return an array as result"),i===void 0&&(this.reset(),this.queue=[],this.states={wait:[],ready:[],emit:[],stop:[]},this.$refs=[],this.$danmuku.innerText="");for(let h=0;h<c.length;h++){let d=c[h];await this.emit(d)}this.art.emit("artplayerPluginDanmuku:loaded",this.queue)}catch(h){throw this.art.emit("artplayerPluginDanmuku:error",h),h}return this}async emit(i){let{clamp:o}=this.utils;if(this.validator(i,{text:"string",mode:"?number",color:"?string",time:"?number",border:"?boolean",style:"?object"}),!i.text.trim()||(i.time?i.time=o(i.time,0,1/0):i.time=this.art.currentTime+.5,i.mode===void 0&&(i.mode=this.option.mode),i.style===void 0&&(i.style={}),i.color===void 0&&(i.color=this.option.color),![0,1,2].includes(i.mode)||!this.option.filter(i)))return this;let c={...i,$state:"wait",$id:this.index++,$ref:null,$restTime:0,$lastStartTime:0};return this.setState(c,"wait"),this.queue.push(c),this}config(i){let{clamp:o}=this.utils,{$controlsCenter:c}=this.art.template;return Object.keys(i).some(l=>JSON.stringify(this.option[l])!==JSON.stringify(i[l]))&&(this.option=Object.assign({},g.option,this.option,i),this.validator(this.option,g.scheme),this.option.mode=o(this.option.mode,0,2),this.option.speed=o(this.option.speed,1,10),this.option.opacity=o(this.option.opacity,0,1),this.option.lockTime=o(this.option.lockTime,1,60),this.option.maxLength=o(this.option.maxLength,1,1e3),this.option.mount=this.option.mount||c,i.fontSize&&this.reset(),this.option.visible?this.show():this.hide(),this.art.emit("artplayerPluginDanmuku:config",this.option)),this}getLeft(i){let o=i.getBoundingClientRect();return this.isRotate?o.top:o.left}postMessage(i={}){return new Promise(o=>{i.id=Date.now(),this.worker.postMessage(i),this.worker.onmessage=c=>{let{data:l}=c;l.id===i.id&&o(l)}})}filter(i,o){let c=this.states[i]||[];for(let l=0;l<c.length;l++)o(c[l]);return c}setState(i,o){this.states[i.$state]=this.states[i.$state].filter(c=>c!==i),i.$state=o,i.$ref&&(i.$ref.dataset.state=o),this.states[o].push(i)}makeWait(i){this.setState(i,"wait"),i.$ref&&(i.$ref.style.cssText=g.cssText,i.$ref.style.visibility="hidden",i.$ref.style.marginLeft="0px",i.$ref.style.transform="translateX(0px)",i.$ref.style.transition="transform 0s linear 0s",this.$refs.push(i.$ref),i.$ref=null)}update(){let{setStyles:i}=this.utils;return this.timer=window.requestAnimationFrame(async()=>{if(this.art.playing&&!this.isHide){this.filter("emit",c=>{let l=(Date.now()-c.$lastStartTime)/1e3;c.$restTime-=l,c.$lastStartTime=Date.now(),c.$restTime<=0&&this.makeWait(c)});let o=this.readys;for(let c=0;c<o.length;c++){let l=o[c];if(await this.option.beforeVisible(l)){let{clientWidth:h,clientHeight:d}=this.$player;l.$ref=this.$ref,l.$ref.innerText=l.text,this.$danmuku.appendChild(l.$ref),l.$ref.style.opacity=this.option.opacity,l.$ref.style.fontSize=`${this.fontSize}px`,l.$ref.style.color=l.color,l.$ref.style.border=l.border?`1px solid ${l.color}`:null,l.$ref.style.backgroundColor=l.border?"rgb(0 0 0 / 50%)":null,i(l.$ref,l.style),l.$lastStartTime=Date.now(),l.$restTime=this.speed;let _=h+l.$ref.clientWidth,{result:S}=await this.postMessage({type:"getDanmuTop",target:{mode:l.mode,height:l.$ref.clientHeight,speed:_/l.$restTime},visibles:this.visibles,antiOverlap:this.option.antiOverlap,clientWidth:h,clientHeight:d,marginBottom:this.marginBottom,marginTop:this.marginTop});if(l.$ref)if(this.isStop||S===void 0)this.setState(l,"ready"),this.$refs.push(l.$ref),l.$ref=null;else{switch(this.setState(l,"emit"),l.$ref.style.top=`${S}px`,l.$ref.style.visibility="visible",l.$ref.dataset.mode=l.mode,l.mode){case 0:l.$ref.style.left=`${h}px`,l.$ref.style.marginLeft="0px",l.$ref.style.transform=`translateX(${-_}px)`,l.$ref.style.transition=`transform ${l.$restTime}s linear 0s`;break;case 1:case 2:l.$ref.style.left="50%",l.$ref.style.marginLeft=`-${l.$ref.clientWidth/2}px`}this.art.emit("artplayerPluginDanmuku:visible",l)}}}}this.isStop||this.update()}),this}resize(){let{clientWidth:i}=this.$player;this.filter("stop",o=>{o.mode===0&&(o.$ref.style.left=`${i}px`)}),this.filter("emit",o=>{if(o.$lastStartTime=Date.now(),o.mode===0){let c=i+o.$ref.clientWidth;o.$ref.style.left=`${i}px`,o.$ref.style.transform=`translateX(${-c}px)`,o.$ref.style.transition=`transform ${o.$restTime}s linear 0s`}})}continue(){let{clientWidth:i}=this.$player;return this.filter("stop",o=>{if(this.setState(o,"emit"),o.$lastStartTime=Date.now(),o.mode===0){let c=i+o.$ref.clientWidth;o.$ref.style.transform=`translateX(${-c}px)`,o.$ref.style.transition=`transform ${o.$restTime}s linear 0s`}}),this}suspend(){let{clientWidth:i}=this.$player;return this.filter("emit",o=>{if(this.setState(o,"stop"),o.mode===0){let c=i-(this.getLeft(o.$ref)-this.getLeft(this.$player));o.$ref.style.transform=`translateX(${-c}px)`,o.$ref.style.transition="transform 0s linear 0s"}}),this}stop(){return this.isStop=!0,this.suspend(),window.cancelAnimationFrame(this.timer),this.art.emit("artplayerPluginDanmuku:stop"),this}start(){return this.isStop=!1,this.continue(),this.update(),this.art.emit("artplayerPluginDanmuku:start"),this}reset(){return this.queue.forEach(i=>this.makeWait(i)),this.art.emit("artplayerPluginDanmuku:reset"),this}show(){return this.isHide=!1,this.$danmuku.style.opacity=1,this.option.visible=!0,this.art.emit("artplayerPluginDanmuku:show"),this}hide(){return this.isHide=!0,this.$danmuku.style.opacity=0,this.option.visible=!1,this.art.emit("artplayerPluginDanmuku:hide"),this}destroy(){this.stop(),this.worker.terminate(),this.art.off("video:play",this.start),this.art.off("video:playing",this.start),this.art.off("video:pause",this.stop),this.art.off("video:waiting",this.stop),this.art.off("resize",this.reset),this.art.off("destroy",this.destroy),this.art.emit("artplayerPluginDanmuku:destroy")}}v.default=g},{"./bilibili":"f83sx","bundle-text:./worker":"lfIAi","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f83sx:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");function m(w){switch(w){case 1:case 2:case 3:default:return 0;case 4:return 2;case 5:return 1}}function y(w){if(typeof w!="string")return[];let i=new RegExp(/<d (?:.*? )??p="(?<p>.+?)"(?: .*?)?>(?<text>.+?)<\/d>/gs);return Array.from(w.matchAll(i)).map(o=>{let c=o.groups.p.split(",");return c.length>=8?{text:o.groups.text.trim().replaceAll("&quot;",'"').replaceAll("&apos;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),time:Number(c[0]),mode:m(Number(c[1])),fontSize:Number(c[2]),color:`#${Number(c[3]).toString(16)}`,timestamp:Number(c[4]),pool:Number(c[5]),userID:c[6],rowID:Number(c[7])}:null}).filter(Boolean)}function u({data:w}){let{xml:i,id:o}=w;if(!o||!i)return;let c=y(i);self.postMessage({danmus:c,id:o})}function g(w){return new Promise(async i=>{let o=await fetch(w),c=await o.text();try{let l=function(){let h=new Blob([` ${m.toString()} ${y.toString()} onmessage = ${u.toString()} `],{type:"application/javascript"});return new Worker(URL.createObjectURL(h))}();l.onmessage=h=>{let{danmus:d,id:_}=h.data;_&&d&&(i(d),l.terminate())},l.postMessage({xml:c,id:Date.now()})}catch{i(y(c))}})}f.defineInteropFlag(v),f.export(v,"bilibiliDanmuParseFromUrl",()=>g)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(b,H,v){v.interopDefault=function(f){return f&&f.__esModule?f:{default:f}},v.defineInteropFlag=function(f){Object.defineProperty(f,"__esModule",{value:!0})},v.exportAll=function(f,m){return Object.keys(f).forEach(function(y){y==="default"||y==="__esModule"||Object.prototype.hasOwnProperty.call(m,y)||Object.defineProperty(m,y,{enumerable:!0,get:function(){return f[y]}})}),m},v.export=function(f,m,y){Object.defineProperty(f,m,{enumerable:!0,get:y})}},{}],lfIAi:[function(b,H,v){H.exports=`!function(e,t,n,o,i){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},f="function"==typeof r[o]&&r[o],l=f.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(t,n){if(!l[t]){if(!e[t]){var i="function"==typeof r[o]&&r[o];if(!n&&i)return i(t,!0);if(f)return f(t,!0);if(d&&"string"==typeof t)return d(t);var h=Error("Cannot find module '"+t+"'");throw h.code="MODULE_NOT_FOUND",h}s.resolve=function(n){var o=e[t][1][n];return null!=o?o:n},s.cache={};var p=l[t]=new u.Module(t);e[t][0].call(p.exports,s,p,p.exports,this)}return l[t].exports;function s(e){var t=s.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=l,u.parent=f,u.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(u,"root",{get:function(){return r[o]}}),r[o]=u;for(var h=0;h<t.length;h++)u(t[h]);if(n){var p=u(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=p:"function"==typeof define&&define.amd&&define(function(){return p})}}({"59OZS":[function(e,t,n){function o({target:e,visibles:t,clientWidth:n,clientHeight:o,marginBottom:i,marginTop:r,antiOverlap:f}){let l=o-i,d=t.filter(t=>t.mode===e.mode&&t.top<=l).sort((e,t)=>e.top-t.top);if(0===d.length)return 2===e.mode?l-e.height:r;if(d.unshift({type:"top",top:0,left:0,right:0,height:r,width:n,speed:0,distance:n}),d.push({type:"bottom",top:l,left:0,right:0,height:i,width:n,speed:0,distance:n}),2===e.mode)for(let t=d.length-2;t>=0;t-=1){let n=d[t],o=d[t+1],i=n.top+n.height;if(o.top-i>=e.height)return o.top-e.height}else for(let t=1;t<d.length;t+=1){let n=d[t],o=d[t-1],i=o.top+o.height;if(n.top-i>=e.height)return i}let u=[];for(let e=1;e<d.length-1;e+=1){let t=d[e];if(u.length){let e=u[u.length-1];e[0].top===t.top?e.push(t):u.push([t])}else u.push([t])}if(f)switch(e.mode){case 0:{let t=u.find(t=>t.every(t=>!(n<t.distance)&&(e.speed<t.speed||t.right/(e.speed-t.speed)>t.time)));return t&&t[0]?t[0].top:void 0}case 1:case 2:return}else{switch(e.mode){case 0:u.sort((e,t)=>{let n=Math.min(...t.map(e=>e.right)),o=Math.min(...e.map(e=>e.right));return n*t.length-o*e.length});break;case 1:case 2:u.sort((e,t)=>{let n=Math.max(...t.map(e=>e.width));return Math.max(...e.map(e=>e.width))*e.length-n*t.length})}return u[0][0].top}}onmessage=e=>{let{data:t}=e;if(!t.id||!t.type)return;let n=(0,({getDanmuTop:o})[t.type])(t);self.postMessage({result:n,id:t.id})}},{}]},["59OZS"],"59OZS","parcelRequire4dc0");`},{}],lO8OT:[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v);var m=b("bundle-text:./style.less"),y=f.interopDefault(m),u=b("bundle-text:./img/on.svg"),g=f.interopDefault(u),w=b("bundle-text:./img/off.svg"),i=f.interopDefault(w),o=b("bundle-text:./img/config.svg"),c=f.interopDefault(o),l=b("bundle-text:./img/style.svg"),h=f.interopDefault(l),d=b("bundle-text:./img/mode_0_off.svg"),_=f.interopDefault(d),S=b("bundle-text:./img/mode_0_on.svg"),x=f.interopDefault(S),E=b("bundle-text:./img/mode_1_off.svg"),p=f.interopDefault(E),L=b("bundle-text:./img/mode_1_on.svg"),j=f.interopDefault(L),O=b("bundle-text:./img/mode_2_off.svg"),A=f.interopDefault(O),P=b("bundle-text:./img/mode_2_on.svg"),F=f.interopDefault(P),Y=b("bundle-text:./img/check_on.svg"),R=f.interopDefault(Y),$=b("bundle-text:./img/check_off.svg"),B=f.interopDefault($);if(v.default=class{constructor(N,z){this.art=N,this.danmuku=z,this.utils=N.constructor.utils;let{setStyle:q}=this.utils,{$controlsCenter:G}=N.template;q(G,"display","flex"),this.template={$controlsCenter:G,$mount:G,$danmuku:null,$toggle:null,$config:null,$configPanel:null,$configModes:null,$style:null,$stylePanel:null,$styleModes:null,$colors:null,$opacitySlider:null,$opacityValue:null,$marginSlider:null,$marginValue:null,$fontSizeSlider:null,$fontSizeValue:null,$speedSlider:null,$speedValue:null,$input:null,$send:null},this.slider={opacity:null,margin:null,fontSize:null,speed:null},this.emitting=!1,this.isLock=!1,this.timer=null,this.createTemplate(),this.createSliders(),this.createEvents(),this.mount(this.option.mount),N.on("resize",()=>this.resize()),N.on("fullscreen",se=>this.onFullscreen(se)),N.on("fullscreenWeb",se=>this.onFullscreen(se)),N.proxy(this.template.$config,"mouseenter",()=>{this.onMouseEnter({$control:this.template.$config,$panel:this.template.$configPanel})}),N.proxy(this.template.$style,"mouseenter",()=>{this.onMouseEnter({$control:this.template.$style,$panel:this.template.$stylePanel})})}static get icons(){return{$on:g.default,$off:i.default,$config:c.default,$style:h.default,$mode_0_off:_.default,$mode_0_on:x.default,$mode_1_off:p.default,$mode_1_on:j.default,$mode_2_off:A.default,$mode_2_on:F.default,$check_on:R.default,$check_off:B.default}}get option(){return this.danmuku.option}get outside(){return this.template.$mount!==this.template.$controlsCenter}get TEMPLATE(){let{option:N}=this;return`<div class="apd-toggle">${g.default}${i.default}</div><div class="apd-config">${c.default}<div class="apd-config-panel"><div class="apd-config-panel-inner"><div class="apd-config-mode">按类型屏蔽<div class="apd-modes"><div data-mode="0" class="apd-mode">${_.default}${x.default}<div>滚动</div></div><div data-mode="1" class="apd-mode">${p.default}${j.default}<div>顶部</div></div><div data-mode="2" class="apd-mode">${A.default}${F.default}<div>底部</div></div></div></div><div class="apd-config-other"><div class="apd-other apd-anti-overlap">${R.default}${B.default} 防止弹幕重叠</div><div class="apd-other apd-sync-video">${R.default}${B.default} 同步视频速度</div></div><div class="apd-config-slider apd-config-opacity">不透明度<div class="apd-slider"></div><div class="apd-value">未知</div></div><div class="apd-config-slider apd-config-margin">显示区域<div class="apd-slider"></div><div class="apd-value">未知</div></div><div class="apd-config-slider apd-config-fontSize">弹幕字号<div class="apd-slider"></div><div class="apd-value">未知</div></div><div class="apd-config-slider apd-config-speed">弹幕速度<div class="apd-slider"></div><div class="apd-value">未知</div></div></div></div></div><div class="apd-emitter"><div class="apd-style">${h.default}<div class="apd-style-panel"><div class="apd-style-panel-inner"><div class="apd-style-mode">模式<div class="apd-modes"><div data-mode="0" class="apd-mode">${x.default}<div>滚动</div></div><div data-mode="1" class="apd-mode">${j.default}<div>顶部</div></div><div data-mode="2" class="apd-mode">${F.default}<div>底部</div></div></div></div><div class="apd-style-color">颜色<div class="apd-colors">${this.COLOR.map(z=>`<div data-color="${z}" class="apd-color" style="background-color: ${z}"></div>`).join("")}</div></div></div></div></div><input class="apd-input" placeholder="发个友善的弹幕见证当下" autocomplete="off" maxLength="${N.maxLength}" /><div class="apd-send">发送</div></div>`}get OPACITY(){return{min:0,max:100,steps:[],...this.option.OPACITY}}get FONT_SIZE(){return{min:12,max:120,steps:[],...this.option.FONT_SIZE}}get MARGIN(){return{min:0,max:3,steps:[{name:"1/4",value:[10,"75%"]},{name:"半屏",value:[10,"50%"]},{name:"3/4",value:[10,"25%"]},{name:"满屏",value:[10,10]}],...this.option.MARGIN}}get SPEED(){return{min:0,max:4,steps:[{name:"极慢",value:10},{name:"较慢",value:7.5,hide:!0},{name:"适中",value:5},{name:"较快",value:2.5,hide:!0},{name:"极快",value:1}],...this.option.SPEED}}get COLOR(){return this.option.COLOR.length?this.option.COLOR:["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#89D5FF","#CC0273","#222222","#9B9B9B","#FFFFFF"]}query(N){let{query:z}=this.utils,{$danmuku:q}=this.template;return z(N,q)}append(N,z){let{append:q}=this.utils;[...N.children].some(G=>G===z)||q(N,z)}setData(N,z){let{$player:q}=this.art.template,{$mount:G}=this.template;q.dataset[N]=z,this.outside&&(G.dataset[N]=z)}createTemplate(){let{createElement:N,tooltip:z}=this.utils,q=N("div");q.className="artplayer-plugin-danmuku",q.innerHTML=this.TEMPLATE,this.template.$danmuku=q,this.template.$toggle=this.query(".apd-toggle"),this.template.$config=this.query(".apd-config"),this.template.$configPanel=this.query(".apd-config-panel"),this.template.$configModes=this.query(".apd-config-mode .apd-modes"),this.template.$style=this.query(".apd-style"),this.template.$stylePanel=this.query(".apd-style-panel"),this.template.$styleModes=this.query(".apd-style-mode .apd-modes"),this.template.$colors=this.query(".apd-colors"),this.template.$antiOverlap=this.query(".apd-anti-overlap"),this.template.$syncVideo=this.query(".apd-sync-video"),this.template.$opacitySlider=this.query(".apd-config-opacity .apd-slider"),this.template.$opacityValue=this.query(".apd-config-opacity .apd-value"),this.template.$marginSlider=this.query(".apd-config-margin .apd-slider"),this.template.$marginValue=this.query(".apd-config-margin .apd-value"),this.template.$fontSizeSlider=this.query(".apd-config-fontSize .apd-slider"),this.template.$fontSizeValue=this.query(".apd-config-fontSize .apd-value"),this.template.$speedSlider=this.query(".apd-config-speed .apd-slider"),this.template.$speedValue=this.query(".apd-config-speed .apd-value"),this.template.$input=this.query(".apd-input"),this.template.$send=this.query(".apd-send");let{$toggle:G}=this.template;this.art.on("artplayerPluginDanmuku:show",()=>{z(G,"关闭弹幕")}),this.art.on("artplayerPluginDanmuku:hide",()=>{z(G,"打开弹幕")})}createEvents(){let{$toggle:N,$configModes:z,$styleModes:q,$colors:G,$antiOverlap:se,$syncVideo:fe,$send:I,$input:ke}=this.template;this.art.proxy(N,"click",()=>{this.danmuku.config({visible:!this.option.visible}),this.reset()}),this.art.proxy(z,"click",Ee=>{let Oe=Ee.target.closest(".apd-mode");if(!Oe)return;let Ie=Number(Oe.dataset.mode);this.option.modes.includes(Ie)?this.danmuku.config({modes:this.option.modes.filter(Z=>Z!==Ie)}):this.danmuku.config({modes:[...this.option.modes,Ie]}),this.reset()}),this.art.proxy(se,"click",()=>{this.danmuku.config({antiOverlap:!this.option.antiOverlap}),this.reset()}),this.art.proxy(fe,"click",()=>{this.danmuku.config({synchronousPlayback:!this.option.synchronousPlayback}),this.reset()}),this.art.proxy(q,"click",Ee=>{let Oe=Ee.target.closest(".apd-mode");if(!Oe)return;let Ie=Number(Oe.dataset.mode);this.danmuku.config({mode:Ie}),this.reset()}),this.art.proxy(G,"click",Ee=>{let Oe=Ee.target.closest(".apd-color");Oe&&(this.danmuku.config({color:Oe.dataset.color}),this.reset())}),this.art.proxy(I,"click",()=>this.emit()),this.art.proxy(ke,"keypress",Ee=>{Ee.key==="Enter"&&(Ee.preventDefault(),this.emit())})}createSliders(){this.slider.opacity=this.createSlider({...this.OPACITY,container:this.template.$opacitySlider,findIndex:()=>Math.round(100*this.option.opacity),onChange:N=>{let{$opacityValue:z}=this.template;z.textContent=`${N}%`,this.danmuku.config({opacity:N/100})}}),this.slider.margin=this.createSlider({...this.MARGIN,container:this.template.$marginSlider,findIndex:()=>this.MARGIN.steps.findIndex(N=>N.value[0]===this.option.margin[0]&&N.value[1]===this.option.margin[1]),onChange:N=>{let z=this.MARGIN.steps[N];if(!z)return;let{$marginValue:q}=this.template;q.textContent=z.name,this.danmuku.config({margin:z.value})}}),this.slider.fontSize=this.createSlider({...this.FONT_SIZE,container:this.template.$fontSizeSlider,findIndex:()=>this.danmuku.fontSize,onChange:N=>{let{$fontSizeValue:z}=this.template;z.textContent=`${N}px`,N!==this.danmuku.fontSize&&this.danmuku.config({fontSize:N})}}),this.slider.speed=this.createSlider({...this.SPEED,container:this.template.$speedSlider,findIndex:()=>this.SPEED.steps.findIndex(N=>N.value===this.option.speed),onChange:N=>{let z=this.SPEED.steps[N];if(!z)return;let{$speedValue:q}=this.template;q.textContent=z.name,this.danmuku.config({speed:z.value})}})}createSlider({min:N,max:z,container:q,findIndex:G,onChange:se,steps:fe=[]}){let{query:I,clamp:ke,setStyle:Ee}=this.utils;Ee(q,"touch-action","none"),q.innerHTML=`<div class="apd-slider-line"><div class="apd-slider-points">${fe.map(()=>'<div class="apd-slider-point"></div>').join("")}</div><div class="apd-slider-progress"></div></div><div class="apd-slider-dot"></div><div class="apd-slider-steps">${fe.map(K=>K.hide?"":`<div class="apd-slider-step">${K.name}</div>`).join("")}</div>`;let Oe=I(".apd-slider-dot",q),Ie=I(".apd-slider-progress",q),Z=!1;function ge(K=G()){if(K<N||K>z)return;let Se=(K-N)/(z-N);Oe.style.left=`${100*Se}%`,fe.length===0&&(Ie.style.width=Oe.style.left),se(K)}function re(K){let{top:Se,height:oe,left:Ae,width:ve}=q.getBoundingClientRect();this.art.isRotate?ge(Math.round(ke(K.clientY-Se,0,oe)/oe*(z-N)+N)):ge(Math.round(ke(K.clientX-Ae,0,ve)/ve*(z-N)+N))}return this.art.proxy(q,"click",K=>{re.call(this,K)}),this.art.proxy(q,"pointerdown",K=>{Z=K.button===0}),this.art.proxy(document,"pointermove",K=>{Z&&re.call(this,K)}),this.art.proxy(document,"pointerup",K=>{Z&&(Z=!1,re.call(this,K))}),{reset:ge}}onFullscreen(N){let{$danmuku:z,$controlsCenter:q,$mount:G}=this.template;this.outside?N?this.append(q,z):this.append(G,z):this.append(q,z)}onMouseEnter({$control:N,$panel:z}){let{$player:q}=this.art.template,G=N.getBoundingClientRect(),se=z.getBoundingClientRect(),fe=q.getBoundingClientRect(),I=se.width/2-G.width/2,ke=fe.left-(G.left-I),Ee=G.right+I-fe.right;ke>0?z.style.left=`${-I+ke}px`:Ee>0?z.style.left=`${-I-Ee}px`:z.style.left=`${-I}px`}async emit(){let{$input:N}=this.template,z=N.value.trim();if(!z.length||this.isLock||this.emitting)return;let q={text:z,mode:this.option.mode,color:this.option.color,time:this.art.currentTime};try{this.emitting=!0;let G=await this.option.beforeEmit(q);if(this.emitting=!1,G!==!0)return;q.border=!0,delete q.time,this.danmuku.emit(q),N.value="",this.lock()}catch{this.emitting=!1}}lock(){let{addClass:N}=this.utils,{$send:z}=this.template;this.isLock=!0;let q=this.option.lockTime;z.innerText=q,N(z,"apd-lock");let G=()=>{this.timer=setTimeout(()=>{q===0?this.unlock():(q-=1,z.innerText=q,G())},1e3)};G()}unlock(){let{removeClass:N}=this.utils,{$send:z}=this.template;clearTimeout(this.timer),this.isLock=!1,z.innerText="发送",N(z,"apd-lock")}resize(){if(this.outside||this.art.fullscreen||this.art.fullscreenWeb)return;let{$player:N,$controlsCenter:z}=this.art.template,{$danmuku:q}=this.template;this.art.width<this.option.width?this.append(N,q):this.append(z,q)}reset(){let{inverseClass:N,tooltip:z}=this.utils,{$toggle:q,$colors:G}=this.template;this.slider.opacity.reset(),this.slider.margin.reset(),this.slider.fontSize.reset(),this.slider.speed.reset(),this.setData("danmukuVisible",this.option.visible),this.setData("danmukuMode",this.option.mode),this.setData("danmukuColor",this.option.color),this.setData("danmukuMode0",this.option.modes.includes(0)),this.setData("danmukuMode1",this.option.modes.includes(1)),this.setData("danmukuMode2",this.option.modes.includes(2)),this.setData("danmukuAntiOverlap",this.option.antiOverlap),this.setData("danmukuSyncVideo",this.option.synchronousPlayback),this.setData("danmukuTheme",this.option.theme),this.setData("danmukuEmitter",this.option.emitter);let se=Array.from(G.children).find(fe=>fe.dataset.color===this.option.color.toUpperCase());se&&N(se,"apd-active"),z(q,this.option.visible?"关闭弹幕":"打开弹幕"),this.resize()}mount(N){let{errorHandle:z}=this.utils,q=typeof N=="string"?document.querySelector(N):N;z(q,`Can not find the mount point: ${N}`),this.append(q,this.template.$danmuku),this.template.$mount=q,this.reset()}},typeof document<"u"){let N="artplayer-plugin-danmuku",z=document.getElementById(N);if(z)z.textContent=y.default;else{let q=document.createElement("style");q.id=N,q.textContent=y.default,document.head.appendChild(q)}}},{"bundle-text:./style.less":"hViDo","bundle-text:./img/on.svg":"9pjcf","bundle-text:./img/off.svg":"b2dkP","bundle-text:./img/config.svg":"l8tyy","bundle-text:./img/style.svg":"5iZC3","bundle-text:./img/mode_0_off.svg":"i0Vut","bundle-text:./img/mode_0_on.svg":"hOSvZ","bundle-text:./img/mode_1_off.svg":"bOXC3","bundle-text:./img/mode_1_on.svg":"lKuh0","bundle-text:./img/mode_2_off.svg":"eB8W6","bundle-text:./img/mode_2_on.svg":"bpe2E","bundle-text:./img/check_on.svg":"kL9zy","bundle-text:./img/check_off.svg":"22xpM","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hViDo:[function(b,H,v){H.exports='.artplayer-plugin-danmuku{z-index:99;color:#fff;flex-shrink:0;justify-content:center;align-items:center;gap:10px;width:100%;height:32px;font-size:12px;font-weight:300;display:flex;position:relative}.artplayer-plugin-danmuku .apd-icon{cursor:pointer;opacity:.75;fill:#fff;transition:all .2s}.artplayer-plugin-danmuku .apd-icon:hover{opacity:1}.artplayer-plugin-danmuku .apd-config{display:flex;position:relative}.artplayer-plugin-danmuku .apd-config .apd-config-panel{opacity:0;pointer-events:none;width:320px;padding:10px;position:absolute;bottom:24px;left:0}.artplayer-plugin-danmuku .apd-config .apd-config-panel .apd-config-panel-inner{background-color:#000000d9;border-radius:3px;width:100%;padding:10px}.artplayer-plugin-danmuku .apd-config:hover .apd-config-panel{opacity:100;pointer-events:all}.artplayer-plugin-danmuku .apd-config-mode,.artplayer-plugin-danmuku .apd-config-slider,.artplayer-plugin-danmuku .apd-config-other,.artplayer-plugin-danmuku .apd-style-mode{margin-bottom:15px}.artplayer-plugin-danmuku .apd-modes{align-items:center;gap:20px;margin-top:5px;display:flex}.artplayer-plugin-danmuku .apd-modes .apd-mode{cursor:pointer;text-align:center}.artplayer-plugin-danmuku .apd-modes .apd-mode:hover{color:#00a1d6}.artplayer-plugin-danmuku .apd-config-slider{align-items:center;gap:12px;display:flex}.artplayer-plugin-danmuku .apd-config-slider .apd-value{text-align:right;width:32px}.artplayer-plugin-danmuku .apd-slider{cursor:pointer;flex:1;justify-content:center;align-items:center;height:20px;display:flex;position:relative}.artplayer-plugin-danmuku .apd-slider .apd-slider-line{background-color:#ffffff40;border-radius:3px;width:100%;height:2px;position:relative;overflow:hidden}.artplayer-plugin-danmuku .apd-slider .apd-slider-points{justify-content:space-between;align-items:center;display:flex;position:absolute;inset:0}.artplayer-plugin-danmuku .apd-slider .apd-slider-points .apd-slider-point{background-color:#ffffff80;border-radius:50%;width:2px;height:2px}.artplayer-plugin-danmuku .apd-slider .apd-slider-progress{background-color:#00a1d6;width:0%;height:100%}.artplayer-plugin-danmuku .apd-slider .apd-slider-dot{background-color:#00a1d6;border-radius:50%;width:12px;height:12px;position:absolute;left:0%;transform:translate(-6px)}.artplayer-plugin-danmuku .apd-slider .apd-slider-steps{color:#777;justify-content:space-between;align-items:center;width:calc(100% + 32px);display:flex;position:absolute;bottom:-12px}.artplayer-plugin-danmuku .apd-slider .apd-slider-steps .apd-slider-step{text-align:center;flex-shrink:0;width:36px;scale:.95}.artplayer-plugin-danmuku .apd-config-other{align-items:center;gap:20px;display:flex}.artplayer-plugin-danmuku .apd-config-other .apd-check-off,.artplayer-plugin-danmuku .apd-config-other .apd-check-on{width:16px;height:16px}.artplayer-plugin-danmuku .apd-config-other .apd-other{cursor:pointer;align-items:center;gap:2px;display:flex}.artplayer-plugin-danmuku .apd-config-other .apd-other:hover{color:#00a1d6}.artplayer-plugin-danmuku .apd-emitter{background-color:#ffffff40;border-radius:5px;flex:1;align-items:center;height:100%;display:flex}.artplayer-plugin-danmuku .apd-style{justify-content:center;align-items:center;display:flex;position:relative}.artplayer-plugin-danmuku .apd-style .apd-style-panel{opacity:0;pointer-events:none;width:200px;padding:10px;position:absolute;bottom:24px;left:0}.artplayer-plugin-danmuku .apd-style .apd-style-panel .apd-style-panel-inner{background-color:#000000d9;border-radius:3px;width:100%;padding:10px}.artplayer-plugin-danmuku .apd-style:hover .apd-style-panel{opacity:100;pointer-events:all}.artplayer-plugin-danmuku .apd-colors{flex-wrap:wrap;gap:8px;margin-top:5px;display:flex}.artplayer-plugin-danmuku .apd-colors .apd-color{cursor:pointer;border-radius:2px;width:16px;height:16px}.artplayer-plugin-danmuku .apd-colors .apd-color.apd-active{border:1px solid #000;box-shadow:0 0 0 1px #fff}.artplayer-plugin-danmuku .apd-input{color:#fff;background-color:#0000;border:none;outline:none;flex:1;width:auto;min-width:0;height:100%;line-height:1}.artplayer-plugin-danmuku .apd-input::placeholder{color:#ffffff80}.artplayer-plugin-danmuku .apd-send{cursor:pointer;text-shadow:none;background-color:#00a1d6;border-top-right-radius:5px;border-bottom-right-radius:5px;flex-shrink:0;justify-content:center;align-items:center;width:60px;height:100%;display:flex}.artplayer-plugin-danmuku .apd-send.apd-lock{cursor:not-allowed;color:#666;background-color:#e7e7e7}.art-controls-center .apd-emitter{flex:none;width:260px}.art-fullscreen .artplayer-plugin-danmuku,.art-fullscreen-web .artplayer-plugin-danmuku{gap:16px;height:38px}.art-fullscreen .artplayer-plugin-danmuku .apd-config-icon,.art-fullscreen-web .artplayer-plugin-danmuku .apd-config-icon,.art-fullscreen .artplayer-plugin-danmuku .apd-toggle-off,.art-fullscreen-web .artplayer-plugin-danmuku .apd-toggle-off,.art-fullscreen .artplayer-plugin-danmuku .apd-toggle-on,.art-fullscreen-web .artplayer-plugin-danmuku .apd-toggle-on{width:28px;height:28px}.art-fullscreen .artplayer-plugin-danmuku .apd-emitter,.art-fullscreen-web .artplayer-plugin-danmuku .apd-emitter{flex:none;width:400px}.art-video-player>.artplayer-plugin-danmuku{padding:0 10px;position:absolute;bottom:-40px;left:0;right:0}.art-video-player:has(>.artplayer-plugin-danmuku){margin-bottom:40px}[data-danmuku-emitter=false] .apd-emitter{display:none!important}[data-danmuku-emitter=false] .art-controls-center .artplayer-plugin-danmuku{justify-content:flex-end;gap:18px}[data-danmuku-emitter=false].art-fullscreen .art-controls-center .artplayer-plugin-danmuku,[data-danmuku-emitter=false].art-fullscreen-web .art-controls-center .artplayer-plugin-danmuku{gap:24px}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-icon{fill:#333}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-emitter{background-color:#f1f2f3}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-input{color:#000}[data-danmuku-theme=light]>.artplayer-plugin-danmuku .apd-input::placeholder{color:#0000004d}[data-danmuku-visible=false] .apd-toggle-off{display:block}[data-danmuku-visible=false] .apd-toggle-on,[data-danmuku-visible=true] .apd-toggle-off{display:none}[data-danmuku-visible=true] .apd-toggle-on{display:block}[data-danmuku-anti-overlap=false] .apd-anti-overlap .apd-check-on{display:none}[data-danmuku-anti-overlap=false] .apd-anti-overlap .apd-check-off,[data-danmuku-anti-overlap=true] .apd-anti-overlap .apd-check-on{display:block}[data-danmuku-anti-overlap=true] .apd-anti-overlap .apd-check-off,[data-danmuku-sync-video=false] .apd-sync-video .apd-check-on{display:none}[data-danmuku-sync-video=false] .apd-sync-video .apd-check-off,[data-danmuku-sync-video=true] .apd-sync-video .apd-check-on{display:block}[data-danmuku-sync-video=true] .apd-sync-video .apd-check-off{display:none}[data-danmuku-mode0=false] .apd-config-mode .apd-mode-0-off{display:block}[data-danmuku-mode0=false] .apd-config-mode .apd-mode-0-on{display:none}[data-danmuku-mode0=false] .art-danmuku [data-mode="0"]{opacity:0!important}[data-danmuku-mode0=true] .apd-config-mode .apd-mode-0-off{display:none}[data-danmuku-mode0=true] .apd-config-mode .apd-mode-0-on{display:block}[data-danmuku-mode="0"] .apd-style-mode [data-mode="0"]{color:#00a1d6}[data-danmuku-mode="0"] .apd-style-mode [data-mode="0"] path{fill:#00a1d6}[data-danmuku-mode1=false] .apd-config-mode .apd-mode-1-off{display:block}[data-danmuku-mode1=false] .apd-config-mode .apd-mode-1-on{display:none}[data-danmuku-mode1=false] .art-danmuku [data-mode="1"]{opacity:0!important}[data-danmuku-mode1=true] .apd-config-mode .apd-mode-1-off{display:none}[data-danmuku-mode1=true] .apd-config-mode .apd-mode-1-on{display:block}[data-danmuku-mode="1"] .apd-style-mode [data-mode="1"]{color:#00a1d6}[data-danmuku-mode="1"] .apd-style-mode [data-mode="1"] path{fill:#00a1d6}[data-danmuku-mode2=false] .apd-config-mode .apd-mode-2-off{display:block}[data-danmuku-mode2=false] .apd-config-mode .apd-mode-2-on{display:none}[data-danmuku-mode2=false] .art-danmuku [data-mode="2"]{opacity:0!important}[data-danmuku-mode2=true] .apd-config-mode .apd-mode-2-off{display:none}[data-danmuku-mode2=true] .apd-config-mode .apd-mode-2-on{display:block}[data-danmuku-mode="2"] .apd-style-mode [data-mode="2"]{color:#00a1d6}[data-danmuku-mode="2"] .apd-style-mode [data-mode="2"] path{fill:#00a1d6}'},{}],"9pjcf":[function(b,H,v){H.exports='<svg class="apd-icon apd-toggle-on" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" d="M11.989 4.828c-.47 0-.975.004-1.515.012l-1.71-2.566a1.008 1.008 0 0 0-1.678 1.118l.999 1.5c-.681.018-1.403.04-2.164.068a4.013 4.013 0 0 0-3.83 3.44c-.165 1.15-.245 2.545-.245 4.185 0 1.965.115 3.67.35 5.116a4.012 4.012 0 0 0 3.763 3.363l.906.046c1.205.063 1.808.095 3.607.095a.988.988 0 0 0 0-1.975c-1.758 0-2.339-.03-3.501-.092l-.915-.047a2.037 2.037 0 0 1-1.91-1.708c-.216-1.324-.325-2.924-.325-4.798 0-1.563.076-2.864.225-3.904.14-.977.96-1.713 1.945-1.747 2.444-.087 4.465-.13 6.063-.131 1.598 0 3.62.044 6.064.13.96.034 1.71.81 1.855 1.814.075.524.113 1.962.141 3.065v.002c.01.342.017.65.025.88a.987.987 0 1 0 1.974-.068c-.008-.226-.016-.523-.025-.856v-.027c-.03-1.118-.073-2.663-.16-3.276-.273-1.906-1.783-3.438-3.74-3.507-.9-.032-1.743-.058-2.531-.078l1.05-1.46a1.008 1.008 0 0 0-1.638-1.177l-1.862 2.59c-.38-.004-.744-.007-1.088-.007h-.13Zm.521 4.775h-1.32v4.631h2.222v.847h-2.618v1.078h2.618l.003.678c.36.026.714.163 1.01.407h.11v-1.085h2.694v-1.078h-2.695v-.847H16.8v-4.63h-1.276a8.59 8.59 0 0 0 .748-1.42L15.183 7.8a14.232 14.232 0 0 1-.814 1.804h-1.518l.693-.308a8.862 8.862 0 0 0-.814-1.408l-1.045.352c.297.396.572.847.825 1.364Zm-4.18 3.564.154-1.485h1.98V8.294h-3.2v.98H9.33v1.43H7.472l-.308 3.453h2.277c0 1.166-.044 1.925-.12 2.277-.078.352-.386.528-.936.528-.308 0-.616-.022-.902-.055l.297 1.067.062.005c.285.02.551.04.818.04 1.001-.067 1.562-.419 1.694-1.057.11-.638.176-1.903.176-3.795h-2.2Zm7.458.11v-.858h-1.254v.858h1.254Zm-2.376-.858v.858h-1.199v-.858h1.2Zm-1.199-.946h1.2v-.902h-1.2v.902Zm2.321 0v-.902h1.254v.902h-1.254Z" clip-rule="evenodd"/><path fill="#00AEEC" fill-rule="evenodd" d="M22.846 14.627a1 1 0 0 0-1.412.075l-5.091 5.703-2.216-2.275-.097-.086-.008-.005a1 1 0 0 0-1.322 1.493l2.963 3.041.093.083.007.005a1 1 0 0 0 1.354-.124l5.81-6.505.08-.102.005-.008a1 1 0 0 0-.166-1.295Z" clip-rule="evenodd"/></svg>'},{}],b2dkP:[function(b,H,v){H.exports='<svg class="apd-icon apd-toggle-off" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" d="m8.085 4.891-.999-1.499a1.008 1.008 0 0 1 1.679-1.118l1.709 2.566c.54-.008 1.045-.012 1.515-.012h.13c.345 0 .707.003 1.088.007l1.862-2.59a1.008 1.008 0 0 1 1.637 1.177l-1.049 1.46c.788.02 1.631.046 2.53.078 1.958.069 3.468 1.6 3.74 3.507.088.613.13 2.158.16 3.276l.001.027c.01.333.017.63.025.856a.987.987 0 0 1-1.974.069c-.008-.23-.016-.539-.025-.881v-.002c-.028-1.103-.066-2.541-.142-3.065-.143-1.004-.895-1.78-1.854-1.813a179.14 179.14 0 0 0-6.064-.131c-1.598 0-3.619.044-6.063.13a2.037 2.037 0 0 0-1.945 1.748c-.15 1.04-.225 2.341-.225 3.904 0 1.874.11 3.474.325 4.798.154.949.95 1.66 1.91 1.708a97.58 97.58 0 0 0 5.416.139.988.988 0 0 1 0 1.975 99.78 99.78 0 0 1-5.513-.141A4.012 4.012 0 0 1 2.197 17.7c-.236-1.446-.351-3.151-.351-5.116 0-1.64.08-3.035.245-4.184A4.013 4.013 0 0 1 5.92 4.96c.761-.027 1.483-.05 2.164-.069Zm4.436 4.707h-1.32v4.63h2.222v.848h-2.618v1.078h2.431a5.01 5.01 0 0 1 3.575-3.115V9.598h-1.276a8.59 8.59 0 0 0 .748-1.42l-1.089-.384a14.232 14.232 0 0 1-.814 1.804h-1.518l.693-.308a8.862 8.862 0 0 0-.814-1.408l-1.045.352c.297.396.572.847.825 1.364Zm-4.18 3.564.154-1.485h1.98V8.289h-3.2v.979h2.067v1.43H7.483l-.308 3.454h2.277c0 1.166-.044 1.925-.12 2.277-.078.352-.386.528-.936.528-.308 0-.616-.022-.902-.055l.297 1.067.062.004c.285.02.551.04.818.04 1.001-.066 1.562-.418 1.694-1.056.11-.638.176-1.903.176-3.795h-2.2Zm7.458.11v-.858h-1.254v.858H15.8Zm-2.376-.858v.858h-1.199v-.858h1.2Zm-1.199-.946h1.2v-.902h-1.2v.902Zm2.321 0v-.902H15.8v.902h-1.254Zm3.517 10.594a4 4 0 1 0 0-8 4 4 0 0 0 0 8Zm-.002-1.502a2.5 2.5 0 0 1-2.217-3.657l3.326 3.398a2.49 2.49 0 0 1-1.109.259Zm2.5-2.5c0 .42-.103.815-.286 1.162l-3.328-3.401a2.5 2.5 0 0 1 3.614 2.239Z" clip-rule="evenodd"/></svg>'},{}],l8tyy:[function(b,H,v){H.exports='<svg class="apd-icon apd-config-icon" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" d="m15.645 4.881 1.06-1.473a.998.998 0 1 0-1.622-1.166L13.22 4.835a110.67 110.67 0 0 0-1.1-.007h-.131c-.47 0-.975.004-1.515.012L8.783 2.3A.998.998 0 0 0 7.12 3.408l.988 1.484c-.688.019-1.418.042-2.188.069a4.013 4.013 0 0 0-3.83 3.44c-.165 1.15-.245 2.545-.245 4.185 0 1.965.115 3.67.35 5.116a4.012 4.012 0 0 0 3.763 3.363 99.78 99.78 0 0 0 5.513.141.988.988 0 0 0 0-1.975 97.58 97.58 0 0 1-5.416-.139 2.037 2.037 0 0 1-1.91-1.708c-.216-1.324-.325-2.924-.325-4.798 0-1.563.076-2.864.225-3.904.14-.977.96-1.713 1.945-1.747 2.444-.087 4.465-.13 6.063-.131 1.598 0 3.62.044 6.064.13.96.034 1.71.81 1.855 1.814.075.524.113 1.962.141 3.065v.002c.005.183.01.07.014-.038.004-.096.008-.189.011-.081a.987.987 0 1 0 1.974-.069c-.004-.105-.007-.009-.011.09a2.175 2.175 0 0 1-.007.135l-.002.01a.574.574 0 0 1-.005-.091v-.027c-.03-1.118-.073-2.663-.16-3.276-.273-1.906-1.783-3.438-3.74-3.507-.905-.032-1.752-.058-2.543-.079Zm-3.113 4.703h-1.307v4.643h2.2v.04l.651-1.234c.113-.215.281-.389.482-.509v-.11h.235c.137-.049.283-.074.433-.074h1.553V9.584h-1.264a8.5 8.5 0 0 0 .741-1.405l-1.078-.381c-.24.631-.501 1.23-.806 1.786h-1.503l.686-.305a8.613 8.613 0 0 0-.806-1.394l-1.034.348c.294.392.566.839.817 1.35Zm-1.7 5.502h2.16l-.564 1.068h-1.595v-1.068Zm-2.498-1.863.152-1.561h1.96V8.289H7.277v.969h2.048v1.435h-1.84l-.306 3.51h2.254c0 1.155-.043 1.906-.12 2.255-.076.348-.38.523-.925.523-.305 0-.61-.022-.893-.055l.294 1.056.061.005c.282.02.546.039.81.039.991-.065 1.547-.414 1.677-1.046.11-.631.175-1.883.175-3.757H8.334Zm5.09-.8v.85h-1.188v-.85h1.187Zm-1.188-.955h1.187v-.893h-1.187v.893Zm2.322.007v-.893h1.241v.893h-1.241Zm.528 2.757a1.26 1.26 0 0 1 1.087-.627l4.003-.009a1.26 1.26 0 0 1 1.094.63l1.721 2.982c.226.39.225.872-.001 1.263l-1.743 3a1.26 1.26 0 0 1-1.086.628l-4.003.009a1.26 1.26 0 0 1-1.094-.63l-1.722-2.982a1.26 1.26 0 0 1 .002-1.263l1.742-3Zm1.967.858a1.26 1.26 0 0 0-1.08.614l-.903 1.513a1.26 1.26 0 0 0-.002 1.289l.885 1.492c.227.384.64.62 1.086.618l2.192-.005a1.26 1.26 0 0 0 1.08-.615l.904-1.518a1.26 1.26 0 0 0 .001-1.288l-.884-1.489a1.26 1.26 0 0 0-1.086-.616l-2.193.005Zm2.517 2.76a1.4 1.4 0 1 1-2.8 0 1.4 1.4 0 0 1 2.8 0Z" clip-rule="evenodd"/></svg>'},{}],"5iZC3":[function(b,H,v){H.exports='<svg class="apd-icon apd-style-icon" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 22 22" viewBox="0 0 22 22" width="36" height="24"><path d="M17 16H5c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zM6.96 15c.39 0 .74-.24.89-.6l.65-1.6h5l.66 1.6c.15.36.5.6.89.6.69 0 1.15-.71.88-1.34l-3.88-8.97C11.87 4.27 11.46 4 11 4s-.87.27-1.05.69l-3.88 8.97c-.27.63.2 1.34.89 1.34zM11 5.98 12.87 11H9.13L11 5.98z"/></svg>'},{}],i0Vut:[function(b,H,v){H.exports='<svg class="apd-icon apd-mode-0-off" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 15c1.487 0 2.866.464 4 1.255V7a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h11.674A7 7 0 0 1 23 15zM11 9h6a1 1 0 0 1 0 2h-6a1 1 0 0 1 0-2zm-3 2H6V9h2v2zm4 4h-2v-2h2v2zm2-1a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2h-1a1 1 0 0 1-1-1z" fill="#00AEEC"/><path d="M26.536 18.464a5 5 0 0 0-7.071 0 5 5 0 0 0 0 7.071 5 5 0 1 0 7.071-7.071zm-5.657 5.657a3 3 0 0 1-.586-3.415l4.001 4.001a3 3 0 0 1-3.415-.586zm4.829-.827-4.001-4.001a3.002 3.002 0 0 1 4.001 4.001z" fill="#00AEEC"/></svg>'},{}],hOSvZ:[function(b,H,v){H.exports='<svg class="apd-icon apd-mode-0-on" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 3H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h18a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4zM11 9h6a1 1 0 0 1 0 2h-6a1 1 0 0 1 0-2zm-3 2H6V9h2v2zm4 4h-2v-2h2v2zm9 0h-6a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2z" fill="#FFF"/></svg>'},{}],bOXC3:[function(b,H,v){H.exports='<svg class="apd-icon apd-mode-1-off" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 15c1.487 0 2.866.464 4 1.255V7a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h11.674A7 7 0 0 1 23 15zm-4-8h2v2h-2V7zM9 9H7V7h2v2zm4 0h-2V7h2v2zm2-2h2v2h-2V7z" fill="#00AEEC"/><path d="M26.536 18.464a5 5 0 0 0-7.071 0 5 5 0 0 0 0 7.071 5 5 0 1 0 7.071-7.071zm-5.657 5.657a3 3 0 0 1-.586-3.415l4.001 4.001a3 3 0 0 1-3.415-.586zm4.829-.827-4.001-4.001a3.002 3.002 0 0 1 4.001 4.001z" fill="#00AEEC"/></svg>'},{}],lKuh0:[function(b,H,v){H.exports='<svg class="apd-icon apd-mode-1-on" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 3H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h18a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4zM9 9H7V7h2v2zm4 0h-2V7h2v2zm4 0h-2V7h2v2zm4 0h-2V7h2v2z" fill="#FFF"/></svg>'},{}],eB8W6:[function(b,H,v){H.exports='<svg class="apd-icon apd-mode-2-off" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 15c1.487 0 2.866.464 4 1.255V7a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h11.674A7 7 0 0 1 23 15zM9 21H7v-2h2v2zm4 0h-2v-2h2v2z" fill="#00AEEC"/><path d="M26.536 18.464a5 5 0 0 0-7.071 0 5 5 0 0 0 0 7.071 5 5 0 1 0 7.071-7.071zm-5.657 5.657a3 3 0 0 1-.586-3.415l4.001 4.001a3 3 0 0 1-3.415-.586zm4.829-.827-4.001-4.001a3.002 3.002 0 0 1 4.001 4.001z" fill="#00AEEC"/></svg>'},{}],bpe2E:[function(b,H,v){H.exports='<svg class="apd-icon apd-mode-2-on" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" data-pointer="none" style="enable-background:new 0 0 28 28" viewBox="0 0 28 28" width="28" height="28"><path d="M23 3H5a4 4 0 0 0-4 4v14a4 4 0 0 0 4 4h18a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4zM9 21H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z" fill="#FFF"/></svg>'},{}],kL9zy:[function(b,H,v){H.exports='<svg class="apd-icon apd-check-on" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 32 32" width="32" height="32"><path d="m13 18.25-1.8-1.8c-.6-.6-1.65-.6-2.25 0s-.6 1.5 0 2.25l2.85 2.85c.318.318.762.468 1.2.448.438.02.882-.13 1.2-.448l8.85-8.85c.6-.6.6-1.65 0-2.25s-1.65-.6-2.25 0l-7.8 7.8zM8 4h16c2.21 0 4 1.79 4 4v16c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4z" fill="#00AEEC"/></svg>'},{}],"22xpM":[function(b,H,v){H.exports='<svg class="apd-icon apd-check-off" xmlns="http://www.w3.org/2000/svg" data-pointer="none" viewBox="0 0 32 32" width="32" height="32"><path d="M8 6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H8zm0-2h16c2.21 0 4 1.79 4 4v16c0 2.21-1.79 4-4 4H8c-2.21 0-4-1.79-4-4V8c0-2.21 1.79-4 4-4z" fill="#FFF"/></svg>'},{}],"8AxLD":[function(b,H,v){var f=b("@parcel/transformer-js/src/esmodule-helpers.js");f.defineInteropFlag(v),f.export(v,"default",()=>u);let m={map:(g,w,i,o,c)=>(g-w)*(c-o)/(i-w)+o,range(g,w,i){let o=Math.round(g/i)*i;return Array.from({length:Math.floor((w-g)/i)},(c,l)=>l*i+o)}},y=(g,w)=>{let i=w[0]-g[0],o=w[1]-g[1];return{length:Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),angle:Math.atan2(o,i)}};function u(g,w,i){let{query:o}=g.constructor.utils;g.controls.add({name:"heatmap",position:"top",html:"",style:{position:"absolute",top:"-100px",left:"0px",right:"0px",height:"100px",width:"100%",pointerEvents:"none"},mounted(c){let l=null,h=null;function d(_=[]){if(l=null,h=null,c.innerHTML="",!g.duration||g.option.isLive)return;let S={w:c.offsetWidth,h:c.offsetHeight},x={xMin:0,xMax:S.w,yMin:0,yMax:128,scale:.25,opacity:.2,minHeight:Math.floor(.05*S.h),sampling:Math.floor(S.w/100),smoothing:.2,flattening:.2};typeof i=="object"&&Object.assign(x,i);let E=[];if(Array.isArray(_)&&_.length)E=[..._];else{let R=g.duration/S.w;for(let $=0;$<=S.w;$+=x.sampling){let B=w.queue.filter(({time:N})=>N>$*R&&N<=($+x.sampling)*R).length;E.push([$,B])}}if(E.length===0)return;let p=E[E.length-1],L=p[0],j=p[1];L!==S.w&&E.push([S.w,j]);let O=E.map(R=>R[1]),A=(Math.min(...O)+Math.max(...O))/2;for(let R=0;R<E.length;R++){let $=E[R],B=$[1];$[1]=B*(B>A?1+x.scale:1-x.scale)+x.minHeight}let P=(R,$,B,N)=>{let z=y($||R,B||R),q=m.map(Math.cos(z.angle)*x.flattening,0,1,1,0),G=z.angle*q+(N?Math.PI:0),se=z.length*x.smoothing;return[R[0]+Math.cos(G)*se,R[1]+Math.sin(G)*se]},F=(R,$,B)=>{let N=P(B[$-1],B[$-2],R),z=P(R,B[$-1],B[$+1],!0),q=$===B.length-1?" z":"";return`C ${N[0]},${N[1]} ${z[0]},${z[1]} ${R[0]},${R[1]}${q}`},Y=E.map(R=>[m.map(R[0],x.xMin,x.xMax,0,S.w),m.map(R[1],x.yMin,x.yMax,S.h,0)]).reduce((R,$,B,N)=>B===0?`M ${N[N.length-1][0]},${S.h} L ${$[0]},${S.h} L ${$[0]},${$[1]}`:`${R} ${F($,B,N)}`,"");c.innerHTML=`<svg viewBox="0 0 ${S.w} ${S.h}"><defs><linearGradient id="heatmap-solids" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${x.opacity}" /><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${x.opacity}" id="heatmap-start" /><stop offset="0%" style="stop-color:var(--art-progress-color);stop-opacity:1" id="heatmap-stop" /><stop offset="100%" style="stop-color:var(--art-progress-color);stop-opacity:1" /></linearGradient></defs><path fill="url(#heatmap-solids)" d="${Y}"></path></svg>`,l=o("#heatmap-start",c),h=o("#heatmap-stop",c),l.setAttribute("offset",`${100*g.played}%`),h.setAttribute("offset",`${100*g.played}%`)}g.on("video:timeupdate",()=>{l&&h&&(l.setAttribute("offset",`${100*g.played}%`),h.setAttribute("offset",`${100*g.played}%`))}),g.on("setBar",(_,S)=>{l&&h&&_==="played"&&(l.setAttribute("offset",`${100*S}%`),h.setAttribute("offset",`${100*S}%`))}),g.on("ready",()=>d()),g.on("resize",()=>d()),g.on("artplayerPluginDanmuku:loaded",()=>d()),g.on("artplayerPluginDanmuku:points",_=>d(_))}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["bgm6t"],"bgm6t","parcelRequire4dc0")}(Nt,Nt.exports)),Nt.exports}var Ga=Za();const Xa=Sn(Ga),Ja={data(){return{instance:null,snackbar:!1,playLogTask:null,seek:0}},props:{video:{type:Object,default:()=>{}},picurl:{type:String,default:""},article:{type:Number,default:0}},methods:{},mounted(){this.seek=parseInt(this.$route.query.seek),isNaN(this.seek)&&(this.seek=0);const ne=this.video.id,X=this.SERVER_API_URL,b=kn();this.instance=new Ka({container:this.$refs.artRef,url:this.video.fileUrl+"?key="+encodeURIComponent(this.video.key),poster:this.picurl,flip:!0,playbackRate:!0,aspectRatio:!0,screenshot:!0,setting:!0,hotkey:!0,pip:!0,fullscreen:!0,fullscreenWeb:!0,fastForward:!0,autoOrientation:!0,contextmenu:[{html:"不挂高数出品",click:function(...H){window.open("https://www.buguagaoshu.com/")}}],plugins:[Xa({danmuku:function(){return new Promise(H=>{let v=[];fetch(`${X}/danmaku/v1?id=${ne}`,{headers:{"Content-Type":"application/json; charset=UTF-8"},method:"GET",credentials:"include"}).then(f=>f.json()).then(f=>{if(f.status===200)for(let m of f.data){let y={text:m.text,time:m.time,mode:m.type,color:m.color};v.push(y)}H(v)}).catch(f=>{console.error("HTTP Post Error:",f),H([])})})},async beforeEmit(H){if(b.userData==null)return alert("请先登录"),console.log("请先登录"),!1;const v={text:H.text,time:H.time,type:H.mode,color:H.color,id:ne};return fetch(`${X}/danmaku/v1`,{headers:{"Content-Type":"application/json; charset=UTF-8"},method:"POST",credentials:"include",body:JSON.stringify(v)}).then(f=>f.json()).then(f=>f.code==0).catch(f=>(console.error("HTTP Post Error:",f),null)),!0}})]}),this.instance.on("ready",()=>{console.log("播放器准备完成"),this.instance.seek=this.seek}),this.instance.on("play",()=>{console.info("play");const H=b.userData.id,v={articleId:this.video.articleId,fileId:1,videoTime:this.instance.currentTime,userId:H,videoId:this.video.id};H==null?clearInterval(this.playLogTask):this.playLogTask=setInterval(()=>{v.videoTime=this.instance.currentTime,this.httpPost("/user/playrecording/save",v,f=>{})},5e3)}),this.instance.on("pause",()=>{console.info("pause"),clearInterval(this.playLogTask)}),this.instance.on("destroy",()=>{console.info("destroy"),clearInterval(this.playLogTask)}),this.$nextTick(()=>{this.$emit("get-instance",this.instance)})},beforeUnmount(){this.instance&&this.instance.destroy&&this.instance.destroy(!1)}},Qa={id:"artRef",ref:"artRef"};function ei(ne,X,b,H,v,f){return je(),it("div",Qa,null,512)}const ti=ut(Ja,[["render",ei]]);var Zt={exports:{}};/*!
 * Vditor v3.10.9 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */var ni=Zt.exports,dr;function ri(){return dr||(dr=1,function(ne,X){(function(H,v){ne.exports=v()})(ni,()=>(()=>{var b={192:m=>{var y=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},u=-1,g=1,w=0;y.Diff=function(i,o){return[i,o]},y.prototype.diff_main=function(i,o,c,l){typeof l>"u"&&(this.Diff_Timeout<=0?l=Number.MAX_VALUE:l=new Date().getTime()+this.Diff_Timeout*1e3);var h=l;if(i==null||o==null)throw new Error("Null input. (diff_main)");if(i==o)return i?[new y.Diff(w,i)]:[];typeof c>"u"&&(c=!0);var d=c,_=this.diff_commonPrefix(i,o),S=i.substring(0,_);i=i.substring(_),o=o.substring(_),_=this.diff_commonSuffix(i,o);var x=i.substring(i.length-_);i=i.substring(0,i.length-_),o=o.substring(0,o.length-_);var E=this.diff_compute_(i,o,d,h);return S&&E.unshift(new y.Diff(w,S)),x&&E.push(new y.Diff(w,x)),this.diff_cleanupMerge(E),E},y.prototype.diff_compute_=function(i,o,c,l){var h;if(!i)return[new y.Diff(g,o)];if(!o)return[new y.Diff(u,i)];var d=i.length>o.length?i:o,_=i.length>o.length?o:i,S=d.indexOf(_);if(S!=-1)return h=[new y.Diff(g,d.substring(0,S)),new y.Diff(w,_),new y.Diff(g,d.substring(S+_.length))],i.length>o.length&&(h[0][0]=h[2][0]=u),h;if(_.length==1)return[new y.Diff(u,i),new y.Diff(g,o)];var x=this.diff_halfMatch_(i,o);if(x){var E=x[0],p=x[1],L=x[2],j=x[3],O=x[4],A=this.diff_main(E,L,c,l),P=this.diff_main(p,j,c,l);return A.concat([new y.Diff(w,O)],P)}return c&&i.length>100&&o.length>100?this.diff_lineMode_(i,o,l):this.diff_bisect_(i,o,l)},y.prototype.diff_lineMode_=function(i,o,c){var l=this.diff_linesToChars_(i,o);i=l.chars1,o=l.chars2;var h=l.lineArray,d=this.diff_main(i,o,!1,c);this.diff_charsToLines_(d,h),this.diff_cleanupSemantic(d),d.push(new y.Diff(w,""));for(var _=0,S=0,x=0,E="",p="";_<d.length;){switch(d[_][0]){case g:x++,p+=d[_][1];break;case u:S++,E+=d[_][1];break;case w:if(S>=1&&x>=1){d.splice(_-S-x,S+x),_=_-S-x;for(var L=this.diff_main(E,p,!1,c),j=L.length-1;j>=0;j--)d.splice(_,0,L[j]);_=_+L.length}x=0,S=0,E="",p="";break}_++}return d.pop(),d},y.prototype.diff_bisect_=function(i,o,c){for(var l=i.length,h=o.length,d=Math.ceil((l+h)/2),_=d,S=2*d,x=new Array(S),E=new Array(S),p=0;p<S;p++)x[p]=-1,E[p]=-1;x[_+1]=0,E[_+1]=0;for(var L=l-h,j=L%2!=0,O=0,A=0,P=0,F=0,Y=0;Y<d&&!(new Date().getTime()>c);Y++){for(var R=-Y+O;R<=Y-A;R+=2){var $=_+R,B;R==-Y||R!=Y&&x[$-1]<x[$+1]?B=x[$+1]:B=x[$-1]+1;for(var N=B-R;B<l&&N<h&&i.charAt(B)==o.charAt(N);)B++,N++;if(x[$]=B,B>l)A+=2;else if(N>h)O+=2;else if(j){var z=_+L-R;if(z>=0&&z<S&&E[z]!=-1){var q=l-E[z];if(B>=q)return this.diff_bisectSplit_(i,o,B,N,c)}}}for(var G=-Y+P;G<=Y-F;G+=2){var z=_+G,q;G==-Y||G!=Y&&E[z-1]<E[z+1]?q=E[z+1]:q=E[z-1]+1;for(var se=q-G;q<l&&se<h&&i.charAt(l-q-1)==o.charAt(h-se-1);)q++,se++;if(E[z]=q,q>l)F+=2;else if(se>h)P+=2;else if(!j){var $=_+L-G;if($>=0&&$<S&&x[$]!=-1){var B=x[$],N=_+B-$;if(q=l-q,B>=q)return this.diff_bisectSplit_(i,o,B,N,c)}}}}return[new y.Diff(u,i),new y.Diff(g,o)]},y.prototype.diff_bisectSplit_=function(i,o,c,l,h){var d=i.substring(0,c),_=o.substring(0,l),S=i.substring(c),x=o.substring(l),E=this.diff_main(d,_,!1,h),p=this.diff_main(S,x,!1,h);return E.concat(p)},y.prototype.diff_linesToChars_=function(i,o){var c=[],l={};c[0]="";function h(x){for(var E="",p=0,L=-1,j=c.length;L<x.length-1;){L=x.indexOf(`
`,p),L==-1&&(L=x.length-1);var O=x.substring(p,L+1);(l.hasOwnProperty?l.hasOwnProperty(O):l[O]!==void 0)?E+=String.fromCharCode(l[O]):(j==d&&(O=x.substring(p),L=x.length),E+=String.fromCharCode(j),l[O]=j,c[j++]=O),p=L+1}return E}var d=4e4,_=h(i);d=65535;var S=h(o);return{chars1:_,chars2:S,lineArray:c}},y.prototype.diff_charsToLines_=function(i,o){for(var c=0;c<i.length;c++){for(var l=i[c][1],h=[],d=0;d<l.length;d++)h[d]=o[l.charCodeAt(d)];i[c][1]=h.join("")}},y.prototype.diff_commonPrefix=function(i,o){if(!i||!o||i.charAt(0)!=o.charAt(0))return 0;for(var c=0,l=Math.min(i.length,o.length),h=l,d=0;c<h;)i.substring(d,h)==o.substring(d,h)?(c=h,d=c):l=h,h=Math.floor((l-c)/2+c);return h},y.prototype.diff_commonSuffix=function(i,o){if(!i||!o||i.charAt(i.length-1)!=o.charAt(o.length-1))return 0;for(var c=0,l=Math.min(i.length,o.length),h=l,d=0;c<h;)i.substring(i.length-h,i.length-d)==o.substring(o.length-h,o.length-d)?(c=h,d=c):l=h,h=Math.floor((l-c)/2+c);return h},y.prototype.diff_commonOverlap_=function(i,o){var c=i.length,l=o.length;if(c==0||l==0)return 0;c>l?i=i.substring(c-l):c<l&&(o=o.substring(0,c));var h=Math.min(c,l);if(i==o)return h;for(var d=0,_=1;;){var S=i.substring(h-_),x=o.indexOf(S);if(x==-1)return d;_+=x,(x==0||i.substring(h-_)==o.substring(0,_))&&(d=_,_++)}},y.prototype.diff_halfMatch_=function(i,o){if(this.Diff_Timeout<=0)return null;var c=i.length>o.length?i:o,l=i.length>o.length?o:i;if(c.length<4||l.length*2<c.length)return null;var h=this;function d(A,P,F){for(var Y=A.substring(F,F+Math.floor(A.length/4)),R=-1,$="",B,N,z,q;(R=P.indexOf(Y,R+1))!=-1;){var G=h.diff_commonPrefix(A.substring(F),P.substring(R)),se=h.diff_commonSuffix(A.substring(0,F),P.substring(0,R));$.length<se+G&&($=P.substring(R-se,R)+P.substring(R,R+G),B=A.substring(0,F-se),N=A.substring(F+G),z=P.substring(0,R-se),q=P.substring(R+G))}return $.length*2>=A.length?[B,N,z,q,$]:null}var _=d(c,l,Math.ceil(c.length/4)),S=d(c,l,Math.ceil(c.length/2)),x;if(!_&&!S)return null;S?_?x=_[4].length>S[4].length?_:S:x=S:x=_;var E,p,L,j;i.length>o.length?(E=x[0],p=x[1],L=x[2],j=x[3]):(L=x[0],j=x[1],E=x[2],p=x[3]);var O=x[4];return[E,p,L,j,O]},y.prototype.diff_cleanupSemantic=function(i){for(var o=!1,c=[],l=0,h=null,d=0,_=0,S=0,x=0,E=0;d<i.length;)i[d][0]==w?(c[l++]=d,_=x,S=E,x=0,E=0,h=i[d][1]):(i[d][0]==g?x+=i[d][1].length:E+=i[d][1].length,h&&h.length<=Math.max(_,S)&&h.length<=Math.max(x,E)&&(i.splice(c[l-1],0,new y.Diff(u,h)),i[c[l-1]+1][0]=g,l--,l--,d=l>0?c[l-1]:-1,_=0,S=0,x=0,E=0,h=null,o=!0)),d++;for(o&&this.diff_cleanupMerge(i),this.diff_cleanupSemanticLossless(i),d=1;d<i.length;){if(i[d-1][0]==u&&i[d][0]==g){var p=i[d-1][1],L=i[d][1],j=this.diff_commonOverlap_(p,L),O=this.diff_commonOverlap_(L,p);j>=O?(j>=p.length/2||j>=L.length/2)&&(i.splice(d,0,new y.Diff(w,L.substring(0,j))),i[d-1][1]=p.substring(0,p.length-j),i[d+1][1]=L.substring(j),d++):(O>=p.length/2||O>=L.length/2)&&(i.splice(d,0,new y.Diff(w,p.substring(0,O))),i[d-1][0]=g,i[d-1][1]=L.substring(0,L.length-O),i[d+1][0]=u,i[d+1][1]=p.substring(O),d++),d++}d++}},y.prototype.diff_cleanupSemanticLossless=function(i){function o(O,A){if(!O||!A)return 6;var P=O.charAt(O.length-1),F=A.charAt(0),Y=P.match(y.nonAlphaNumericRegex_),R=F.match(y.nonAlphaNumericRegex_),$=Y&&P.match(y.whitespaceRegex_),B=R&&F.match(y.whitespaceRegex_),N=$&&P.match(y.linebreakRegex_),z=B&&F.match(y.linebreakRegex_),q=N&&O.match(y.blanklineEndRegex_),G=z&&A.match(y.blanklineStartRegex_);return q||G?5:N||z?4:Y&&!$&&B?3:$||B?2:Y||R?1:0}for(var c=1;c<i.length-1;){if(i[c-1][0]==w&&i[c+1][0]==w){var l=i[c-1][1],h=i[c][1],d=i[c+1][1],_=this.diff_commonSuffix(l,h);if(_){var S=h.substring(h.length-_);l=l.substring(0,l.length-_),h=S+h.substring(0,h.length-_),d=S+d}for(var x=l,E=h,p=d,L=o(l,h)+o(h,d);h.charAt(0)===d.charAt(0);){l+=h.charAt(0),h=h.substring(1)+d.charAt(0),d=d.substring(1);var j=o(l,h)+o(h,d);j>=L&&(L=j,x=l,E=h,p=d)}i[c-1][1]!=x&&(x?i[c-1][1]=x:(i.splice(c-1,1),c--),i[c][1]=E,p?i[c+1][1]=p:(i.splice(c+1,1),c--))}c++}},y.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,y.whitespaceRegex_=/\s/,y.linebreakRegex_=/[\r\n]/,y.blanklineEndRegex_=/\n\r?\n$/,y.blanklineStartRegex_=/^\r?\n\r?\n/,y.prototype.diff_cleanupEfficiency=function(i){for(var o=!1,c=[],l=0,h=null,d=0,_=!1,S=!1,x=!1,E=!1;d<i.length;)i[d][0]==w?(i[d][1].length<this.Diff_EditCost&&(x||E)?(c[l++]=d,_=x,S=E,h=i[d][1]):(l=0,h=null),x=E=!1):(i[d][0]==u?E=!0:x=!0,h&&(_&&S&&x&&E||h.length<this.Diff_EditCost/2&&_+S+x+E==3)&&(i.splice(c[l-1],0,new y.Diff(u,h)),i[c[l-1]+1][0]=g,l--,h=null,_&&S?(x=E=!0,l=0):(l--,d=l>0?c[l-1]:-1,x=E=!1),o=!0)),d++;o&&this.diff_cleanupMerge(i)},y.prototype.diff_cleanupMerge=function(i){i.push(new y.Diff(w,""));for(var o=0,c=0,l=0,h="",d="",_;o<i.length;)switch(i[o][0]){case g:l++,d+=i[o][1],o++;break;case u:c++,h+=i[o][1],o++;break;case w:c+l>1?(c!==0&&l!==0&&(_=this.diff_commonPrefix(d,h),_!==0&&(o-c-l>0&&i[o-c-l-1][0]==w?i[o-c-l-1][1]+=d.substring(0,_):(i.splice(0,0,new y.Diff(w,d.substring(0,_))),o++),d=d.substring(_),h=h.substring(_)),_=this.diff_commonSuffix(d,h),_!==0&&(i[o][1]=d.substring(d.length-_)+i[o][1],d=d.substring(0,d.length-_),h=h.substring(0,h.length-_))),o-=c+l,i.splice(o,c+l),h.length&&(i.splice(o,0,new y.Diff(u,h)),o++),d.length&&(i.splice(o,0,new y.Diff(g,d)),o++),o++):o!==0&&i[o-1][0]==w?(i[o-1][1]+=i[o][1],i.splice(o,1)):o++,l=0,c=0,h="",d="";break}i[i.length-1][1]===""&&i.pop();var S=!1;for(o=1;o<i.length-1;)i[o-1][0]==w&&i[o+1][0]==w&&(i[o][1].substring(i[o][1].length-i[o-1][1].length)==i[o-1][1]?(i[o][1]=i[o-1][1]+i[o][1].substring(0,i[o][1].length-i[o-1][1].length),i[o+1][1]=i[o-1][1]+i[o+1][1],i.splice(o-1,1),S=!0):i[o][1].substring(0,i[o+1][1].length)==i[o+1][1]&&(i[o-1][1]+=i[o+1][1],i[o][1]=i[o][1].substring(i[o+1][1].length)+i[o+1][1],i.splice(o+1,1),S=!0)),o++;S&&this.diff_cleanupMerge(i)},y.prototype.diff_xIndex=function(i,o){var c=0,l=0,h=0,d=0,_;for(_=0;_<i.length&&(i[_][0]!==g&&(c+=i[_][1].length),i[_][0]!==u&&(l+=i[_][1].length),!(c>o));_++)h=c,d=l;return i.length!=_&&i[_][0]===u?d:d+(o-h)},y.prototype.diff_prettyHtml=function(i){for(var o=[],c=/&/g,l=/</g,h=/>/g,d=/\n/g,_=0;_<i.length;_++){var S=i[_][0],x=i[_][1],E=x.replace(c,"&amp;").replace(l,"&lt;").replace(h,"&gt;").replace(d,"&para;<br>");switch(S){case g:o[_]='<ins style="background:#e6ffe6;">'+E+"</ins>";break;case u:o[_]='<del style="background:#ffe6e6;">'+E+"</del>";break;case w:o[_]="<span>"+E+"</span>";break}}return o.join("")},y.prototype.diff_text1=function(i){for(var o=[],c=0;c<i.length;c++)i[c][0]!==g&&(o[c]=i[c][1]);return o.join("")},y.prototype.diff_text2=function(i){for(var o=[],c=0;c<i.length;c++)i[c][0]!==u&&(o[c]=i[c][1]);return o.join("")},y.prototype.diff_levenshtein=function(i){for(var o=0,c=0,l=0,h=0;h<i.length;h++){var d=i[h][0],_=i[h][1];switch(d){case g:c+=_.length;break;case u:l+=_.length;break;case w:o+=Math.max(c,l),c=0,l=0;break}}return o+=Math.max(c,l),o},y.prototype.diff_toDelta=function(i){for(var o=[],c=0;c<i.length;c++)switch(i[c][0]){case g:o[c]="+"+encodeURI(i[c][1]);break;case u:o[c]="-"+i[c][1].length;break;case w:o[c]="="+i[c][1].length;break}return o.join("	").replace(/%20/g," ")},y.prototype.diff_fromDelta=function(i,o){for(var c=[],l=0,h=0,d=o.split(/\t/g),_=0;_<d.length;_++){var S=d[_].substring(1);switch(d[_].charAt(0)){case"+":try{c[l++]=new y.Diff(g,decodeURI(S))}catch{throw new Error("Illegal escape in diff_fromDelta: "+S)}break;case"-":case"=":var x=parseInt(S,10);if(isNaN(x)||x<0)throw new Error("Invalid number in diff_fromDelta: "+S);var E=i.substring(h,h+=x);d[_].charAt(0)=="="?c[l++]=new y.Diff(w,E):c[l++]=new y.Diff(u,E);break;default:if(d[_])throw new Error("Invalid diff operation in diff_fromDelta: "+d[_])}}if(h!=i.length)throw new Error("Delta length ("+h+") does not equal source text length ("+i.length+").");return c},y.prototype.match_main=function(i,o,c){if(i==null||o==null||c==null)throw new Error("Null input. (match_main)");return c=Math.max(0,Math.min(c,i.length)),i==o?0:i.length?i.substring(c,c+o.length)==o?c:this.match_bitap_(i,o,c):-1},y.prototype.match_bitap_=function(i,o,c){if(o.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var l=this.match_alphabet_(o),h=this;function d(B,N){var z=B/o.length,q=Math.abs(c-N);return h.Match_Distance?z+q/h.Match_Distance:q?1:z}var _=this.Match_Threshold,S=i.indexOf(o,c);S!=-1&&(_=Math.min(d(0,S),_),S=i.lastIndexOf(o,c+o.length),S!=-1&&(_=Math.min(d(0,S),_)));var x=1<<o.length-1;S=-1;for(var E,p,L=o.length+i.length,j,O=0;O<o.length;O++){for(E=0,p=L;E<p;)d(O,c+p)<=_?E=p:L=p,p=Math.floor((L-E)/2+E);L=p;var A=Math.max(1,c-p+1),P=Math.min(c+p,i.length)+o.length,F=Array(P+2);F[P+1]=(1<<O)-1;for(var Y=P;Y>=A;Y--){var R=l[i.charAt(Y-1)];if(O===0?F[Y]=(F[Y+1]<<1|1)&R:F[Y]=(F[Y+1]<<1|1)&R|((j[Y+1]|j[Y])<<1|1)|j[Y+1],F[Y]&x){var $=d(O,Y-1);if($<=_)if(_=$,S=Y-1,S>c)A=Math.max(1,2*c-S);else break}}if(d(O+1,c)>_)break;j=F}return S},y.prototype.match_alphabet_=function(i){for(var o={},c=0;c<i.length;c++)o[i.charAt(c)]=0;for(var c=0;c<i.length;c++)o[i.charAt(c)]|=1<<i.length-c-1;return o},y.prototype.patch_addContext_=function(i,o){if(o.length!=0){if(i.start2===null)throw Error("patch not initialized");for(var c=o.substring(i.start2,i.start2+i.length1),l=0;o.indexOf(c)!=o.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)l+=this.Patch_Margin,c=o.substring(i.start2-l,i.start2+i.length1+l);l+=this.Patch_Margin;var h=o.substring(i.start2-l,i.start2);h&&i.diffs.unshift(new y.Diff(w,h));var d=o.substring(i.start2+i.length1,i.start2+i.length1+l);d&&i.diffs.push(new y.Diff(w,d)),i.start1-=h.length,i.start2-=h.length,i.length1+=h.length+d.length,i.length2+=h.length+d.length}},y.prototype.patch_make=function(i,o,c){var l,h;if(typeof i=="string"&&typeof o=="string"&&typeof c>"u")l=i,h=this.diff_main(l,o,!0),h.length>2&&(this.diff_cleanupSemantic(h),this.diff_cleanupEfficiency(h));else if(i&&typeof i=="object"&&typeof o>"u"&&typeof c>"u")h=i,l=this.diff_text1(h);else if(typeof i=="string"&&o&&typeof o=="object"&&typeof c>"u")l=i,h=o;else if(typeof i=="string"&&typeof o=="string"&&c&&typeof c=="object")l=i,h=c;else throw new Error("Unknown call format to patch_make.");if(h.length===0)return[];for(var d=[],_=new y.patch_obj,S=0,x=0,E=0,p=l,L=l,j=0;j<h.length;j++){var O=h[j][0],A=h[j][1];switch(!S&&O!==w&&(_.start1=x,_.start2=E),O){case g:_.diffs[S++]=h[j],_.length2+=A.length,L=L.substring(0,E)+A+L.substring(E);break;case u:_.length1+=A.length,_.diffs[S++]=h[j],L=L.substring(0,E)+L.substring(E+A.length);break;case w:A.length<=2*this.Patch_Margin&&S&&h.length!=j+1?(_.diffs[S++]=h[j],_.length1+=A.length,_.length2+=A.length):A.length>=2*this.Patch_Margin&&S&&(this.patch_addContext_(_,p),d.push(_),_=new y.patch_obj,S=0,p=L,x=E);break}O!==g&&(x+=A.length),O!==u&&(E+=A.length)}return S&&(this.patch_addContext_(_,p),d.push(_)),d},y.prototype.patch_deepCopy=function(i){for(var o=[],c=0;c<i.length;c++){var l=i[c],h=new y.patch_obj;h.diffs=[];for(var d=0;d<l.diffs.length;d++)h.diffs[d]=new y.Diff(l.diffs[d][0],l.diffs[d][1]);h.start1=l.start1,h.start2=l.start2,h.length1=l.length1,h.length2=l.length2,o[c]=h}return o},y.prototype.patch_apply=function(i,o){if(i.length==0)return[o,[]];i=this.patch_deepCopy(i);var c=this.patch_addPadding(i);o=c+o+c,this.patch_splitMax(i);for(var l=0,h=[],d=0;d<i.length;d++){var _=i[d].start2+l,S=this.diff_text1(i[d].diffs),x,E=-1;if(S.length>this.Match_MaxBits?(x=this.match_main(o,S.substring(0,this.Match_MaxBits),_),x!=-1&&(E=this.match_main(o,S.substring(S.length-this.Match_MaxBits),_+S.length-this.Match_MaxBits),(E==-1||x>=E)&&(x=-1))):x=this.match_main(o,S,_),x==-1)h[d]=!1,l-=i[d].length2-i[d].length1;else{h[d]=!0,l=x-_;var p;if(E==-1?p=o.substring(x,x+S.length):p=o.substring(x,E+this.Match_MaxBits),S==p)o=o.substring(0,x)+this.diff_text2(i[d].diffs)+o.substring(x+S.length);else{var L=this.diff_main(S,p,!1);if(S.length>this.Match_MaxBits&&this.diff_levenshtein(L)/S.length>this.Patch_DeleteThreshold)h[d]=!1;else{this.diff_cleanupSemanticLossless(L);for(var j=0,O,A=0;A<i[d].diffs.length;A++){var P=i[d].diffs[A];P[0]!==w&&(O=this.diff_xIndex(L,j)),P[0]===g?o=o.substring(0,x+O)+P[1]+o.substring(x+O):P[0]===u&&(o=o.substring(0,x+O)+o.substring(x+this.diff_xIndex(L,j+P[1].length))),P[0]!==u&&(j+=P[1].length)}}}}}return o=o.substring(c.length,o.length-c.length),[o,h]},y.prototype.patch_addPadding=function(i){for(var o=this.Patch_Margin,c="",l=1;l<=o;l++)c+=String.fromCharCode(l);for(var l=0;l<i.length;l++)i[l].start1+=o,i[l].start2+=o;var h=i[0],d=h.diffs;if(d.length==0||d[0][0]!=w)d.unshift(new y.Diff(w,c)),h.start1-=o,h.start2-=o,h.length1+=o,h.length2+=o;else if(o>d[0][1].length){var _=o-d[0][1].length;d[0][1]=c.substring(d[0][1].length)+d[0][1],h.start1-=_,h.start2-=_,h.length1+=_,h.length2+=_}if(h=i[i.length-1],d=h.diffs,d.length==0||d[d.length-1][0]!=w)d.push(new y.Diff(w,c)),h.length1+=o,h.length2+=o;else if(o>d[d.length-1][1].length){var _=o-d[d.length-1][1].length;d[d.length-1][1]+=c.substring(0,_),h.length1+=_,h.length2+=_}return c},y.prototype.patch_splitMax=function(i){for(var o=this.Match_MaxBits,c=0;c<i.length;c++)if(!(i[c].length1<=o)){var l=i[c];i.splice(c--,1);for(var h=l.start1,d=l.start2,_="";l.diffs.length!==0;){var S=new y.patch_obj,x=!0;for(S.start1=h-_.length,S.start2=d-_.length,_!==""&&(S.length1=S.length2=_.length,S.diffs.push(new y.Diff(w,_)));l.diffs.length!==0&&S.length1<o-this.Patch_Margin;){var E=l.diffs[0][0],p=l.diffs[0][1];E===g?(S.length2+=p.length,d+=p.length,S.diffs.push(l.diffs.shift()),x=!1):E===u&&S.diffs.length==1&&S.diffs[0][0]==w&&p.length>2*o?(S.length1+=p.length,h+=p.length,x=!1,S.diffs.push(new y.Diff(E,p)),l.diffs.shift()):(p=p.substring(0,o-S.length1-this.Patch_Margin),S.length1+=p.length,h+=p.length,E===w?(S.length2+=p.length,d+=p.length):x=!1,S.diffs.push(new y.Diff(E,p)),p==l.diffs[0][1]?l.diffs.shift():l.diffs[0][1]=l.diffs[0][1].substring(p.length))}_=this.diff_text2(S.diffs),_=_.substring(_.length-this.Patch_Margin);var L=this.diff_text1(l.diffs).substring(0,this.Patch_Margin);L!==""&&(S.length1+=L.length,S.length2+=L.length,S.diffs.length!==0&&S.diffs[S.diffs.length-1][0]===w?S.diffs[S.diffs.length-1][1]+=L:S.diffs.push(new y.Diff(w,L))),x||i.splice(++c,0,S)}}},y.prototype.patch_toText=function(i){for(var o=[],c=0;c<i.length;c++)o[c]=i[c];return o.join("")},y.prototype.patch_fromText=function(i){var o=[];if(!i)return o;for(var c=i.split(`
`),l=0,h=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;l<c.length;){var d=c[l].match(h);if(!d)throw new Error("Invalid patch string: "+c[l]);var _=new y.patch_obj;for(o.push(_),_.start1=parseInt(d[1],10),d[2]===""?(_.start1--,_.length1=1):d[2]=="0"?_.length1=0:(_.start1--,_.length1=parseInt(d[2],10)),_.start2=parseInt(d[3],10),d[4]===""?(_.start2--,_.length2=1):d[4]=="0"?_.length2=0:(_.start2--,_.length2=parseInt(d[4],10)),l++;l<c.length;){var S=c[l].charAt(0);try{var x=decodeURI(c[l].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+x)}if(S=="-")_.diffs.push(new y.Diff(u,x));else if(S=="+")_.diffs.push(new y.Diff(g,x));else if(S==" ")_.diffs.push(new y.Diff(w,x));else{if(S=="@")break;if(S!=="")throw new Error('Invalid patch mode "'+S+'" in: '+x)}l++}}return o},y.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},y.patch_obj.prototype.toString=function(){var i,o;this.length1===0?i=this.start1+",0":this.length1==1?i=this.start1+1:i=this.start1+1+","+this.length1,this.length2===0?o=this.start2+",0":this.length2==1?o=this.start2+1:o=this.start2+1+","+this.length2;for(var c=["@@ -"+i+" +"+o+` @@
`],l,h=0;h<this.diffs.length;h++){switch(this.diffs[h][0]){case g:l="+";break;case u:l="-";break;case w:l=" ";break}c[h+1]=l+encodeURI(this.diffs[h][1])+`
`}return c.join("").replace(/%20/g," ")},m.exports=y,m.exports.diff_match_patch=y,m.exports.DIFF_DELETE=u,m.exports.DIFF_INSERT=g,m.exports.DIFF_EQUAL=w},923:(m,y,u)=>{u.d(y,{default:()=>Ie});var g=u(288),w=u(59),i=u(784),o=u(51),c=u(500),l=u(339),h=u(108),d=function(Z){Z===void 0&&(Z=document);var ge=function(re){var K=document.createElement("img");K.src=re.getAttribute("data-src"),K.addEventListener("load",function(){!re.getAttribute("style")&&!re.getAttribute("class")&&!re.getAttribute("width")&&!re.getAttribute("height")&&K.naturalHeight>K.naturalWidth&&K.naturalWidth/K.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&K.naturalHeight>window.innerHeight-40&&(re.style.height=window.innerHeight-40+"px"),re.src=K.src}),re.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return Z.querySelectorAll("img").forEach(function(re){re.getAttribute("data-src")&&ge(re)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),Z.querySelectorAll("img").forEach(function(re){window.vditorImageIntersectionObserver.observe(re)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(re){re.forEach(function(K){(typeof K.isIntersecting>"u"?K.intersectionRatio!==0:K.isIntersecting)&&K.target.getAttribute("data-src")&&ge(K.target)})}),Z.querySelectorAll("img").forEach(function(re){window.vditorImageIntersectionObserver.observe(re)}))},_=u(960),S=u(0),x=u(975),E=u(931),p=u(597),L=u(162),j=u(70),O=u(591),A=u(913),P=u(873),F=u(161),Y=u(598),R=u(905),$=function(Z){document.querySelectorAll(".vditor-anchor").forEach(function(ge){Z===1&&ge.classList.add("vditor-anchor--left"),ge.onclick=function(){var re=ge.getAttribute("href").substr(1),K=document.getElementById("vditorAnchor-"+re).offsetTop;document.querySelector("html").scrollTop=K}}),window.onhashchange=function(){var ge=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));ge&&(document.querySelector("html").scrollTop=ge.offsetTop)}},B=u(796),N=u(827),z=function(Z,ge){if(ge===void 0&&(ge="zh_CN"),!(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")){var re=function(){var Re=speechSynthesis.getVoices(),pe,le;return Re.forEach(function(ze){ze.lang===ge.replace("_","-")&&(pe=ze),ze.default&&(le=ze)}),pe||(pe=le),pe},K='<svg><use xlink:href="#vditor-icon-play"></use></svg>',Se='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(K='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',Se='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var oe=document.querySelector(".vditor-speech");oe||(oe=document.createElement("button"),oe.className="vditor-speech",Z.insertAdjacentElement("beforeend",oe),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=re));var Ae=re(),ve=new SpeechSynthesisUtterance;ve.voice=Ae,ve.onend=ve.onerror=function(){oe.style.display="none",speechSynthesis.cancel(),oe.classList.remove("vditor-speech--current"),oe.innerHTML=K},Z.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(Re){var pe=Re.target;if(pe.classList.contains("vditor-speech")||pe.parentElement.classList.contains("vditor-speech")){oe.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),oe.innerHTML=Se):(speechSynthesis.pause(),oe.innerHTML=K)):(ve.text=oe.getAttribute("data-text"),speechSynthesis.speak(ve),oe.classList.add("vditor-speech--current"),oe.innerHTML=Se),(0,N.jl)(window.vditorSpeechRange),Z.focus();return}if(oe.style.display="none",speechSynthesis.cancel(),oe.classList.remove("vditor-speech--current"),oe.innerHTML=K,getSelection().rangeCount!==0){var le=getSelection().getRangeAt(0),ze=le.toString().trim();if(ze){window.vditorSpeechRange=le.cloneRange();var Ne=le.getBoundingClientRect();oe.innerHTML=K,oe.style.display="block",oe.style.top=Ne.top+Ne.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0?oe.style.left=Re.changedTouches[Re.changedTouches.length-1].pageX+2+"px":oe.style.left=Re.clientX+2+"px",oe.setAttribute("data-text",ze)}}})}},q=function(Z,ge,re,K){function Se(oe){return oe instanceof re?oe:new re(function(Ae){Ae(oe)})}return new(re||(re=Promise))(function(oe,Ae){function ve(le){try{pe(K.next(le))}catch(ze){Ae(ze)}}function Re(le){try{pe(K.throw(le))}catch(ze){Ae(ze)}}function pe(le){le.done?oe(le.value):Se(le.value).then(ve,Re)}pe((K=K.apply(Z,ge||[])).next())})},G=function(Z,ge){var re={label:0,sent:function(){if(oe[0]&1)throw oe[1];return oe[1]},trys:[],ops:[]},K,Se,oe,Ae;return Ae={next:ve(0),throw:ve(1),return:ve(2)},typeof Symbol=="function"&&(Ae[Symbol.iterator]=function(){return this}),Ae;function ve(pe){return function(le){return Re([pe,le])}}function Re(pe){if(K)throw new TypeError("Generator is already executing.");for(;Ae&&(Ae=0,pe[0]&&(re=0)),re;)try{if(K=1,Se&&(oe=pe[0]&2?Se.return:pe[0]?Se.throw||((oe=Se.return)&&oe.call(Se),0):Se.next)&&!(oe=oe.call(Se,pe[1])).done)return oe;switch(Se=0,oe&&(pe=[pe[0]&2,oe.value]),pe[0]){case 0:case 1:oe=pe;break;case 4:return re.label++,{value:pe[1],done:!1};case 5:re.label++,Se=pe[1],pe=[0];continue;case 7:pe=re.ops.pop(),re.trys.pop();continue;default:if(oe=re.trys,!(oe=oe.length>0&&oe[oe.length-1])&&(pe[0]===6||pe[0]===2)){re=0;continue}if(pe[0]===3&&(!oe||pe[1]>oe[0]&&pe[1]<oe[3])){re.label=pe[1];break}if(pe[0]===6&&re.label<oe[1]){re.label=oe[1],oe=pe;break}if(oe&&re.label<oe[2]){re.label=oe[2],re.ops.push(pe);break}oe[2]&&re.ops.pop(),re.trys.pop();continue}pe=ge.call(Z,re)}catch(le){pe=[6,le],Se=0}finally{K=oe=0}if(pe[0]&5)throw pe[1];return{value:pe[0]?pe[1]:void 0,done:!0}}},se=function(Z){var ge,re={anchor:0,cdn:A.Y.CDN,customEmoji:{},emojiPath:"".concat(A.Y.CDN,"/dist/images/emoji"),hljs:A.Y.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:A.Y.MARKDOWN_OPTIONS,math:A.Y.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:A.Y.THEME_OPTIONS};return Z.cdn&&(!((ge=Z.theme)===null||ge===void 0)&&ge.path||(re.theme.path="".concat(Z.cdn,"/dist/css/content-theme")),Z.emojiPath||(re.emojiPath="".concat(Z.cdn,"/dist/images/emoji"))),(0,R.h)(re,Z)},fe=function(Z,ge){var re=se(ge);return(0,F.Z)("".concat(re.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){var K=(0,B.X)({autoSpace:re.markdown.autoSpace,gfmAutoLink:re.markdown.gfmAutoLink,codeBlockPreview:re.markdown.codeBlockPreview,emojiSite:re.emojiPath,emojis:re.customEmoji,fixTermTypo:re.markdown.fixTermTypo,footnotes:re.markdown.footnotes,headingAnchor:re.anchor!==0,inlineMathDigit:re.math.inlineDigit,lazyLoadImage:re.lazyLoadImage,linkBase:re.markdown.linkBase,linkPrefix:re.markdown.linkPrefix,listStyle:re.markdown.listStyle,mark:re.markdown.mark,mathBlockPreview:re.markdown.mathBlockPreview,paragraphBeginningSpace:re.markdown.paragraphBeginningSpace,sanitize:re.markdown.sanitize,toc:re.markdown.toc});return ge!=null&&ge.renderers&&K.SetJSRenderers({renderers:{Md2HTML:ge.renderers}}),K.SetHeadingID(!0),K.Md2HTML(Z)})},I=function(Z,ge,re){return q(void 0,void 0,void 0,function(){var K,Se,oe,Ae;return G(this,function(ve){switch(ve.label){case 0:return K=se(re),[4,fe(ge,K)];case 1:if(Se=ve.sent(),K.transform&&(Se=K.transform(Se)),Z.innerHTML=Se,Z.classList.add("vditor-reset"),K.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(K.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return oe="vditorI18nScript",Ae=oe+K.lang,document.querySelectorAll('head script[id^="'.concat(oe,'"]')).forEach(function(Re){Re.id!==Ae&&document.head.removeChild(Re)}),[4,(0,F.Z)("".concat(K.cdn,"/dist/js/i18n/").concat(K.lang,".js"),Ae)];case 3:ve.sent(),ve.label=4;case 4:return[3,6];case 5:window.VditorI18n=K.i18n,ve.label=6;case 6:return K.icon?[4,(0,F.Z)("".concat(K.cdn,"/dist/js/icons/").concat(K.icon,".js"),"vditorIconScript")]:[3,8];case 7:ve.sent(),ve.label=8;case 8:return(0,P.H)(K.theme.current,K.theme.path),K.anchor===1&&Z.classList.add("vditor-reset--anchor"),(0,o.o)(Z,K.hljs),(0,h.$)(K.hljs,Z,K.cdn),(0,_.T)(Z,{cdn:K.cdn,math:K.math}),(0,x.e)(Z,K.cdn,K.mode),(0,E.Y)(Z,K.cdn,K.mode),(0,p.K)(Z,K.cdn),(0,c.D)(Z,K.cdn),(0,l.m)(Z,K.cdn),(0,i.v)(Z,K.cdn,K.mode),(0,L.l)(Z,K.cdn,K.mode),(0,O.M)(Z,K.cdn),(0,g.$)(Z,K.cdn),K.render.media.enable&&(0,S.l)(Z),K.speech.enable&&z(Z),K.anchor!==0&&$(K.anchor),K.after&&K.after(),K.lazyLoadImage&&d(Z),Z.addEventListener("click",function(Re){var pe=(0,Y._Y)(Re.target,"SPAN");if(pe&&(0,Y.KJ)(pe,"vditor-toc")){var le=Z.querySelector("#"+pe.getAttribute("data-target-id"));le&&window.scrollTo(window.scrollX,le.offsetTop);return}}),[2]}})})},ke=u(726),Ee=u(13),Oe=function(){function Z(){}return Z.adapterRender=w,Z.previewImage=ke.o,Z.codeRender=o.o,Z.graphvizRender=l.m,Z.highlightRender=h.$,Z.mathRender=_.T,Z.mermaidRender=x.e,Z.SMILESRender=E.Y,Z.markmapRender=p.K,Z.flowchartRender=c.D,Z.chartRender=i.v,Z.abcRender=g.$,Z.mindmapRender=L.l,Z.plantumlRender=O.M,Z.outlineRender=j.N,Z.mediaRender=S.l,Z.speechRender=z,Z.lazyLoadImageRender=d,Z.md2html=fe,Z.preview=I,Z.setCodeTheme=Ee.h,Z.setContentTheme=P.H,Z}();const Ie=Oe},913:(m,y,u)=>{u.d(y,{Y:()=>w,g:()=>g});var g="3.10.9",w=function(){function i(){}return i.ZWSP="​",i.DROP_EDITOR="application/editor",i.MOBILE_WIDTH=520,i.CLASS_MENU_DISABLED="vditor-menu--disabled",i.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],i.CODE_THEME=["a11y-dark","agate","an-old-hope","androidstudio","arta","atom-one-dark","atom-one-dark-reasonable","base16/3024","base16/apathy","base16/apprentice","base16/ashes","base16/atelier-cave","base16/atelier-dune","base16/atelier-estuary","base16/atelier-forest","base16/atelier-heath","base16/atelier-lakeside","base16/atelier-plateau","base16/atelier-savanna","base16/atelier-seaside","base16/atelier-sulphurpool","base16/atlas","base16/bespin","base16/black-metal","base16/black-metal-bathory","base16/black-metal-burzum","base16/black-metal-dark-funeral","base16/black-metal-gorgoroth","base16/black-metal-immortal","base16/black-metal-khold","base16/black-metal-marduk","base16/black-metal-mayhem","base16/black-metal-nile","base16/black-metal-venom","base16/brewer","base16/bright","base16/brogrammer","base16/brush-trees-dark","base16/chalk","base16/circus","base16/classic-dark","base16/codeschool","base16/colors","base16/danqing","base16/darcula","base16/dark-violet","base16/darkmoss","base16/darktooth","base16/decaf","base16/default-dark","base16/dracula","base16/edge-dark","base16/eighties","base16/embers","base16/equilibrium-dark","base16/equilibrium-gray-dark","base16/espresso","base16/eva","base16/eva-dim","base16/flat","base16/framer","base16/gigavolt","base16/google-dark","base16/grayscale-dark","base16/green-screen","base16/gruvbox-dark-hard","base16/gruvbox-dark-medium","base16/gruvbox-dark-pale","base16/gruvbox-dark-soft","base16/hardcore","base16/harmonic16-dark","base16/heetch-dark","base16/helios","base16/hopscotch","base16/horizon-dark","base16/humanoid-dark","base16/ia-dark","base16/icy-dark","base16/ir-black","base16/isotope","base16/kimber","base16/london-tube","base16/macintosh","base16/marrakesh","base16/materia","base16/material","base16/material-darker","base16/material-palenight","base16/material-vivid","base16/mellow-purple","base16/mocha","base16/monokai","base16/nebula","base16/nord","base16/nova","base16/ocean","base16/oceanicnext","base16/onedark","base16/outrun-dark","base16/papercolor-dark","base16/paraiso","base16/pasque","base16/phd","base16/pico","base16/pop","base16/porple","base16/qualia","base16/railscasts","base16/rebecca","base16/ros-pine","base16/ros-pine-moon","base16/sandcastle","base16/seti-ui","base16/silk-dark","base16/snazzy","base16/solar-flare","base16/solarized-dark","base16/spacemacs","base16/summercamp","base16/summerfruit-dark","base16/synth-midnight-terminal-dark","base16/tango","base16/tender","base16/tomorrow-night","base16/twilight","base16/unikitty-dark","base16/vulcan","base16/windows-10","base16/windows-95","base16/windows-high-contrast","base16/windows-nt","base16/woodland","base16/xcode-dusk","base16/zenburn","codepen-embed","dark","devibeans","far","felipec","github-dark","github-dark-dimmed","gml","gradient-dark","hybrid","ir-black","isbl-editor-dark","kimbie-dark","lioshi","monokai","monokai-sublime","night-owl","nnfx-dark","nord","obsidian","panda-syntax-dark","paraiso-dark","pojoaque","qtcreator-dark","rainbow","shades-of-purple","srcery","stackoverflow-dark","sunburst","tomorrow-night-blue","tomorrow-night-bright","tokyo-night-dark","vs2015","xt256","ant-design","a11y-light","arduino-light","ascetic","atom-one-light","base16/atelier-cave-light","base16/atelier-dune-light","base16/atelier-estuary-light","base16/atelier-forest-light","base16/atelier-heath-light","base16/atelier-lakeside-light","base16/atelier-plateau-light","base16/atelier-savanna-light","base16/atelier-seaside-light","base16/atelier-sulphurpool-light","base16/brush-trees","base16/classic-light","base16/cupcake","base16/cupertino","base16/default-light","base16/dirtysea","base16/edge-light","base16/equilibrium-gray-light","base16/equilibrium-light","base16/fruit-soda","base16/github","base16/google-light","base16/grayscale-light","base16/gruvbox-light-hard","base16/gruvbox-light-medium","base16/gruvbox-light-soft","base16/harmonic16-light","base16/heetch-light","base16/humanoid-light","base16/horizon-light","base16/ia-light","base16/material-lighter","base16/mexico-light","base16/one-light","base16/papercolor-light","base16/ros-pine-dawn","base16/sagelight","base16/shapeshifter","base16/silk-light","base16/solar-flare-light","base16/solarized-light","base16/summerfruit-light","base16/synth-midnight-terminal-light","base16/tomorrow","base16/unikitty-light","base16/windows-10-light","base16/windows-95-light","base16/windows-high-contrast-light","brown-paper","base16/windows-nt-light","color-brewer","docco","foundation","github","googlecode","gradient-light","grayscale","idea","intellij-light","isbl-editor-light","kimbie-light","lightfair","magula","mono-blue","nnfx-light","panda-syntax-light","paraiso-light","purebasic","qtcreator-light","routeros","school-book","stackoverflow-light","tokyo-night-light","vs","xcode","default"],i.ALIAS_CODE_LANGUAGES=["abc","plantuml","mermaid","flowchart","echarts","mindmap","graphviz","math","markmap","smiles","js","ts","html","toml","c#","bat"],i.CDN="https://unpkg.com/vditor@".concat("3.10.9"),i.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},i.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},i.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},i.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:"".concat(i.CDN,"/dist/css/content-theme")},i}()},931:(m,y,u)=>{u.d(y,{Y:()=>c});var g=u(913),w=u(161),i=u(59),o=u(933),c=function(l,h,d){l===void 0&&(l=document),h===void 0&&(h=g.Y.CDN);var _=i.SMILESRenderAdapter.getElements(l);_.length>0&&(0,w.Z)("".concat(h,"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7"),"vditorAbcjsScript").then(function(){var S=new SmiDrawer({},{});_.forEach(function(x){var E=i.SMILESRenderAdapter.getCode(x).trim();if(!(x.getAttribute("data-processed")==="true"||E.trim()==="")){var p="smiles"+(0,o.Ee)();x.innerHTML='<svg id="'.concat(p,'"></svg>'),S.draw(E,"#"+p,d==="dark"?"dark":void 0),x.setAttribute("data-processed","true")}})})}},288:(m,y,u)=>{u.d(y,{$:()=>o});var g=u(913),w=u(161),i=u(59),o=function(c,l){c===void 0&&(c=document),l===void 0&&(l=g.Y.CDN);var h=i.abcRenderAdapter.getElements(c);h.length>0&&(0,w.Z)("".concat(l,"/dist/js/abcjs/abcjs_basic.min.js"),"vditorAbcjsScript").then(function(){h.forEach(function(d){d.parentElement.classList.contains("vditor-wysiwyg__pre")||d.parentElement.classList.contains("vditor-ir__marker--pre")||d.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(d,i.abcRenderAdapter.getCode(d).trim()),d.style.overflowX="auto",d.setAttribute("data-processed","true"))})})}},59:(m,y,u)=>{u.r(y),u.d(y,{SMILESRenderAdapter:()=>w,abcRenderAdapter:()=>h,chartRenderAdapter:()=>l,flowchartRenderAdapter:()=>_,graphvizRenderAdapter:()=>d,markmapRenderAdapter:()=>o,mathRenderAdapter:()=>g,mermaidRenderAdapter:()=>i,mindmapRenderAdapter:()=>c,plantumlRenderAdapter:()=>S});var g={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-math")}},w={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-smiles")}},i={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-mermaid")}},o={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-markmap")}},c={getCode:function(x){return x.getAttribute("data-code")},getElements:function(x){return x.querySelectorAll(".language-mindmap")}},l={getCode:function(x){return x.innerText},getElements:function(x){return x.querySelectorAll(".language-echarts")}},h={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-abc")}},d={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-graphviz")}},_={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-flowchart")}},S={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-plantuml")}}},784:(m,y,u)=>{u.d(y,{v:()=>h});var g=u(913),w=u(161),i=u(59),o=u(933),c=function(d,_,S,x){function E(p){return p instanceof S?p:new S(function(L){L(p)})}return new(S||(S=Promise))(function(p,L){function j(P){try{A(x.next(P))}catch(F){L(F)}}function O(P){try{A(x.throw(P))}catch(F){L(F)}}function A(P){P.done?p(P.value):E(P.value).then(j,O)}A((x=x.apply(d,_||[])).next())})},l=function(d,_){var S={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},x,E,p,L;return L={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function j(A){return function(P){return O([A,P])}}function O(A){if(x)throw new TypeError("Generator is already executing.");for(;L&&(L=0,A[0]&&(S=0)),S;)try{if(x=1,E&&(p=A[0]&2?E.return:A[0]?E.throw||((p=E.return)&&p.call(E),0):E.next)&&!(p=p.call(E,A[1])).done)return p;switch(E=0,p&&(A=[A[0]&2,p.value]),A[0]){case 0:case 1:p=A;break;case 4:return S.label++,{value:A[1],done:!1};case 5:S.label++,E=A[1],A=[0];continue;case 7:A=S.ops.pop(),S.trys.pop();continue;default:if(p=S.trys,!(p=p.length>0&&p[p.length-1])&&(A[0]===6||A[0]===2)){S=0;continue}if(A[0]===3&&(!p||A[1]>p[0]&&A[1]<p[3])){S.label=A[1];break}if(A[0]===6&&S.label<p[1]){S.label=p[1],p=A;break}if(p&&S.label<p[2]){S.label=p[2],S.ops.push(A);break}p[2]&&S.ops.pop(),S.trys.pop();continue}A=_.call(d,S)}catch(P){A=[6,P],E=0}finally{x=p=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},h=function(d,_,S){d===void 0&&(d=document),_===void 0&&(_=g.Y.CDN);var x=i.chartRenderAdapter.getElements(d);x.length>0&&(0,w.Z)("".concat(_,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){x.forEach(function(E){return c(void 0,void 0,void 0,function(){var p,L,j;return l(this,function(O){switch(O.label){case 0:if(E.parentElement.classList.contains("vditor-wysiwyg__pre")||E.parentElement.classList.contains("vditor-ir__marker--pre"))return[2];if(p=i.chartRenderAdapter.getCode(E).trim(),!p)return[2];O.label=1;case 1:return O.trys.push([1,3,,4]),E.getAttribute("data-processed")==="true"?[2]:[4,(0,o.kY)(p)];case 2:return L=O.sent(),echarts.init(E,S==="dark"?"dark":void 0).setOption(L),E.setAttribute("data-processed","true"),[3,4];case 3:return j=O.sent(),E.className="vditor-reset--error",E.innerHTML="echarts render error: <br>".concat(j),[3,4];case 4:return[2]}})})})})}},51:(m,y,u)=>{u.d(y,{o:()=>i});var g=u(695),w=u(913),i=function(o,c){Array.from(o.querySelectorAll("pre > code")).filter(function(l,h){return!(l.parentElement.classList.contains("vditor-wysiwyg__pre")||l.parentElement.classList.contains("vditor-ir__marker--pre")||l.classList.contains("language-mermaid")||l.classList.contains("language-flowchart")||l.classList.contains("language-echarts")||l.classList.contains("language-mindmap")||l.classList.contains("language-plantuml")||l.classList.contains("language-markmap")||l.classList.contains("language-abc")||l.classList.contains("language-graphviz")||l.classList.contains("language-math")||l.classList.contains("language-smiles")||l.style.maxHeight.indexOf("px")>-1||o.classList.contains("vditor-preview")&&h>5)}).forEach(function(l){var h,d,_,S=l.innerText;if(l.classList.contains("highlight-chroma")){var x=l.cloneNode(!0);x.querySelectorAll(".highlight-ln").forEach(function(j){j.remove()}),S=x.innerText}else S.endsWith(`
`)&&(S=S.substr(0,S.length-1));var E='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(E='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var p=document.createElement("div");p.className="vditor-copy",p.innerHTML='<span aria-label="'.concat(((h=window.VditorI18n)===null||h===void 0?void 0:h.copy)||"复制",`"
onmouseover="this.setAttribute('aria-label', '`).concat(((d=window.VditorI18n)===null||d===void 0?void 0:d.copy)||"复制",`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`).concat(((_=window.VditorI18n)===null||_===void 0?void 0:_.copied)||"已复制",`');this.previousElementSibling.blur()">`).concat(E,"</span>");var L=document.createElement("textarea");L.value=(0,g.p)(S),p.insertAdjacentElement("afterbegin",L),c&&c.renderMenu&&c.renderMenu(l,p),l.before(p),l.style.maxHeight=window.outerHeight-40+"px",l.insertAdjacentHTML("afterend",'<span style="position: absolute">'.concat(w.Y.ZWSP,"</span>"))})}},500:(m,y,u)=>{u.d(y,{D:()=>o});var g=u(913),w=u(161),i=u(59),o=function(c,l){l===void 0&&(l=g.Y.CDN);var h=i.flowchartRenderAdapter.getElements(c);h.length!==0&&(0,w.Z)("".concat(l,"/dist/js/flowchart.js/flowchart.min.js"),"vditorFlowchartScript").then(function(){h.forEach(function(d){if(d.getAttribute("data-processed")!=="true"){var _=flowchart.parse(i.flowchartRenderAdapter.getCode(d));d.innerHTML="",_.drawSVG(d),d.setAttribute("data-processed","true")}})})}},339:(m,y,u)=>{u.d(y,{m:()=>o});var g=u(913),w=u(161),i=u(59),o=function(c,l){l===void 0&&(l=g.Y.CDN);var h=i.graphvizRenderAdapter.getElements(c);h.length!==0&&(0,w.Z)("".concat(l,"/dist/js/graphviz/viz.js"),"vditorGraphVizScript").then(function(){h.forEach(function(d){var _=i.graphvizRenderAdapter.getCode(d);if(!(d.parentElement.classList.contains("vditor-wysiwyg__pre")||d.parentElement.classList.contains("vditor-ir__marker--pre"))&&!(d.getAttribute("data-processed")==="true"||_.trim()==="")){try{var S=new Blob(["importScripts('".concat(document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js"),"');")],{type:"application/javascript"}),x=window.URL||window.webkitURL,E=x.createObjectURL(S),p=new Worker(E);new Viz({worker:p}).renderSVGElement(_).then(function(L){d.innerHTML=L.outerHTML}).catch(function(L){d.innerHTML="graphviz render error: <br>".concat(L),d.className="vditor-reset--error"})}catch(L){console.error("graphviz error",L)}d.setAttribute("data-processed","true")}})})}},108:(m,y,u)=>{u.d(y,{$:()=>o});var g=u(913),w=u(161),i=u(505),o=function(c,l,h){l===void 0&&(l=document),h===void 0&&(h=g.Y.CDN);var d=c.style;g.Y.CODE_THEME.includes(d)||(d="github");var _=document.getElementById("vditorHljsStyle"),S="".concat(h,"/dist/js/highlight.js/styles/").concat(d,".min.css");if(_&&_.getAttribute("href")!==S&&_.remove(),(0,i.T)("".concat(h,"/dist/js/highlight.js/styles/").concat(d,".min.css"),"vditorHljsStyle"),c.enable!==!1){var x=l.querySelectorAll("pre > code");x.length!==0&&(0,w.Z)("".concat(h,"/dist/js/highlight.js/highlight.min.js?v=11.7.0"),"vditorHljsScript").then(function(){(0,w.Z)("".concat(h,"/dist/js/highlight.js/third-languages.js?v=1.0.1"),"vditorHljsThirdScript").then(function(){l.querySelectorAll("pre > code").forEach(function(E){if(!(E.parentElement.classList.contains("vditor-ir__marker--pre")||E.parentElement.classList.contains("vditor-wysiwyg__pre"))&&!(E.classList.contains("language-mermaid")||E.classList.contains("language-flowchart")||E.classList.contains("language-echarts")||E.classList.contains("language-mindmap")||E.classList.contains("language-plantuml")||E.classList.contains("language-smiles")||E.classList.contains("language-abc")||E.classList.contains("language-graphviz")||E.classList.contains("language-math"))){c.defaultLang!==""&&E.className.indexOf("language-")===-1&&E.classList.add("language-"+c.defaultLang);var p=E.className.replace("language-","");if(window.hljs.getLanguage(p)||(p="plaintext"),E.innerHTML=window.hljs.highlight(E.textContent,{language:p,ignoreIllegals:!0}).value,E.classList.add("hljs"),!!c.lineNumber){E.classList.add("vditor-linenumber");var L=E.querySelector(".vditor-linenumber__temp");L||(L=document.createElement("div"),L.className="vditor-linenumber__temp",E.insertAdjacentElement("beforeend",L));var j=getComputedStyle(E).whiteSpace,O=!1;(j==="pre-wrap"||j==="pre-line")&&(O=!0);var A="",P=E.textContent.split(/\r\n|\r|\n/g);P.pop(),P.map(function(F){var Y="";O&&(L.textContent=F||`
`,Y=' style="height:'.concat(L.getBoundingClientRect().height,'px"')),A+="<span".concat(Y,"></span>")}),L.style.display="none",A='<span class="vditor-linenumber__rows">'.concat(A,"</span>"),E.insertAdjacentHTML("beforeend",A)}}})})})}}},597:(m,y,u)=>{u.d(y,{K:()=>h});var g=u(913),w=u(161),i=u(59),o={},c=function(d,_){var S=d.transform(_),x=Object.keys(S.features).filter(function(O){return!o[O]});x.forEach(function(O){o[O]=!0});var E=d.getAssets(x),p=E.styles,L=E.scripts,j=window.markmap;return p&&j.loadCSS(p),L&&j.loadJS(L),S},l=function(d,_){var S=window.markmap,x=S.Transformer,E=S.Markmap,p=S.deriveOptions;S.globalCSS;var L=new x;d.innerHTML='<svg style="width:100%"></svg>';var j=d.firstChild,O=E.create(j,null),A=c(L,_),P=A.root,F=A.frontmatter,Y=F==null?void 0:F.markmap,R=p(Y);O.setData(P,R),O.fit()},h=function(d,_){d===void 0&&(d=document),_===void 0&&(_=g.Y.CDN);var S=i.markmapRenderAdapter.getElements(d);S.length!==0&&(0,w.Z)("".concat(_,"/dist/js/markmap/markmap.min.js"),"vditorMarkerScript").then(function(){S.forEach(function(x){var E=i.markmapRenderAdapter.getCode(x);if(!(x.getAttribute("data-processed")==="true"||E.trim()==="")){var p=document.createElement("div");p.className="language-markmap",x.parentNode.appendChild(p),l(p,E),x.parentNode.childNodes[0].nodeName=="CODE"&&x.parentNode.removeChild(x.parentNode.childNodes[0])}})})}},960:(m,y,u)=>{u.d(y,{T:()=>l});var g=u(913),w=u(161),i=u(505),o=u(695),c=u(59),l=function(h,d){h===void 0&&(h=document);var _=c.mathRenderAdapter.getElements(h);if(_.length!==0){var S={cdn:g.Y.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(d&&d.math&&(d.math=Object.assign({},S.math,d.math)),d=Object.assign({},S,d),d.math.engine==="KaTeX")(0,i.T)("".concat(d.cdn,"/dist/js/katex/katex.min.css?v=0.16.9"),"vditorKatexStyle"),(0,w.Z)("".concat(d.cdn,"/dist/js/katex/katex.min.js?v=0.16.9"),"vditorKatexScript").then(function(){(0,w.Z)("".concat(d.cdn,"/dist/js/katex/mhchem.min.js?v=0.16.9"),"vditorKatexChemScript").then(function(){_.forEach(function(p){if(!(p.parentElement.classList.contains("vditor-wysiwyg__pre")||p.parentElement.classList.contains("vditor-ir__marker--pre"))&&!p.getAttribute("data-math")){var L=(0,o.p)(c.mathRenderAdapter.getCode(p));p.setAttribute("data-math",L);try{p.innerHTML=katex.renderToString(L,{displayMode:p.tagName==="DIV",output:"html",macros:d.math.macros})}catch(j){p.innerHTML=j.message,p.className="language-math vditor-reset--error"}p.addEventListener("copy",function(j){j.stopPropagation(),j.preventDefault();var O=j.currentTarget.closest(".language-math");j.clipboardData.setData("text/html",O.innerHTML),j.clipboardData.setData("text/plain",O.getAttribute("data-math"))})}})})});else if(d.math.engine==="MathJax"){var x=function(p){if(p.length!==0){var L=0,j=p[p.length-1],O=function(){var A=p[L++];A===j?A():A(O)};O()}};window.MathJax||(window.MathJax={loader:{paths:{mathjax:"".concat(d.cdn,"/dist/js/mathjax")}},startup:{typeset:!1},tex:{macros:d.math.macros}},Object.assign(window.MathJax,d.math.mathJaxOptions)),(0,w.U)("".concat(d.cdn,"/dist/js/mathjax/tex-svg-full.js"),"protyleMathJaxScript");var E=function(p,L){var j=(0,o.p)(p.textContent).trim(),O=window.MathJax.getMetricsFor(p);O.display=p.tagName==="DIV",window.MathJax.tex2svgPromise(j,O).then(function(A){p.innerHTML="",p.setAttribute("data-math",j),p.append(A),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var P=A.querySelector('[data-mml-node="merror"]');P&&P.textContent.trim()!==""&&(p.innerHTML=P.textContent.trim(),p.className="vditor-reset--error"),L&&L()})};window.MathJax.startup.promise.then(function(){for(var p=[],L=function(O){var A=_[O];!A.parentElement.classList.contains("vditor-wysiwyg__pre")&&!A.parentElement.classList.contains("vditor-ir__marker--pre")&&!A.getAttribute("data-math")&&(0,o.p)(A.textContent).trim()&&p.push(function(P){O===_.length-1?E(A):E(A,P)})},j=0;j<_.length;j++)L(j);x(p)})}}}},0:(m,y,u)=>{u.d(y,{l:()=>c});var g=u(933),w=function(l,h){l.insertAdjacentHTML("afterend",'<video controls="controls" src="'.concat(h,'"></video>')),l.remove()},i=function(l,h){l.insertAdjacentHTML("afterend",'<audio controls="controls" src="'.concat(h,'"></audio>')),l.remove()},o=function(l,h){var d=h.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),_=h.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),S=h.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),x=h.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),E=h.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),p=h.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),L=h.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),j=h.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(d&&d[1].length===11)l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'.concat(d[1]+(d[2]?"?start="+d[2]:""),'"></iframe>')),l.remove();else if(_&&_[1])l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'.concat(_[1],'"></iframe>')),l.remove();else if(S&&S[1])l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='.concat(S[1],'"></iframe>')),l.remove();else if(x&&x[1])l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`.concat(x[1],'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>')),l.remove();else if(E&&E[0])l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`.concat(encodeURIComponent(E[0]),'"></iframe>')),l.remove();else if(p&&p[2])l.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`.concat(p[2],'"></iframe>')),l.remove();else if(h.indexOf("bilibili.com")>-1&&(h.indexOf("bvid=")>-1||L&&L[1])){var O={bvid:(0,g.TK)("bvid",h)||L&&L[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(h.startsWith("http")?h:"https:"+h).search.split("&").forEach(function(F,Y){if(F){Y===0&&(F=F.substr(1));var R=F.split("=");O[R[0]]=R[1]}});var A="https://player.bilibili.com/player.html?",P=Object.keys(O);P.forEach(function(F,Y){A+="".concat(F,"=").concat(O[F]),Y<P.length-1&&(A+="&")}),l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'.concat(A,'"></iframe>')),l.remove()}else j&&j[1]&&(l.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'.concat(j[1],'"></iframe>')),l.remove())},c=function(l){l&&l.querySelectorAll("a").forEach(function(h){var d=h.getAttribute("href");d&&(d.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?w(h,d):d.match(/^.+.(mp3|wav|flac)$/)?i(h,d):o(h,d))})}},975:(m,y,u)=>{u.d(y,{e:()=>h});var g=u(913),w=u(161),i=u(59),o=u(933),c=function(d,_,S,x){function E(p){return p instanceof S?p:new S(function(L){L(p)})}return new(S||(S=Promise))(function(p,L){function j(P){try{A(x.next(P))}catch(F){L(F)}}function O(P){try{A(x.throw(P))}catch(F){L(F)}}function A(P){P.done?p(P.value):E(P.value).then(j,O)}A((x=x.apply(d,_||[])).next())})},l=function(d,_){var S={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},x,E,p,L;return L={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function j(A){return function(P){return O([A,P])}}function O(A){if(x)throw new TypeError("Generator is already executing.");for(;L&&(L=0,A[0]&&(S=0)),S;)try{if(x=1,E&&(p=A[0]&2?E.return:A[0]?E.throw||((p=E.return)&&p.call(E),0):E.next)&&!(p=p.call(E,A[1])).done)return p;switch(E=0,p&&(A=[A[0]&2,p.value]),A[0]){case 0:case 1:p=A;break;case 4:return S.label++,{value:A[1],done:!1};case 5:S.label++,E=A[1],A=[0];continue;case 7:A=S.ops.pop(),S.trys.pop();continue;default:if(p=S.trys,!(p=p.length>0&&p[p.length-1])&&(A[0]===6||A[0]===2)){S=0;continue}if(A[0]===3&&(!p||A[1]>p[0]&&A[1]<p[3])){S.label=A[1];break}if(A[0]===6&&S.label<p[1]){S.label=p[1],p=A;break}if(p&&S.label<p[2]){S.label=p[2],S.ops.push(A);break}p[2]&&S.ops.pop(),S.trys.pop();continue}A=_.call(d,S)}catch(P){A=[6,P],E=0}finally{x=p=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},h=function(d,_,S){d===void 0&&(d=document),_===void 0&&(_=g.Y.CDN);var x=i.mermaidRenderAdapter.getElements(d);x.length!==0&&(0,w.Z)("".concat(_,"/dist/js/mermaid/mermaid.min.js"),"vditorMermaidScript").then(function(){var E={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};S==="dark"&&(E.theme="dark"),mermaid.initialize(E),x.forEach(function(p){return c(void 0,void 0,void 0,function(){var L,j,O,A,P;return l(this,function(F){switch(F.label){case 0:if(L=i.mermaidRenderAdapter.getCode(p),p.getAttribute("data-processed")==="true"||L.trim()==="")return[2];j="mermaid"+(0,o.Ee)(),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,mermaid.render(j,p.textContent)];case 2:return O=F.sent(),p.innerHTML=O.svg,[3,4];case 3:return A=F.sent(),P=document.querySelector("#"+j),p.innerHTML="".concat(P.outerHTML,`<br>
<div style="text-align: left"><small>`).concat(A.message.replace(/\n/,"<br>"),"</small></div>"),P.parentElement.remove(),[3,4];case 4:return p.setAttribute("data-processed","true"),[2]}})})})})}},162:(m,y,u)=>{u.d(y,{l:()=>o});var g=u(913),w=u(161),i=u(59),o=function(c,l,h){c===void 0&&(c=document),l===void 0&&(l=g.Y.CDN);var d=i.mindmapRenderAdapter.getElements(c);d.length>0&&(0,w.Z)("".concat(l,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){d.forEach(function(_){if(!(_.parentElement.classList.contains("vditor-wysiwyg__pre")||_.parentElement.classList.contains("vditor-ir__marker--pre"))){var S=i.mindmapRenderAdapter.getCode(_);if(S)try{if(_.getAttribute("data-processed")==="true")return;echarts.init(_,h==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(S))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(x,E){var p;return!((p=E==null?void 0:E.data)===null||p===void 0)&&p.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),_.setAttribute("data-processed","true")}catch(x){_.className="vditor-reset--error",_.innerHTML="mindmap render error: <br>".concat(x)}}})})}},70:(m,y,u)=>{u.d(y,{N:()=>i});var g=u(164),w=u(960),i=function(o,c,l){var h="",d=[];if(Array.from(o.children).forEach(function(E,p){if((0,g.c)(E)){if(l){var L=E.id.lastIndexOf("_");E.id=E.id.substring(0,L===-1?void 0:L)+"_"+p}d.push(E.id),h+=E.outerHTML.replace("<wbr>","")}}),h==="")return c.innerHTML="","";var _=document.createElement("div");if(l)l.lute.SetToC(!0),l.currentMode==="wysiwyg"&&!l.preview.element.contains(o)?_.innerHTML=l.lute.SpinVditorDOM("<p>[ToC]</p>"+h):l.currentMode==="ir"&&!l.preview.element.contains(o)?_.innerHTML=l.lute.SpinVditorIRDOM("<p>[ToC]</p>"+h):_.innerHTML=l.lute.HTML2VditorDOM("<p>[ToC]</p>"+h),l.lute.SetToC(l.options.preview.markdown.toc);else{c.classList.add("vditor-outline");var S=Lute.New();S.SetToC(!0),_.innerHTML=S.HTML2VditorDOM("<p>[ToC]</p>"+h)}var x=_.firstElementChild.querySelectorAll("li > span[data-target-id]");return x.forEach(function(E,p){if(E.nextElementSibling&&E.nextElementSibling.tagName==="UL"){var L="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(L='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),E.innerHTML="".concat(L,"<span>").concat(E.innerHTML,"</span>")}else E.innerHTML="<svg></svg><span>".concat(E.innerHTML,"</span>");E.setAttribute("data-target-id",d[p])}),h=_.firstElementChild.innerHTML,x.length===0?(c.innerHTML="",h):(c.innerHTML=h,l&&(0,w.T)(c,{cdn:l.options.cdn,math:l.options.preview.math}),c.firstElementChild.addEventListener("click",function(E){for(var p=E.target;p&&!p.isEqualNode(c);){if(p.classList.contains("vditor-outline__action")){p.classList.contains("vditor-outline__action--close")?(p.classList.remove("vditor-outline__action--close"),p.parentElement.nextElementSibling.setAttribute("style","display:block")):(p.classList.add("vditor-outline__action--close"),p.parentElement.nextElementSibling.setAttribute("style","display:none")),E.preventDefault(),E.stopPropagation();break}else if(p.getAttribute("data-target-id")){E.preventDefault(),E.stopPropagation();var L=document.getElementById(p.getAttribute("data-target-id"));if(!L)return;if(l)if(l.options.height==="auto"){var j=L.offsetTop+l.element.offsetTop;l.options.toolbarConfig.pin||(j+=l.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,j)}else l.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,l.element.offsetTop),l.preview.element.contains(o)?o.parentElement.scrollTop=L.offsetTop:o.scrollTop=L.offsetTop;else window.scrollTo(window.scrollX,L.offsetTop);break}p=p.parentElement}}),h)}},591:(m,y,u)=>{u.d(y,{M:()=>o});var g=u(913),w=u(161),i=u(59),o=function(c,l){c===void 0&&(c=document),l===void 0&&(l=g.Y.CDN);var h=i.plantumlRenderAdapter.getElements(c);h.length!==0&&(0,w.Z)("".concat(l,"/dist/js/plantuml/plantuml-encoder.min.js"),"vditorPlantumlScript").then(function(){h.forEach(function(d){if(!(d.parentElement.classList.contains("vditor-wysiwyg__pre")||d.parentElement.classList.contains("vditor-ir__marker--pre"))){var _=i.plantumlRenderAdapter.getCode(d).trim();if(_)try{d.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'.concat(plantumlEncoder.encode(_),'"/>')}catch(S){d.className="vditor-reset--error",d.innerHTML="plantuml render error: <br>".concat(S)}}})})}},796:(m,y,u)=>{u.d(y,{X:()=>g});var g=function(w){var i=Lute.New();return i.PutEmojis(w.emojis),i.SetEmojiSite(w.emojiSite),i.SetHeadingAnchor(w.headingAnchor),i.SetInlineMathAllowDigitAfterOpenMarker(w.inlineMathDigit),i.SetAutoSpace(w.autoSpace),i.SetToC(w.toc),i.SetFootnotes(w.footnotes),i.SetFixTermTypo(w.fixTermTypo),i.SetVditorCodeBlockPreview(w.codeBlockPreview),i.SetVditorMathBlockPreview(w.mathBlockPreview),i.SetSanitize(w.sanitize),i.SetChineseParagraphBeginningSpace(w.paragraphBeginningSpace),i.SetRenderListStyle(w.listStyle),i.SetLinkBase(w.linkBase),i.SetLinkPrefix(w.linkPrefix),i.SetMark(w.mark),i.SetGFMAutoLink(w.gfmAutoLink),w.lazyLoadImage&&i.SetImageLazyLoading(w.lazyLoadImage),i}},726:(m,y,u)=>{u.d(y,{o:()=>g});var g=function(w,i,o){o===void 0&&(o="classic");var c=w.getBoundingClientRect(),l=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'.concat(o==="dark"?" vditor--dark":"",`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `).concat(window.VditorI18n.spin,`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`).concat(window.VditorI18n.close,`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `).concat(w.width,"px;height:").concat(w.height,"px;transform: translate3d(").concat(c.left,"px, ").concat(c.top-l,'px, 0)" src="').concat(w.getAttribute("src"),`">
    </div>
</div>`)),document.body.style.overflow="hidden";var h=document.querySelector(".vditor-img img"),d="translate3d(".concat(Math.max(0,window.innerWidth-w.naturalWidth)/2,"px, ").concat(Math.max(0,window.innerHeight-l-w.naturalHeight)/2,"px, 0)");setTimeout(function(){h.setAttribute("style","transition: transform .3s ease-in-out;transform: ".concat(d)),setTimeout(function(){h.parentElement.scrollTo((h.parentElement.scrollWidth-h.parentElement.clientWidth)/2,(h.parentElement.scrollHeight-h.parentElement.clientHeight)/2)},400)});var _=document.querySelector(".vditor-img__btn");_.addEventListener("click",function(){var S=parseInt(_.getAttribute("data-deg"),10)+90;S/90%2===1&&w.naturalWidth>h.parentElement.clientHeight?h.style.transform="translate3d(".concat(Math.max(0,window.innerWidth-w.naturalWidth)/2,"px, ").concat(w.naturalWidth/2-w.naturalHeight/2,"px, 0) rotateZ(").concat(S,"deg)"):h.style.transform="".concat(d," rotateZ(").concat(S,"deg)"),_.setAttribute("data-deg",S.toString()),setTimeout(function(){h.parentElement.scrollTo((h.parentElement.scrollWidth-h.parentElement.clientWidth)/2,(h.parentElement.scrollHeight-h.parentElement.clientHeight)/2)},400)})}},13:(m,y,u)=>{u.d(y,{h:()=>i});var g=u(913),w=u(505),i=function(o,c){c===void 0&&(c=g.Y.CDN),g.Y.CODE_THEME.includes(o)||(o="github");var l=document.getElementById("vditorHljsStyle"),h="".concat(c,"/dist/js/highlight.js/styles/").concat(o,".min.css");l?l.getAttribute("href")!==h&&(l.remove(),(0,w.T)(h,"vditorHljsStyle")):(0,w.T)(h,"vditorHljsStyle")}},873:(m,y,u)=>{u.d(y,{H:()=>w});var g=u(505),w=function(i,o){if(!(!i||!o)){var c=document.getElementById("vditorContentTheme"),l="".concat(o,"/").concat(i,".css");c?c.getAttribute("href")!==l&&(c.remove(),(0,g.T)(l,"vditorContentTheme")):(0,g.T)(l,"vditorContentTheme")}}},161:(m,y,u)=>{u.d(y,{U:()=>g,Z:()=>w});var g=function(i,o){if(document.getElementById(o))return!1;var c=new XMLHttpRequest;c.open("GET",i,!1),c.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),c.send("");var l=document.createElement("script");l.type="text/javascript",l.text=c.responseText,l.id=o,document.head.appendChild(l)},w=function(i,o){return new Promise(function(c,l){if(document.getElementById(o))return c(!0),!1;var h=document.createElement("script");h.src=i,h.async=!0,document.head.appendChild(h),h.onerror=function(d){l(d)},h.onload=function(){if(document.getElementById(o))return h.remove(),c(!0),!1;h.id=o,c(!0)}})}},505:(m,y,u)=>{u.d(y,{T:()=>g});var g=function(w,i){if(!document.getElementById(i)){var o=document.createElement("link");o.id=i,o.rel="stylesheet",o.type="text/css",o.href=w,document.getElementsByTagName("head")[0].appendChild(o)}}},695:(m,y,u)=>{u.d(y,{p:()=>g});var g=function(w){return w.replace(/\u00a0/g," ")}},629:(m,y,u)=>{u.d(y,{D:()=>i,H8:()=>h,_0:()=>c,fG:()=>l,gm:()=>w,nr:()=>g,y3:()=>o});var g=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},w=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},i=function(){try{return typeof localStorage<"u"}catch{return!1}},o=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},c=function(d){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!!(d.metaKey&&!d.ctrlKey):!!(!d.metaKey&&d.ctrlKey)},l=function(d){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?d.indexOf("⇧")>-1&&w()&&(d=d.replace(";",":").replace("=","+").replace("-","_")):(d.startsWith("⌘")?d=d.replace("⌘","⌘+"):d.startsWith("⌥")&&d.substr(1,1)!=="⌘"?d=d.replace("⌥","⌥+"):d=d.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+"),d=d.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt"),d.indexOf("Shift")>-1&&(d=d.replace(";",":").replace("=","+").replace("-","_"))),d},h=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},933:(m,y,u)=>{u.d(y,{Ee:()=>g,TK:()=>w,kY:()=>i});var g=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(o){return(parseInt(o,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(o,10)/4).toString(16)})},w=function(o,c){c===void 0&&(c=window.location.search);var l=c.substring(c.indexOf("?")),h=l.indexOf("#"),d=new URLSearchParams(l.substring(0,h>=0?h:void 0));return d.get(o)},i=function(o){return Function('"use strict";return ('.concat(o,")"))()}},598:(m,y,u)=>{u.d(y,{Ab:()=>i,KJ:()=>d,KR:()=>o,Rp:()=>_,Th:()=>c,XW:()=>w,_Y:()=>h,pt:()=>l});var g=u(164),w=function(S,x){for(var E=d(S,x),p=!1,L=!1;E&&!E.classList.contains("vditor-reset")&&!L;)p=d(E.parentElement,x),p?E=p:L=!0;return E||!1},i=function(S,x){for(var E=(0,g.f)(S,x),p=!1,L=!1;E&&!E.classList.contains("vditor-reset")&&!L;)p=(0,g.f)(E.parentElement,x),p?E=p:L=!0;return E||!1},o=function(S){var x=i(S,"UL"),E=i(S,"OL"),p=x;return E&&(!x||x&&E.contains(x))&&(p=E),p},c=function(S,x,E){if(!S)return!1;S.nodeType===3&&(S=S.parentElement);for(var p=S,L=!1;p&&!L&&!p.classList.contains("vditor-reset");)p.getAttribute(x)===E?L=!0:p=p.parentElement;return L&&p},l=function(S){if(!S)return!1;S.nodeType===3&&(S=S.parentElement);var x=S,E=!1,p=c(S,"data-block","0");if(p)return p;for(;x&&!E&&!x.classList.contains("vditor-reset");)x.tagName==="H1"||x.tagName==="H2"||x.tagName==="H3"||x.tagName==="H4"||x.tagName==="H5"||x.tagName==="H6"||x.tagName==="P"||x.tagName==="BLOCKQUOTE"||x.tagName==="OL"||x.tagName==="UL"?E=!0:x=x.parentElement;return E&&x},h=function(S,x){if(!S)return!1;S.nodeType===3&&(S=S.parentElement);for(var E=S,p=!1;E&&!p&&!E.classList.contains("vditor-reset");)E.nodeName===x?p=!0:E=E.parentElement;return p&&E},d=function(S,x){if(!S)return!1;S.nodeType===3&&(S=S.parentElement);for(var E=S,p=!1;E&&!p&&!E.classList.contains("vditor-reset");)E.classList.contains(x)?p=!0:E=E.parentElement;return p&&E},_=function(S){for(;S&&S.lastChild;)S=S.lastChild;return S}},164:(m,y,u)=>{u.d(y,{c:()=>w,f:()=>g});var g=function(i,o){if(!i)return!1;i.nodeType===3&&(i=i.parentElement);for(var c=i,l=!1;c&&!l&&!c.classList.contains("vditor-reset");)c.nodeName.indexOf(o)===0?l=!0:c=c.parentElement;return l&&c},w=function(i){var o=g(i,"H");return o&&o.tagName.length===2&&o.tagName!=="HR"?o:!1}},905:(m,y,u)=>{u.d(y,{h:()=>g});var g=function(){for(var w=[],i=0;i<arguments.length;i++)w[i]=arguments[i];for(var o={},c=function(h){for(var d in h)h.hasOwnProperty(d)&&(Object.prototype.toString.call(h[d])==="[object Object]"?o[d]=g(o[d],h[d]):o[d]=h[d])},l=0;l<w.length;l++)c(w[l]);return o}},827:(m,y,u)=>{u.d(y,{Co:()=>l,ED:()=>d,Ey:()=>c,Fm:()=>_,RN:()=>o,Z2:()=>x,ir:()=>S,jl:()=>h});var g=u(913),w=u(629),i=u(598),o=function(E){var p,L=E[E.currentMode].element;return getSelection().rangeCount>0&&(p=getSelection().getRangeAt(0),L.isEqualNode(p.startContainer)||L.contains(p.startContainer))?p:E[E.currentMode].range?E[E.currentMode].range:(L.focus(),p=L.ownerDocument.createRange(),p.setStart(L,0),p.collapse(!0),p)},c=function(E){var p=window.getSelection().getRangeAt(0);if(!E.contains(p.startContainer)&&!(0,i.KJ)(p.startContainer,"vditor-panel--none"))return{left:0,top:0};var L=E.parentElement.getBoundingClientRect(),j;if(p.getClientRects().length===0)if(p.startContainer.nodeType===3){var O=p.startContainer.parentElement;if(O&&O.getClientRects().length>0)j=O.getClientRects()[0];else return{left:0,top:0}}else{var A=p.startContainer.children;if(A[p.startOffset]&&A[p.startOffset].getClientRects().length>0)j=A[p.startOffset].getClientRects()[0];else if(p.startContainer.childNodes.length>0){var P=p.cloneRange();p.selectNode(p.startContainer.childNodes[Math.max(0,p.startOffset-1)]),j=p.getClientRects()[0],p.setEnd(P.endContainer,P.endOffset),p.setStart(P.startContainer,P.startOffset)}else j=p.startContainer.getClientRects()[0];if(!j){for(var F=p.startContainer.childNodes[p.startOffset];!F.getClientRects||F.getClientRects&&F.getClientRects().length===0;)F=F.parentElement;j=F.getClientRects()[0]}}else j=p.getClientRects()[0];return{left:j.left-L.left,top:j.top-L.top}},l=function(E,p){if(!p){if(getSelection().rangeCount===0)return!1;p=getSelection().getRangeAt(0)}var L=p.commonAncestorContainer;return E.isEqualNode(L)||E.contains(L)},h=function(E){var p=window.getSelection();p.removeAllRanges(),p.addRange(E)},d=function(E,p,L){var j={end:0,start:0};if(!L){if(getSelection().rangeCount===0)return j;L=window.getSelection().getRangeAt(0)}if(l(p,L)){var O=L.cloneRange();E.childNodes[0]&&E.childNodes[0].childNodes[0]?O.setStart(E.childNodes[0].childNodes[0],0):O.selectNodeContents(E),O.setEnd(L.startContainer,L.startOffset),j.start=O.toString().length,j.end=j.start+L.toString().length}return j},_=function(E,p,L){var j=0,O=0,A=L.childNodes[O],P=!1,F=!1;E=Math.max(0,E),p=Math.max(0,p);var Y=L.ownerDocument.createRange();for(Y.setStart(A||L,0),Y.collapse(!0);!F&&A;){var R=j+A.textContent.length;if(!P&&E>=j&&E<=R&&(E===0?Y.setStart(A,0):A.childNodes[0].nodeType===3?Y.setStart(A.childNodes[0],E-j):A.nextSibling?Y.setStartBefore(A.nextSibling):Y.setStartAfter(A),P=!0,E===p)){F=!0;break}P&&p>=j&&p<=R&&(p===0?Y.setEnd(A,0):A.childNodes[0].nodeType===3?Y.setEnd(A.childNodes[0],p-j):A.nextSibling?Y.setEndBefore(A.nextSibling):Y.setEndAfter(A),F=!0),j=R,A=L.childNodes[++O]}return!F&&L.childNodes[O-1]&&Y.setStartBefore(L.childNodes[O-1]),h(Y),Y},S=function(E,p){var L=E.querySelector("wbr");if(L){if(!L.previousElementSibling)L.previousSibling?p.setStart(L.previousSibling,L.previousSibling.textContent.length):L.nextSibling?L.nextSibling.nodeType===3?p.setStart(L.nextSibling,0):p.setStartBefore(L.nextSibling):p.setStart(L.parentElement,0);else if(L.previousElementSibling.isSameNode(L.previousSibling))if(L.previousElementSibling.lastChild){p.setStartBefore(L),p.collapse(!0),h(p),(0,w.H8)()&&(L.previousElementSibling.tagName==="EM"||L.previousElementSibling.tagName==="STRONG"||L.previousElementSibling.tagName==="S")&&(p.insertNode(document.createTextNode(g.Y.ZWSP)),p.collapse(!1)),L.remove();return}else p.setStartAfter(L.previousElementSibling);else p.setStart(L.previousSibling,L.previousSibling.textContent.length);p.collapse(!0),L.remove(),h(p)}},x=function(E,p){var L=document.createElement("div");L.innerHTML=E;var j=L.querySelectorAll("p");j.length===1&&!j[0].previousSibling&&!j[0].nextSibling&&p[p.currentMode].element.children.length>0&&L.firstElementChild.tagName==="P"&&(E=j[0].innerHTML.trim());var O=document.createElement("div");O.innerHTML=E;var A=o(p);if(A.toString()!==""&&(p[p.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),O.firstElementChild&&O.firstElementChild.getAttribute("data-block")==="0"){O.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var P=(0,i.pt)(A.startContainer);P?P.insertAdjacentHTML("afterend",O.innerHTML):p[p.currentMode].element.insertAdjacentHTML("beforeend",O.innerHTML),S(p[p.currentMode].element,A)}else{var F=document.createElement("template");F.innerHTML=E,A.insertNode(F.content.cloneNode(!0)),A.collapse(!1),h(A)}}}},H={};function v(m){var y=H[m];if(y!==void 0)return y.exports;var u=H[m]={exports:{}};return b[m](u,u.exports,v),u.exports}v.d=(m,y)=>{for(var u in y)v.o(y,u)&&!v.o(m,u)&&Object.defineProperty(m,u,{enumerable:!0,get:y[u]})},v.o=(m,y)=>Object.prototype.hasOwnProperty.call(m,y),v.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var f={};return(()=>{v.d(f,{default:()=>Ua});var m=v(923),y=v(913),u=v(695),g=function(e){return e.currentMode==="sv"?(0,u.p)("".concat(e.sv.element.textContent,`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},w=v(161),i=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var n=this;t.devtools.element.style.display==="block"&&(0,w.Z)("".concat(t.options.cdn,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){n.ASTChart||(n.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{n.element.lastElementChild.style.display="block",n.element.firstElementChild.innerHTML="",n.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(g(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),n.ASTChart.resize()}catch(r){n.element.lastElementChild.style.display="none",n.element.firstElementChild.innerHTML=r}})},e}(),o=v(629),c=function(e,t){t.forEach(function(n){if(e[n]){var r=e[n].children[0];r&&r.classList.contains("vditor-menu--current")&&r.classList.remove("vditor-menu--current")}})},l=function(e,t){t.forEach(function(n){if(e[n]){var r=e[n].children[0];r&&!r.classList.contains("vditor-menu--current")&&r.classList.add("vditor-menu--current")}})},h=function(e,t){t.forEach(function(n){if(e[n]){var r=e[n].children[0];r&&r.classList.contains(y.Y.CLASS_MENU_DISABLED)&&r.classList.remove(y.Y.CLASS_MENU_DISABLED)}})},d=function(e,t){t.forEach(function(n){if(e[n]){var r=e[n].children[0];r&&!r.classList.contains(y.Y.CLASS_MENU_DISABLED)&&r.classList.add(y.Y.CLASS_MENU_DISABLED)}})},_=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="none")})},S=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="block")})},x=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(r){n&&r.isEqualNode(n)||(r.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},E=function(e,t,n,r){n.addEventListener((0,o.y3)(),function(a){a.preventDefault(),a.stopPropagation(),!n.classList.contains(y.Y.CLASS_MENU_DISABLED)&&(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(s){s.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(x(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},p=v(598),L=v(164),j=function(e,t,n,r){r&&console.log("".concat(e," - ").concat(n,": ").concat(t))},O=v(288),A=v(784),P=v(51),F=v(500),Y=v(339),R=v(108),$=v(960),B=v(975),N=v(597),z=v(162),q=v(591),G=v(931),se=function(e,t,n){n===void 0&&(n="sv");var r=document.createElement("div");r.innerHTML=e;var a=!1;r.childElementCount===1&&r.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(a=!0);var s=r.querySelectorAll("pre");if(r.childElementCount===1&&s.length===1&&s[0].className!=="vditor-wysiwyg"&&s[0].className!=="vditor-sv"&&(a=!0),e.indexOf(`
<p class="p1">`)===0&&(a=!0),r.childElementCount===1&&r.firstElementChild.tagName==="TABLE"&&r.querySelector(".line-number")&&r.querySelector(".line-content")&&(a=!0),a){var k=t||e;return/\n/.test(k)||s.length===1?n==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'.concat(k.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"<wbr></code></pre></div>"):"\n```\n"+k.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":n==="wysiwyg"?"<code>".concat(k.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"</code><wbr>"):"`".concat(k,"`")}return!1},fe=function(e,t){if(e){if(e.parentElement.getAttribute("data-type")==="html-block"){e.setAttribute("data-render","1");return}var n=e.firstElementChild.className.replace("language-","");if(n==="abc")(0,O.$)(e,t.options.cdn);else if(n==="mermaid")(0,B.e)(e,t.options.cdn,t.options.theme);else if(n==="smiles")(0,G.Y)(e,t.options.cdn,t.options.theme);else if(n==="markmap")(0,N.K)(e,t.options.cdn);else if(n==="flowchart")(0,F.D)(e,t.options.cdn);else if(n==="echarts")(0,A.v)(e,t.options.cdn,t.options.theme);else if(n==="mindmap")(0,z.l)(e,t.options.cdn,t.options.theme);else if(n==="plantuml")(0,q.M)(e,t.options.cdn);else if(n==="graphviz")(0,Y.m)(e,t.options.cdn);else if(n==="math")(0,$.T)(e,{cdn:t.options.cdn,math:t.options.preview.math});else{var r=t.options.customRenders.find(function(a){if(a.language===n)return a.render(e,t),!0});r||((0,R.$)(Object.assign({},t.options.preview.hljs),e,t.options.cdn),(0,P.o)(e,t.options.preview.hljs))}e.setAttribute("data-render","1")}},I=v(827),ke=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,n=e.outline.render(e);n===""&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(r){r.innerHTML=n,(0,$.T)(r,{cdn:e.options.cdn,math:e.options.preview.math})})}},Ee=function(e,t){var n=(0,p._Y)(e.target,"SPAN");if(n&&(0,p.KJ)(n,"vditor-toc")){var r=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(r)if(t.options.height==="auto"){var a=r.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(a+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,a)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=r.offsetTop;return}},Oe=function(e,t,n,r){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(n.key==="Backspace"&&(0,I.ED)(e,t[t.currentMode].element,r).start===0)return e.previousElementSibling.remove(),we(t),!0;if(Et(t,n,r,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(n.key==="Delete"&&(0,I.ED)(e,t[t.currentMode].element,r).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),we(t),!0;if(jt(t,n,r,e,e.nextElementSibling))return!0}if(n.key==="Backspace"||n.key==="Delete"){var a=(0,p.KJ)(r.startContainer,"vditor-toc");if(a)return a.remove(),we(t),!0}},Ie=function(e,t,n,r){n===void 0&&(n=!1);var a=(0,p.pt)(t.startContainer);if(a&&!n&&a.getAttribute("data-type")!=="code-block"){if(hn(a.innerHTML)&&a.previousElementSibling||mn(a.innerHTML))return;for(var s=(0,I.ED)(a,e.ir.element,t).start,k=!0,C=s-1;C>a.textContent.substr(0,s).lastIndexOf(`
`);C--)if(a.textContent.charAt(C)!==" "&&a.textContent.charAt(C)!=="	"){k=!1;break}s===0&&(k=!1);for(var M=!0,C=s-1;C<a.textContent.length;C++)if(a.textContent.charAt(C)!==" "&&a.textContent.charAt(C)!==`
`){M=!1;break}if(k){typeof e.options.input=="function"&&e.options.input(g(e));return}if(M&&/^#{1,6} $/.test(a.textContent)&&(M=!1),M){var T=(0,p.KJ)(t.startContainer,"vditor-ir__marker");if(!T){var D=t.startContainer.previousSibling;D&&D.nodeType!==3&&D.classList.contains("vditor-ir__node--expand")&&D.classList.remove("vditor-ir__node--expand"),typeof e.options.input=="function"&&e.options.input(g(e));return}}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(ye){ye.classList.remove("vditor-ir__node--expand")}),a||(a=e.ir.element),!a.querySelector("wbr")){var V=(0,p.KJ)(t.startContainer,"vditor-ir__preview");V?V.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}a.querySelectorAll("[style]").forEach(function(ye){ye.removeAttribute("style")}),a.getAttribute("data-type")==="link-ref-defs-block"&&(a=e.ir.element);var te=a.isEqualNode(e.ir.element),ee=(0,p.Th)(a,"data-type","footnotes-block"),Q="";if(te)Q=a.innerHTML;else{var de=(0,L.f)(t.startContainer,"BLOCKQUOTE"),ae=(0,p.KR)(t.startContainer);if(ae&&(a=ae),de&&(!ae||ae&&!de.contains(ae))&&(a=de),ee&&(a=ee),Q=a.outerHTML,a.tagName==="UL"||a.tagName==="OL"){var J=a.previousElementSibling,he=a.nextElementSibling;J&&(J.tagName==="UL"||J.tagName==="OL")&&(Q=J.outerHTML+Q,J.remove()),he&&(he.tagName==="UL"||he.tagName==="OL")&&(Q=Q+he.outerHTML,he.remove()),Q=Q.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else a.previousElementSibling&&a.previousElementSibling.textContent.replace(y.Y.ZWSP,"")!==""&&r&&r.inputType==="insertParagraph"&&(Q=a.previousElementSibling.outerHTML+Q,a.previousElementSibling.remove());a.innerText.startsWith("```")||(e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ye){ye&&!a.isEqualNode(ye)&&(Q+=ye.outerHTML,ye.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(ye){ye&&!a.isEqualNode(ye)&&(Q+=ye.outerHTML,ye.remove())}))}if(j("SpinVditorIRDOM",Q,"argument",e.options.debugger),Q=e.lute.SpinVditorIRDOM(Q),j("SpinVditorIRDOM",Q,"result",e.options.debugger),te)a.innerHTML=Q;else if(a.outerHTML=Q,ee){var ce=(0,p.Th)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(ce){var me=ce.textContent,De=me.substring(1,me.indexOf("]:")),Te=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(De,'"]'));Te&&Te.setAttribute("aria-label",me.substr(De.length+3).trim().substr(0,24))}}var He,Ke=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");Ke.forEach(function(ye,Ve){Ve===0?He=ye:(He.insertAdjacentHTML("beforeend",ye.innerHTML),ye.remove())}),Ke.length>0&&e.ir.element.insertAdjacentElement("beforeend",Ke[0]);var Ye,Ze=e.ir.element.querySelectorAll("[data-type='footnotes-block']");Ze.forEach(function(ye,Ve){Ve===0?Ye=ye:(Ye.insertAdjacentHTML("beforeend",ye.innerHTML),ye.remove())}),Ze.length>0&&e.ir.element.insertAdjacentElement("beforeend",Ze[0]),(0,I.ir)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(ye){fe(ye,e)}),ke(e),lt(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Z=function(e,t){if(e==="")return!1;if(e.indexOf("⇧")===-1&&e.indexOf("⌘")===-1&&e.indexOf("⌥")===-1)return!(0,o._0)(t)&&!t.altKey&&!t.shiftKey&&t.code===e;if(e==="⇧Tab")return!!(!(0,o._0)(t)&&!t.altKey&&t.shiftKey&&t.code==="Tab");var n=e.split("");if(e.startsWith("⌥")){var r=n.length===3?n[2]:n[1];return!!((n.length===3?(0,o._0)(t):!(0,o._0)(t))&&t.altKey&&!t.shiftKey&&t.code===(/^[0-9]$/.test(r)?"Digit":"Key")+r)}e==="⌘Enter"&&(n=["⌘","Enter"]);var a=n.length>2&&n[0]==="⇧",s=a?n[2]:n[1];return a&&((0,o.gm)()||!/Mac/.test(navigator.platform))&&(s==="-"?s="_":s==="="&&(s="+")),!!((0,o._0)(t)&&t.key.toLowerCase()===s.toLowerCase()&&!t.altKey&&(!a&&!t.shiftKey||a&&t.shiftKey))},ge=function(e){var t=e.startContainer;if(t.nodeType===3&&t.nodeValue.length!==e.startOffset)return!1;for(var n=t.nextSibling;n&&n.textContent==="";)n=n.nextSibling;if(n){if(n&&n.nodeType!==3&&n.classList.contains("vditor-ir__node")&&!n.getAttribute("data-block"))return n}else{var r=(0,p.KJ)(t,"vditor-ir__marker");if(r&&!r.nextSibling){var a=t.parentElement.parentElement.nextSibling;if(a&&a.nodeType!==3&&a.classList.contains("vditor-ir__node"))return a}return!1}return!1},re=function(e){var t=e.startContainer,n=t.previousSibling;return t.nodeType===3&&e.startOffset===0&&n&&n.nodeType!==3&&n.classList.contains("vditor-ir__node")&&!n.getAttribute("data-block")?n:!1},K=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(k){k.classList.remove("vditor-ir__node--expand")});var n=(0,p.XW)(e.startContainer,"vditor-ir__node"),r=!e.collapsed&&(0,p.XW)(e.endContainer,"vditor-ir__node");if(!(!e.collapsed&&(!n||n!==r))){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),(0,I.jl)(e));var a=ge(e);if(a){a.classList.add("vditor-ir__node--expand"),a.classList.remove("vditor-ir__node--hidden");return}var s=re(e);if(s){s.classList.add("vditor-ir__node--expand"),s.classList.remove("vditor-ir__node--hidden");return}}},Se=function(e,t){if(e.ir.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var n=(0,I.RN)(e),r=n.startContainer;if(!Hn(t,e,r)||(On(n,e,t),Zn(n),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,o._0)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var a=(0,p.Th)(r,"data-newline","1");if(!(0,o._0)(t)&&!t.altKey&&!t.shiftKey&&t.key==="Enter"&&a&&n.startOffset<a.textContent.length){var s=a.previousElementSibling;s&&(n.insertNode(document.createTextNode(s.textContent)),n.collapse(!1));var k=a.nextSibling;k&&(n.insertNode(document.createTextNode(k.textContent)),n.collapse(!0))}var C=(0,p._Y)(r,"P");if(Pn(t,e,C,n)||$n(n,e,C,t)||qn(e,n,t,C))return!0;var M=(0,p.KJ)(r,"vditor-ir__marker--pre");if(M&&M.tagName==="PRE"){var T=M.firstChild;if(Un(e,t,M,n)||(T.getAttribute("data-type")==="math-block"||T.getAttribute("data-type")==="html-block")&&Et(e,t,n,T,M.parentElement)||jt(e,t,n,T,M.parentElement))return!0}var D=(0,p.Th)(r,"data-type","code-block-info");if(D){if(t.key==="Enter"||t.key==="Tab")return n.selectNodeContents(D.nextElementSibling.firstChild),n.collapse(!0),t.preventDefault(),x(e,["hint"]),!0;if(t.key==="Backspace"){var V=(0,I.ED)(D,e.ir.element).start;V===1&&n.setStart(r,0),V===2&&(e.hint.recentLanguage="")}if(Et(e,t,n,D,D.parentElement))return x(e,["hint"]),!0}var te=(0,p._Y)(r,"TD")||(0,p._Y)(r,"TH");if(t.key.indexOf("Arrow")>-1&&te){var ee=Lr(te);if(ee&&Et(e,t,n,te,ee))return!0;var Q=Ar(te);if(Q&&jt(e,t,n,te,Q))return!0}if(Yn(e,t,n)||Wn(e,n,t)||gn(e,n,t))return!0;var de=(0,L.c)(r);if(de){if(Z("⌘=",t)){var ae=de.querySelector(".vditor-ir__marker--heading");return ae&&ae.textContent.trim().length>1&&Ht(e,ae.textContent.substr(1)),t.preventDefault(),!0}if(Z("⌘-",t)){var ae=de.querySelector(".vditor-ir__marker--heading");return ae&&ae.textContent.trim().length<6&&Ht(e,ae.textContent.trim()+"# "),t.preventDefault(),!0}}var J=(0,p.pt)(r);if(t.key==="Backspace"&&!(0,o._0)(t)&&!t.shiftKey&&!t.altKey&&n.toString()===""){if(Kn(e,n,t,C))return!0;if(J&&J.previousElementSibling&&J.tagName!=="UL"&&J.tagName!=="OL"&&(J.previousElementSibling.getAttribute("data-type")==="code-block"||J.previousElementSibling.getAttribute("data-type")==="math-block")){var he=(0,I.ED)(J,e.ir.element,n).start;if(he===0||he===1&&J.innerText.startsWith(y.Y.ZWSP))return n.selectNodeContents(J.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),n.collapse(!1),K(n,e),J.textContent.trim().replace(y.Y.ZWSP,"")===""&&(J.remove(),lt(e)),t.preventDefault(),!0}if(de){var ce=de.firstElementChild.textContent.length;(0,I.ED)(de,e.ir.element).start===ce&&ce!==0&&(n.setStart(de.firstElementChild.firstChild,ce-1),n.collapse(!0),(0,I.jl)(n))}}return(t.key==="ArrowUp"||t.key==="ArrowDown")&&J&&(J.querySelectorAll(".vditor-ir__node").forEach(function(me){me.contains(r)||me.classList.add("vditor-ir__node--hidden")}),Gn(t,J,n))?!0:(In(n,t.key),J&&Oe(J,e,t,n)?(t.preventDefault(),!0):!1)},oe=v(726),Ae=function(e,t){e.querySelectorAll("[data-type=footnotes-link]").forEach(function(n){for(var r=n.parentElement,a=r.nextSibling;a&&a.textContent.startsWith("    ");){var s=a;s.childNodes.forEach(function(k){r.append(k.cloneNode(!0))}),a=a.nextSibling,s.remove()}t&&t(r)})},ve=function(e,t){var n,r=getSelection().getRangeAt(0).cloneRange(),a=r.startContainer;r.startContainer.nodeType!==3&&r.startContainer.tagName==="DIV"&&(a=r.startContainer.childNodes[r.startOffset-1]);var s=(0,p.Th)(a,"data-block","0");if(s&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var k=(0,I.ED)(s,e.sv.element,r).start,C=!0,M=k-1;M>s.textContent.substr(0,k).lastIndexOf(`
`);M--)if(s.textContent.charAt(M)!==" "&&s.textContent.charAt(M)!=="	"){C=!1;break}if(k===0&&(C=!1),C){Be(e);return}if(t.inputType==="deleteContentBackward"){var T=(0,p.Th)(a,"data-type","code-block-open-marker")||(0,p.Th)(a,"data-type","code-block-close-marker");if(T){if(T.getAttribute("data-type")==="code-block-close-marker"){var D=Vt(a,"code-block-open-marker");if(D){D.textContent=T.textContent,Be(e);return}}if(T.getAttribute("data-type")==="code-block-open-marker"){var D=Vt(a,"code-block-close-marker",!1);if(D){D.textContent=T.textContent,Be(e);return}}}var V=(0,p.Th)(a,"data-type","math-block-open-marker");if(V){var te=V.nextElementSibling.nextElementSibling;te&&te.getAttribute("data-type")==="math-block-close-marker"&&(te.remove(),Be(e));return}s.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(J){J.textContent.length===1&&J.remove()}),s.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(J){J.textContent.length===1&&J.remove()});var ee=(0,p.Th)(a,"data-type","heading-marker");if(ee&&ee.textContent.indexOf("#")===-1){Be(e);return}}if((t.data===" "||t.inputType==="deleteContentBackward")&&((0,p.Th)(a,"data-type","padding")||(0,p.Th)(a,"data-type","li-marker")||(0,p.Th)(a,"data-type","task-marker")||(0,p.Th)(a,"data-type","blockquote-marker"))){Be(e);return}}if(s&&s.textContent.trimRight()==="$$"){Be(e);return}s||(s=e.sv.element),((n=s.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-type"))==="link-ref-defs-block"&&(s=e.sv.element),(0,p.Th)(a,"data-type","footnotes-link")&&(s=e.sv.element),s.textContent.indexOf(Lute.Caret)===-1&&r.insertNode(document.createTextNode(Lute.Caret)),s.querySelectorAll("[style]").forEach(function(J){J.removeAttribute("style")}),s.querySelectorAll("font").forEach(function(J){J.outerHTML=J.innerHTML});var Q=s.textContent,de=s.isEqualNode(e.sv.element);if(de)Q=s.textContent;else{s.previousElementSibling&&(Q=s.previousElementSibling.textContent+Q,s.previousElementSibling.remove()),s.previousElementSibling&&Q.indexOf(`---
`)===0&&(Q=s.previousElementSibling.textContent+Q,s.previousElementSibling.remove());var ae="";e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(J,he){J&&!s.isEqualNode(J.parentElement)&&(ae+=J.parentElement.textContent+`
`,J.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(J,he){J&&!s.isEqualNode(J.parentElement)&&(ae+=J.parentElement.textContent+`
`,J.parentElement.remove())}),Q=ae+Q}Q=Ln(Q,e),de?s.innerHTML=Q:s.outerHTML=Q,e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(J){e.sv.element.insertAdjacentElement("beforeend",J.parentElement)}),Ae(e.sv.element,function(J){e.sv.element.insertAdjacentElement("beforeend",J)}),(0,I.ir)(e.sv.element,r),Pe(e),Be(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Re=function(e,t){var n,r,a,s,k;if(e.sv.composingLock=t.isComposing,t.isComposing||(t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,o._0)(t)&&t.key!=="Escape"))return!1;var C=(0,I.RN)(e),M=C.startContainer;C.startContainer.nodeType!==3&&C.startContainer.tagName==="DIV"&&(M=C.startContainer.childNodes[C.startOffset-1]);var T=(0,p.Th)(M,"data-type","text"),D=(0,p.Th)(M,"data-type","blockquote-marker");if(!D&&C.startOffset===0&&T&&T.previousElementSibling&&T.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(D=T.previousElementSibling),D&&t.key==="Enter"&&!(0,o._0)(t)&&!t.altKey&&D.nextElementSibling.textContent.trim()===""&&(0,I.ED)(D,e.sv.element,C).start===D.textContent.length)return((n=D.previousElementSibling)===null||n===void 0?void 0:n.getAttribute("data-type"))==="padding"&&D.previousElementSibling.setAttribute("data-action","enter-remove"),D.remove(),Be(e),t.preventDefault(),!0;var V=(0,p.Th)(M,"data-type","li-marker"),te=(0,p.Th)(M,"data-type","task-marker"),ee=V;if(ee||te&&te.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(ee=te),!ee&&C.startOffset===0&&T&&T.previousElementSibling&&(T.previousElementSibling.getAttribute("data-type")==="li-marker"||T.previousElementSibling.getAttribute("data-type")==="task-marker")&&(ee=T.previousElementSibling),ee){var Q=(0,I.ED)(ee,e.sv.element,C).start,de=ee.getAttribute("data-type")==="task-marker",ae=ee;if(de&&(ae=ee.previousElementSibling.previousElementSibling.previousElementSibling),Q===ee.textContent.length){if(t.key==="Enter"&&!(0,o._0)(t)&&!t.altKey&&!t.shiftKey&&ee.nextElementSibling.textContent.trim()==="")return((r=ae.previousElementSibling)===null||r===void 0?void 0:r.getAttribute("data-type"))==="padding"?(ae.previousElementSibling.remove(),ve(e)):(de&&(ae.remove(),ee.previousElementSibling.previousElementSibling.remove(),ee.previousElementSibling.remove()),ee.nextElementSibling.remove(),ee.remove(),Be(e)),t.preventDefault(),!0;if(t.key==="Tab")return t.shiftKey?ae.previousElementSibling.getAttribute("data-type")==="padding"&&ae.previousElementSibling.remove():ae.insertAdjacentHTML("beforebegin",'<span data-type="padding">'.concat(ae.textContent.replace(/\S/g," "),"</span>")),/^\d/.test(ae.textContent)&&(ae.textContent=ae.textContent.replace(/^\d{1,}/,"1"),C.selectNodeContents(ee.firstChild),C.collapse(!1)),ve(e),t.preventDefault(),!0}}if(gn(e,C,t))return!0;var J=(0,p.Th)(M,"data-block","0"),he=(0,L.f)(M,"SPAN");if(t.key==="Enter"&&!(0,o._0)(t)&&!t.altKey&&!t.shiftKey&&J){var ce=!1,me=J.textContent.match(/^\n+/);(0,I.ED)(J,e.sv.element).start<=(me?me[0].length:0)&&(ce=!0);var De=`
`;if(he){if(((a=he.previousElementSibling)===null||a===void 0?void 0:a.getAttribute("data-action"))==="enter-remove")return he.previousElementSibling.remove(),Be(e),t.preventDefault(),!0;De+=br(he)}return C.insertNode(document.createTextNode(De)),C.collapse(!1),J&&J.textContent.trim()!==""&&!ce?ve(e):Be(e),t.preventDefault(),!0}if(t.key==="Backspace"&&!(0,o._0)(t)&&!t.altKey&&!t.shiftKey){if(he&&((s=he.previousElementSibling)===null||s===void 0?void 0:s.getAttribute("data-type"))==="newline"&&(0,I.ED)(he,e.sv.element,C).start===1&&he.getAttribute("data-type").indexOf("code-block-")===-1)return C.setStart(he,0),C.extractContents(),he.textContent.trim()!==""?ve(e):Be(e),t.preventDefault(),!0;if(J&&(0,I.ED)(J,e.sv.element,C).start===0&&J.previousElementSibling){C.extractContents();var Te=J.previousElementSibling.lastElementChild;return Te.getAttribute("data-type")==="newline"&&(Te.remove(),Te=J.previousElementSibling.lastElementChild),Te.getAttribute("data-type")!=="newline"&&(Te.insertAdjacentHTML("afterend",J.innerHTML),J.remove()),J.textContent.trim()!==""&&!(!((k=J.previousElementSibling)===null||k===void 0)&&k.querySelector('[data-type="code-block-open-marker"]'))?ve(e):(Te.getAttribute("data-type")!=="newline"&&(C.selectNodeContents(Te.lastChild),C.collapse(!1)),Be(e)),t.preventDefault(),!0}}return!1},pe=v(873),le=function(e){e.options.theme==="dark"?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")},ze=function(e){e.element.innerHTML="",e.element.classList.add("vditor"),e.options.rtl&&e.element.setAttribute("dir","rtl"),le(e),(0,pe.H)(e.options.preview.theme.current,e.options.preview.theme.path),typeof e.options.height=="number"?e.element.style.height=e.options.height+"px":e.element.style.height=e.options.height,typeof e.options.minHeight=="number"&&(e.element.style.minHeight=e.options.minHeight+"px"),typeof e.options.width=="number"?e.element.style.width=e.options.width+"px":e.element.style.width=e.options.width,e.element.appendChild(e.toolbar.element);var t=document.createElement("div");if(t.className="vditor-content",e.options.outline.position==="left"&&t.appendChild(e.outline.element),t.appendChild(e.wysiwyg.element.parentElement),t.appendChild(e.sv.element),t.appendChild(e.ir.element.parentElement),t.appendChild(e.preview.element),e.toolbar.elements.devtools&&t.appendChild(e.devtools.element),e.options.outline.position==="right"&&(e.outline.element.classList.add("vditor-outline--right"),t.appendChild(e.outline.element)),e.upload&&t.appendChild(e.upload.element),e.options.resize.enable&&t.appendChild(e.resize.element),t.appendChild(e.hint.element),t.appendChild(e.tip.element),e.element.appendChild(t),t.addEventListener("click",function(){x(e,["subToolbar"])}),e.toolbar.elements.export&&e.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),yt(e,e.options.mode,et(e)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var n=!1,r=function(a){n||(n=!0,requestAnimationFrame(function(){n=!1;var s=e.toolbar.element;s.style.transform="none",s.getBoundingClientRect().top<0&&(s.style.transform="translate(0, ".concat(-s.getBoundingClientRect().top,"px)"))}))};window.visualViewport.addEventListener("scroll",r),window.visualViewport.addEventListener("resize",r)}},Ne=function(e){var t=window.innerWidth<=y.Y.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px ".concat(Math.max(t,n),"px")}if(e.ir.element.parentElement.style.display!=="none"){var n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.ir.element.style.padding="10px ".concat(Math.max(t,n),"px")}e.preview.element.style.display!=="block"?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0)+"px"},Je=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"?(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)):t=e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}},ot;function Qe(){window.removeEventListener("resize",ot)}var et=function(e){Je(e),Qe(),window.addEventListener("resize",ot=function(){Ne(e),Je(e)});var t=(0,o.D)()&&localStorage.getItem(e.options.cache.id);return(!e.options.cache.enable||!t)&&(e.options.value?t=e.options.value:e.originalInnerHTML?t=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(t="")),t||""},tt=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,I.Co)(e[e.currentMode].element)){c(e.toolbar.elements,y.Y.EDIT_TOOLBARS),h(e.toolbar.elements,y.Y.EDIT_TOOLBARS);var t=(0,I.RN)(e),n=t.startContainer;t.startContainer.nodeType===3&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]);var r=e.currentMode==="sv"?(0,p.Th)(n,"data-type","heading"):(0,L.c)(n);r&&l(e.toolbar.elements,["headings"]);var a=e.currentMode==="sv"?(0,p.Th)(n,"data-type","blockquote"):(0,p._Y)(n,"BLOCKQUOTE");a&&l(e.toolbar.elements,["quote"]);var s=(0,p.Th)(n,"data-type","strong");s&&l(e.toolbar.elements,["bold"]);var k=(0,p.Th)(n,"data-type","em");k&&l(e.toolbar.elements,["italic"]);var C=(0,p.Th)(n,"data-type","s");C&&l(e.toolbar.elements,["strike"]);var M=(0,p.Th)(n,"data-type","a");M&&l(e.toolbar.elements,["link"]);var T=(0,p._Y)(n,"LI");T?(T.classList.contains("vditor-task")?l(e.toolbar.elements,["check"]):T.parentElement.tagName==="OL"?l(e.toolbar.elements,["ordered-list"]):T.parentElement.tagName==="UL"&&l(e.toolbar.elements,["list"]),h(e.toolbar.elements,["outdent","indent"])):d(e.toolbar.elements,["outdent","indent"]);var D=(0,p.Th)(n,"data-type","code-block");D&&(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),l(e.toolbar.elements,["code"]));var V=(0,p.Th)(n,"data-type","code");V&&(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),l(e.toolbar.elements,["inline-code"]));var te=(0,p.Th)(n,"data-type","table");te&&d(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},Ce=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var n=g(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,o.D)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},vt=function(e){for(var t=e.previousSibling;t;){if(t.nodeType!==3&&t.tagName==="A"&&!t.previousSibling&&t.innerHTML.replace(y.Y.ZWSP,"")===""&&t.nextSibling)return t;t=t.previousSibling}return!1},mt=function(e){for(var t=e.startContainer.nextSibling;t&&t.textContent==="";)t=t.nextSibling;return!!(t&&t.nodeType!==3&&(t.tagName==="CODE"||t.getAttribute("data-type")==="math-inline"||t.getAttribute("data-type")==="html-entity"||t.getAttribute("data-type")==="html-inline"))},$t=function(e){for(var t="",n=e.nextSibling;n;)n.nodeType===3?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},Pt=function(e){for(var t="",n=e.previousSibling;n;)n.nodeType===3?t=n.textContent+t:t=n.outerHTML+t,n=n.previousSibling;return t},Qt=function(e){for(var t=e;t&&!t.nextSibling;)t=t.parentElement;return t.nextSibling},en=function(e){var t=Pt(e.startContainer),n=$t(e.startContainer),r=e.startContainer.textContent,a=e.startOffset,s="",k="";return(r.substr(0,a)!==""&&r.substr(0,a)!==y.Y.ZWSP||t)&&(s="".concat(t).concat(r.substr(0,a))),(r.substr(a)!==""&&r.substr(a)!==y.Y.ZWSP||n)&&(k="".concat(r.substr(a)).concat(n)),{afterHTML:k,beforeHTML:s}},Tt=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(n){if(n.nodeType===3){var r=document.createElement("p");r.setAttribute("data-block","0"),r.textContent=n.textContent;var a=t.startContainer.nodeType===3?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(r,n),n.remove(),t.setStart(r.firstChild,Math.min(r.firstChild.textContent.length,a)),t.collapse(!0),(0,I.jl)(t),!0}else if(!n.getAttribute("data-block"))return n.tagName==="P"?n.remove():(n.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'.concat(n.innerHTML,"</p>")):n.tagName==="BR"?n.outerHTML='<p data-block="0">'.concat(n.outerHTML,"<wbr></p>"):(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'.concat(n.outerHTML,"</p>")),(0,I.ir)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},bt=function(e,t){var n=(0,I.RN)(e),r=(0,p.pt)(n.startContainer);r||(r=n.startContainer.childNodes[n.startOffset]),!r&&e.wysiwyg.element.children.length===0&&(r=e.wysiwyg.element),r&&!r.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),r.innerHTML.trim()==="<wbr>"&&(r.innerHTML="<wbr><br>"),r.tagName==="BLOCKQUOTE"||r.classList.contains("vditor-reset")?r.innerHTML="<".concat(t,' data-block="0">').concat(r.innerHTML.trim(),"</").concat(t,">"):r.outerHTML="<".concat(t,' data-block="0">').concat(r.innerHTML.trim(),"</").concat(t,">"),(0,I.ir)(e.wysiwyg.element,n),ke(e))},Mt=function(e){var t=getSelection().getRangeAt(0),n=(0,p.pt)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'.concat(n.innerHTML,"</p>"),(0,I.ir)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},gt=function(e,t,n){n===void 0&&(n=!0);var r=e.previousElementSibling,a=r.ownerDocument.createRange();r.tagName==="CODE"?(r.style.display="inline-block",n?a.setStart(r.firstChild,1):a.selectNodeContents(r)):(r.style.display="block",r.firstChild.firstChild||r.firstChild.appendChild(document.createTextNode("")),a.selectNodeContents(r.firstChild)),n?a.collapse(!0):a.collapse(!1),(0,I.jl)(a),!e.firstElementChild.classList.contains("language-mindmap")&&Pe(t)},tn=function(e,t){if(e.wysiwyg.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var n=(0,I.RN)(e),r=n.startContainer;if(!Hn(t,e,r)||(On(n,e,t),Zn(n),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,o._0)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var a=(0,p.pt)(r),s=(0,p._Y)(r,"P");if(Pn(t,e,s,n)||$n(n,e,s,t)||Yn(e,t,n))return!0;var k=(0,p.KJ)(r,"vditor-wysiwyg__block");if(k){if(t.key==="Escape"&&k.children.length===2)return e.wysiwyg.popover.style.display="none",k.firstElementChild.style.display="none",e.wysiwyg.element.blur(),t.preventDefault(),!0;if(!(0,o._0)(t)&&!t.shiftKey&&t.altKey&&t.key==="Enter"&&k.getAttribute("data-type")==="code-block"){var C=e.wysiwyg.popover.querySelector(".vditor-input");return C.focus(),C.select(),t.preventDefault(),!0}if(k.getAttribute("data-block")==="0"&&(Un(e,t,k.firstElementChild,n)||jt(e,t,n,k.firstElementChild,k)||k.getAttribute("data-type")!=="yaml-front-matter"&&Et(e,t,n,k.firstElementChild,k)))return!0}if(qn(e,n,t,s))return!0;var M=(0,p.Ab)(r,"BLOCKQUOTE");if(M&&!t.shiftKey&&t.altKey&&t.key==="Enter"){(0,o._0)(t)?n.setStartBefore(M):n.setStartAfter(M),(0,I.jl)(n);var T=document.createElement("p");return T.setAttribute("data-block","0"),T.innerHTML=`
`,n.insertNode(T),n.collapse(!0),(0,I.jl)(n),Ce(e),Pe(e),t.preventDefault(),!0}var D=(0,L.c)(r);if(D){if(D.tagName==="H6"&&r.textContent.length===n.startOffset&&!(0,o._0)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"){var V=document.createElement("p");return V.textContent=`
`,V.setAttribute("data-block","0"),r.parentElement.insertAdjacentElement("afterend",V),n.setStart(V,0),(0,I.jl)(n),Ce(e),Pe(e),t.preventDefault(),!0}if(Z("⌘=",t)){var te=parseInt(D.tagName.substr(1),10)-1;return te>0&&(bt(e,"h".concat(te)),Ce(e)),t.preventDefault(),!0}if(Z("⌘-",t)){var te=parseInt(D.tagName.substr(1),10)+1;return te<7&&(bt(e,"h".concat(te)),Ce(e)),t.preventDefault(),!0}t.key==="Backspace"&&!(0,o._0)(t)&&!t.shiftKey&&!t.altKey&&D.textContent.length===1&&Mt(e)}if(Wn(e,n,t))return!0;if(t.altKey&&t.key==="Enter"&&!(0,o._0)(t)&&!t.shiftKey){var ee=(0,p._Y)(r,"A"),Q=(0,p.Th)(r,"data-type","link-ref"),de=(0,p.Th)(r,"data-type","footnotes-ref");if(ee||Q||de||D&&D.tagName.length===2){var ae=e.wysiwyg.popover.querySelector("input");ae.focus(),ae.select()}}if(qe(e,t))return!0;if(Z("⇧⌘U",t)){var J=e.wysiwyg.popover.querySelector('[data-type="up"]');if(J)return J.click(),t.preventDefault(),!0}if(Z("⇧⌘D",t)){var J=e.wysiwyg.popover.querySelector('[data-type="down"]');if(J)return J.click(),t.preventDefault(),!0}if(gn(e,n,t))return!0;if(!(0,o._0)(t)&&t.shiftKey&&!t.altKey&&t.key==="Enter"&&r.parentElement.tagName!=="LI"&&r.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName)?n.insertNode(document.createTextNode(`
`+y.Y.ZWSP)):n.insertNode(document.createTextNode(`
`)),n.collapse(!1),(0,I.jl)(n),Ce(e),Pe(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,o._0)(t)&&!t.shiftKey&&!t.altKey&&n.toString()===""){if(Kn(e,n,t,s))return!0;if(a){if(a.previousElementSibling&&a.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&a.previousElementSibling.getAttribute("data-block")==="0"&&a.tagName!=="UL"&&a.tagName!=="OL"){var he=(0,I.ED)(a,e.wysiwyg.element,n).start;if(he===0&&n.startOffset===0||he===1&&a.innerText.startsWith(y.Y.ZWSP))return gt(a.previousElementSibling.lastElementChild,e,!1),a.innerHTML.trim().replace(y.Y.ZWSP,"")===""&&(a.remove(),Ce(e)),t.preventDefault(),!0}var ce=n.startOffset;if(n.toString()===""&&r.nodeType===3&&r.textContent.charAt(ce-2)===`
`&&r.textContent.charAt(ce-1)!==y.Y.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName))return r.textContent=r.textContent.substring(0,ce-1)+y.Y.ZWSP,n.setStart(r,ce),n.collapse(!0),Ce(e),t.preventDefault(),!0;r.textContent===y.Y.ZWSP&&n.startOffset===1&&!r.previousSibling&&mt(n)&&(r.textContent=""),a.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(De){De.firstElementChild.style.display="inline",De.lastElementChild.style.display="none"}),a.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(De){De.firstElementChild.style.display="inline",De.lastElementChild.style.display="none"})}}if((0,o.gm)()&&n.startOffset===1&&r.textContent.indexOf(y.Y.ZWSP)>-1&&r.previousSibling&&r.previousSibling.nodeType!==3&&r.previousSibling.tagName==="CODE"&&(t.key==="Backspace"||t.key==="ArrowLeft"))return n.selectNodeContents(r.previousSibling),n.collapse(!1),t.preventDefault(),!0;if(Gn(t,a,n))return t.preventDefault(),!0;if(In(n,t.key),t.key==="ArrowDown"){var me=r.nextSibling;me&&me.nodeType!==3&&me.getAttribute("data-type")==="math-inline"&&n.setStartAfter(me)}return a&&Oe(a,e,t,n)?(t.preventDefault(),!0):!1},qe=function(e,t){if(Z("⇧⌘X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');return n&&n.click(),t.preventDefault(),!0}},st=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,I.Co)(e.wysiwyg.element)){c(e.toolbar.elements,y.Y.EDIT_TOOLBARS),h(e.toolbar.elements,y.Y.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;t.startContainer.nodeType===3?n=t.startContainer.parentElement:n=n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var r=(0,p.Th)(n,"data-type","footnotes-block");if(r){e.wysiwyg.popover.innerHTML="",Xe(r,e),We(e,r);return}var a=(0,p._Y)(n,"LI");a?(a.classList.contains("vditor-task")?l(e.toolbar.elements,["check"]):a.parentElement.tagName==="OL"?l(e.toolbar.elements,["ordered-list"]):a.parentElement.tagName==="UL"&&l(e.toolbar.elements,["list"]),h(e.toolbar.elements,["outdent","indent"])):d(e.toolbar.elements,["outdent","indent"]),(0,p._Y)(n,"BLOCKQUOTE")&&l(e.toolbar.elements,["quote"]),((0,p._Y)(n,"B")||(0,p._Y)(n,"STRONG"))&&l(e.toolbar.elements,["bold"]),((0,p._Y)(n,"I")||(0,p._Y)(n,"EM"))&&l(e.toolbar.elements,["italic"]),((0,p._Y)(n,"STRIKE")||(0,p._Y)(n,"S"))&&l(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(ue){ue.classList.remove("vditor-comment--focus")});var s=(0,p.KJ)(n,"vditor-comment");if(s){var k=s.getAttribute("data-cmtids").split(" ");if(k.length>1&&s.nextSibling.isSameNode(s.nextElementSibling)){var C=s.nextElementSibling.getAttribute("data-cmtids").split(" ");k.find(function(ue){if(C.includes(ue))return k=[ue],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(ue){ue.getAttribute("data-cmtids").indexOf(k[0])>-1&&ue.classList.add("vditor-comment--focus")})}var M=(0,p._Y)(n,"A");M&&l(e.toolbar.elements,["link"]);var T=(0,p._Y)(n,"TABLE"),D=(0,L.c)(n);(0,p._Y)(n,"CODE")?(0,p._Y)(n,"PRE")?(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),l(e.toolbar.elements,["code"])):(d(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),l(e.toolbar.elements,["inline-code"])):D?(d(e.toolbar.elements,["bold"]),l(e.toolbar.elements,["headings"])):T&&d(e.toolbar.elements,["table"]);var V=(0,p.KJ)(n,"vditor-toc");if(V){e.wysiwyg.popover.innerHTML="",Xe(V,e),We(e,V);return}var te=(0,L.f)(n,"BLOCKQUOTE");if(te&&(e.wysiwyg.popover.innerHTML="",wt(t,te,e),xt(t,te,e),Xe(te,e),We(e,te)),a&&(e.wysiwyg.popover.innerHTML="",wt(t,a,e),xt(t,a,e),Xe(a,e),We(e,a)),T){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var ee=function(){var ue=T.rows.length,xe=T.rows[0].cells.length,pt=parseInt(Ve.value,10)||ue,ft=parseInt(Ge.value,10)||xe;if(!(pt===ue&&xe===ft)){if(xe!==ft)for(var It=ft-xe,at=0;at<T.rows.length;at++)if(It>0)for(var or=0;or<It;or++)at===0?T.rows[at].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):T.rows[at].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var bn=xe-1;bn>=ft;bn--)T.rows[at].cells[bn].remove();if(ue!==pt){var sr=pt-ue;if(sr>0){for(var wn="<tr>",Ct=0;Ct<ft;Ct++)wn+="<td> </td>";for(var lr=0;lr<sr;lr++)T.querySelector("tbody")?T.querySelector("tbody").insertAdjacentHTML("beforeend",wn):T.querySelector("thead").insertAdjacentHTML("afterend",wn+"</tr>")}else for(var Ct=ue-1;Ct>=pt;Ct--)T.rows[Ct].remove(),T.rows.length===1&&T.querySelector("tbody").remove()}typeof e.options.input=="function"&&e.options.input(g(e))}},Q=function(ue){zt(T,ue),ue==="right"?(he.classList.remove("vditor-icon--current"),ce.classList.remove("vditor-icon--current"),me.classList.add("vditor-icon--current")):ue==="center"?(he.classList.remove("vditor-icon--current"),me.classList.remove("vditor-icon--current"),ce.classList.add("vditor-icon--current")):(ce.classList.remove("vditor-icon--current"),me.classList.remove("vditor-icon--current"),he.classList.add("vditor-icon--current")),(0,I.jl)(t),Ce(e)},de=(0,p._Y)(n,"TD"),ae=(0,p._Y)(n,"TH"),J="left";de?J=de.getAttribute("align")||"left":ae&&(J=ae.getAttribute("align")||"center");var he=document.createElement("button");he.setAttribute("type","button"),he.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,o.fG)("⇧⌘L")+">"),he.setAttribute("data-type","left"),he.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',he.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(J==="left"?" vditor-icon--current":""),he.onclick=function(){Q("left")};var ce=document.createElement("button");ce.setAttribute("type","button"),ce.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,o.fG)("⇧⌘C")+">"),ce.setAttribute("data-type","center"),ce.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',ce.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(J==="center"?" vditor-icon--current":""),ce.onclick=function(){Q("center")};var me=document.createElement("button");me.setAttribute("type","button"),me.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,o.fG)("⇧⌘R")+">"),me.setAttribute("data-type","right"),me.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',me.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(J==="right"?" vditor-icon--current":""),me.onclick=function(){Q("right")};var De=document.createElement("button");De.setAttribute("type","button"),De.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,o.fG)("⌘=")+">"),De.setAttribute("data-type","insertRow"),De.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',De.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",De.onclick=function(){var ue=getSelection().getRangeAt(0).startContainer,xe=(0,p._Y)(ue,"TD")||(0,p._Y)(ue,"TH");xe&&Vn(e,t,xe)};var Te=document.createElement("button");Te.setAttribute("type","button"),Te.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,o.fG)("⇧⌘F")+">"),Te.setAttribute("data-type","insertRow"),Te.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',Te.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Te.onclick=function(){var ue=getSelection().getRangeAt(0).startContainer,xe=(0,p._Y)(ue,"TD")||(0,p._Y)(ue,"TH");xe&&Bn(e,t,xe)};var He=document.createElement("button");He.setAttribute("type","button"),He.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,o.fG)("⇧⌘=")+">"),He.setAttribute("data-type","insertColumn"),He.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',He.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",He.onclick=function(){var ue=getSelection().getRangeAt(0).startContainer,xe=(0,p._Y)(ue,"TD")||(0,p._Y)(ue,"TH");xe&&Yt(e,T,xe)};var Ke=document.createElement("button");Ke.setAttribute("type","button"),Ke.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,o.fG)("⇧⌘G")+">"),Ke.setAttribute("data-type","insertColumn"),Ke.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',Ke.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Ke.onclick=function(){var ue=getSelection().getRangeAt(0).startContainer,xe=(0,p._Y)(ue,"TD")||(0,p._Y)(ue,"TH");xe&&Yt(e,T,xe,"beforebegin")};var Ye=document.createElement("button");Ye.setAttribute("type","button"),Ye.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,o.fG)("⌘-")+">"),Ye.setAttribute("data-type","deleteRow"),Ye.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',Ye.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Ye.onclick=function(){var ue=getSelection().getRangeAt(0).startContainer,xe=(0,p._Y)(ue,"TD")||(0,p._Y)(ue,"TH");xe&&Fn(e,t,xe)};var Ze=document.createElement("button");Ze.setAttribute("type","button"),Ze.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,o.fG)("⇧⌘-")+">"),Ze.setAttribute("data-type","deleteColumn"),Ze.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',Ze.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Ze.onclick=function(){var ue=getSelection().getRangeAt(0).startContainer,xe=(0,p._Y)(ue,"TD")||(0,p._Y)(ue,"TH");xe&&zn(e,t,T,xe)};var ye=document.createElement("span");ye.setAttribute("aria-label",window.VditorI18n.row),ye.className="vditor-tooltipped vditor-tooltipped__n";var Ve=document.createElement("input");ye.appendChild(Ve),Ve.type="number",Ve.min="1",Ve.className="vditor-input",Ve.style.width="42px",Ve.style.textAlign="center",Ve.setAttribute("placeholder",window.VditorI18n.row),Ve.value=T.rows.length.toString(),Ve.oninput=function(){ee()},Ve.onkeydown=function(ue){if(!ue.isComposing){if(ue.key==="Tab"){Ge.focus(),Ge.select(),ue.preventDefault();return}qe(e,ue)||rt(ue,t)}};var Wt=document.createElement("span");Wt.setAttribute("aria-label",window.VditorI18n.column),Wt.className="vditor-tooltipped vditor-tooltipped__n";var Ge=document.createElement("input");Wt.appendChild(Ge),Ge.type="number",Ge.min="1",Ge.className="vditor-input",Ge.style.width="42px",Ge.style.textAlign="center",Ge.setAttribute("placeholder",window.VditorI18n.column),Ge.value=T.rows[0].cells.length.toString(),Ge.oninput=function(){ee()},Ge.onkeydown=function(ue){if(!ue.isComposing){if(ue.key==="Tab"){Ve.focus(),Ve.select(),ue.preventDefault();return}qe(e,ue)||rt(ue,t)}},wt(t,T,e),xt(t,T,e),Xe(T,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",he),e.wysiwyg.popover.insertAdjacentElement("beforeend",ce),e.wysiwyg.popover.insertAdjacentElement("beforeend",me),e.wysiwyg.popover.insertAdjacentElement("beforeend",Te),e.wysiwyg.popover.insertAdjacentElement("beforeend",De),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ke),e.wysiwyg.popover.insertAdjacentElement("beforeend",He),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ye),e.wysiwyg.popover.insertAdjacentElement("beforeend",Ze),e.wysiwyg.popover.insertAdjacentElement("beforeend",ye),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",Wt),We(e,T)}var vn=(0,p.Th)(n,"data-type","link-ref");vn&&be(e,vn,t);var _t=(0,p.Th)(n,"data-type","footnotes-ref");if(_t){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var ye=document.createElement("span");ye.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,o.fG)("⌥Enter")+">"),ye.className="vditor-tooltipped vditor-tooltipped__n";var ct=document.createElement("input");ye.appendChild(ct),ct.className="vditor-input",ct.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,o.fG)("⌥Enter")+">"),ct.style.width="120px",ct.value=_t.getAttribute("data-footnotes-label"),ct.oninput=function(){ct.value.trim()!==""&&_t.setAttribute("data-footnotes-label",ct.value),typeof e.options.input=="function"&&e.options.input(g(e))},ct.onkeydown=function(xe){xe.isComposing||qe(e,xe)||rt(xe,t)},Xe(_t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",ye),We(e,_t)}var Fe=(0,p.KJ)(n,"vditor-wysiwyg__block"),ar=Fe?Fe.getAttribute("data-type").indexOf("block")>-1:!1;if(e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(ue){if(!Fe||Fe&&ar&&!Fe.contains(ue)){var xe=ue.previousElementSibling;xe.style.display="none"}}),Fe&&ar){if(e.wysiwyg.popover.innerHTML="",wt(t,Fe,e),xt(t,Fe,e),Xe(Fe,e),Fe.getAttribute("data-type")==="code-block"){var Kt=document.createElement("span");Kt.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,o.fG)("⌥Enter")+">"),Kt.className="vditor-tooltipped vditor-tooltipped__n";var nt=document.createElement("input");Kt.appendChild(nt);var Ot=Fe.firstElementChild.firstElementChild;nt.className="vditor-input",nt.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,o.fG)("⌥Enter")+">"),nt.value=Ot.className.indexOf("language-")>-1?Ot.className.split("-")[1].split(" ")[0]:"",nt.oninput=function(ue){nt.value.trim()!==""?Ot.className="language-".concat(nt.value):(Ot.className="",e.hint.recentLanguage=""),Fe.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Fe.lastElementChild.innerHTML=Fe.firstElementChild.innerHTML,fe(Fe.lastElementChild,e)),Ce(e),ue.detail===1&&(t.setStart(Ot.firstChild,0),t.collapse(!0),(0,I.jl)(t))},nt.onkeydown=function(ue){if(!ue.isComposing&&!qe(e,ue)){if(ue.key==="Escape"&&e.hint.element.style.display==="block"){e.hint.element.style.display="none",ue.preventDefault();return}e.hint.select(ue,e),rt(ue,t)}},nt.onkeyup=function(ue){var xe,pt;if(!(ue.isComposing||ue.key==="Enter"||ue.key==="ArrowUp"||ue.key==="Escape"||ue.key==="ArrowDown")){var ft=[],It=nt.value.substring(0,nt.selectionStart);(e.options.preview.hljs.langs||y.Y.ALIAS_CODE_LANGUAGES.concat(((pt=(xe=window.hljs)===null||xe===void 0?void 0:xe.listLanguages())!==null&&pt!==void 0?pt:[]).sort())).forEach(function(at){at.indexOf(It.toLowerCase())>-1&&ft.push({html:at,value:at})}),e.hint.genHTML(ft,It,e),ue.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",Kt)}We(e,Fe)}else Fe=void 0;if(D){e.wysiwyg.popover.innerHTML="";var ye=document.createElement("span");ye.setAttribute("aria-label","ID<"+(0,o.fG)("⌥Enter")+">"),ye.className="vditor-tooltipped vditor-tooltipped__n";var dt=document.createElement("input");ye.appendChild(dt),dt.className="vditor-input",dt.setAttribute("placeholder","ID<"+(0,o.fG)("⌥Enter")+">"),dt.style.width="120px",dt.value=D.getAttribute("data-id")||"",dt.oninput=function(){D.setAttribute("data-id",dt.value),typeof e.options.input=="function"&&e.options.input(g(e))},dt.onkeydown=function(xe){xe.isComposing||qe(e,xe)||rt(xe,t)},wt(t,D,e),xt(t,D,e),Xe(D,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",ye),We(e,D)}if(M&&nn(e,M,t),!te&&!a&&!T&&!Fe&&!M&&!vn&&!_t&&!D&&!V){var St=(0,p.Th)(n,"data-block","0");St&&St.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",wt(t,St,e),xt(t,St,e),Xe(St,e),We(e,St)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(ue){ue.style.display="none"});var ir=(0,p.Th)(t.startContainer,"data-type","backslash");ir&&(ir.querySelector("span").style.display="inline")}},200)},We=function(e,t){var n=t,r=(0,p._Y)(t,"TABLE");r&&(n=r),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},be=function(e,t,n){n===void 0&&(n=getSelection().getRangeAt(0)),e.wysiwyg.popover.innerHTML="";var r=function(){s.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",s.value):t.textContent=s.value),C.value.trim()!==""&&t.setAttribute("data-link-label",C.value),typeof e.options.input=="function"&&e.options.input(g(e))},a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),s.style.width="120px",s.value=t.getAttribute("alt")||t.textContent,s.oninput=function(){r()},s.onkeydown=function(M){qe(e,M)||rt(M,n)||Lt(e,t,M,C)};var k=document.createElement("span");k.setAttribute("aria-label",window.VditorI18n.linkRef),k.className="vditor-tooltipped vditor-tooltipped__n";var C=document.createElement("input");k.appendChild(C),C.className="vditor-input",C.setAttribute("placeholder",window.VditorI18n.linkRef),C.value=t.getAttribute("data-link-label"),C.oninput=function(){r()},C.onkeydown=function(M){qe(e,M)||rt(M,n)||Lt(e,t,M,s)},Xe(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",a),e.wysiwyg.popover.insertAdjacentElement("beforeend",k),We(e,t)},wt=function(e,t,n){var r=t.previousElementSibling;if(!(!r||!t.parentElement.isEqualNode(n.wysiwyg.element)&&t.tagName!=="LI")){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-type","up"),a.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,o.fG)("⇧⌘U")+">"),a.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',a.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",a.onclick=function(){e.insertNode(document.createElement("wbr")),r.insertAdjacentElement("beforebegin",t),(0,I.ir)(n.wysiwyg.element,e),Ce(n),st(n),Pe(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",a)}},xt=function(e,t,n){var r=t.nextElementSibling;if(!(!r||!t.parentElement.isEqualNode(n.wysiwyg.element)&&t.tagName!=="LI")){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-type","down"),a.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,o.fG)("⇧⌘D")+">"),a.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',a.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",a.onclick=function(){e.insertNode(document.createElement("wbr")),r.insertAdjacentElement("afterend",t),(0,I.ir)(n.wysiwyg.element,e),Ce(n),st(n),Pe(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",a)}},Xe=function(e,t){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-type","remove"),n.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,o.fG)("⇧⌘X")+">"),n.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',n.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",n.onclick=function(){var r=(0,I.RN)(t);r.setStartAfter(e),(0,I.jl)(r),e.remove(),Ce(t),st(t),["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&ke(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",n)},Lt=function(e,t,n,r){if(!n.isComposing){if(n.key==="Tab"){r.focus(),r.select(),n.preventDefault();return}if(!(0,o._0)(n)&&!n.shiftKey&&n.altKey&&n.key==="Enter"){var a=(0,I.RN)(e);t.insertAdjacentHTML("afterend",y.Y.ZWSP),a.setStartAfter(t.nextSibling),a.collapse(!0),(0,I.jl)(a),n.preventDefault()}}},nn=function(e,t,n){e.wysiwyg.popover.innerHTML="";var r=function(){s.value.trim()!==""&&(t.innerHTML=s.value),t.setAttribute("href",C.value),t.setAttribute("title",T.value),Ce(e)};t.querySelectorAll("[data-marker]").forEach(function(D){D.removeAttribute("data-marker")});var a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),s.style.width="120px",s.value=t.innerHTML||"",s.oninput=function(){r()},s.onkeydown=function(D){qe(e,D)||rt(D,n)||Lt(e,t,D,C)};var k=document.createElement("span");k.setAttribute("aria-label",window.VditorI18n.link),k.className="vditor-tooltipped vditor-tooltipped__n";var C=document.createElement("input");k.appendChild(C),C.className="vditor-input",C.setAttribute("placeholder",window.VditorI18n.link),C.value=t.getAttribute("href")||"",C.oninput=function(){r()},C.onkeydown=function(D){qe(e,D)||rt(D,n)||Lt(e,t,D,T)};var M=document.createElement("span");M.setAttribute("aria-label",window.VditorI18n.tooltipText),M.className="vditor-tooltipped vditor-tooltipped__n";var T=document.createElement("input");M.appendChild(T),T.className="vditor-input",T.setAttribute("placeholder",window.VditorI18n.tooltipText),T.style.width="60px",T.value=t.getAttribute("title")||"",T.oninput=function(){r()},T.onkeydown=function(D){qe(e,D)||rt(D,n)||Lt(e,t,D,s)},Xe(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",a),e.wysiwyg.popover.insertAdjacentElement("beforeend",k),e.wysiwyg.popover.insertAdjacentElement("beforeend",M),We(e,t)},hr=function(e,t){var n=e.target;t.wysiwyg.popover.innerHTML="";var r=function(){n.setAttribute("src",s.value),n.setAttribute("alt",C.value),n.setAttribute("title",T.value),typeof t.options.input=="function"&&t.options.input(g(t))},a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.imageURL),a.className="vditor-tooltipped vditor-tooltipped__n";var s=document.createElement("input");a.appendChild(s),s.className="vditor-input",s.setAttribute("placeholder",window.VditorI18n.imageURL),s.value=n.getAttribute("src")||"",s.oninput=function(){r()},s.onkeydown=function(D){qe(t,D)};var k=document.createElement("span");k.setAttribute("aria-label",window.VditorI18n.alternateText),k.className="vditor-tooltipped vditor-tooltipped__n";var C=document.createElement("input");k.appendChild(C),C.className="vditor-input",C.setAttribute("placeholder",window.VditorI18n.alternateText),C.style.width="52px",C.value=n.getAttribute("alt")||"",C.oninput=function(){r()},C.onkeydown=function(D){qe(t,D)};var M=document.createElement("span");M.setAttribute("aria-label",window.VditorI18n.title),M.className="vditor-tooltipped vditor-tooltipped__n";var T=document.createElement("input");M.appendChild(T),T.className="vditor-input",T.setAttribute("placeholder",window.VditorI18n.title),T.value=n.getAttribute("title")||"",T.oninput=function(){r()},T.onkeydown=function(D){qe(t,D)},Xe(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",a),t.wysiwyg.popover.insertAdjacentElement("beforeend",k),t.wysiwyg.popover.insertAdjacentElement("beforeend",M),We(t,n)},rt=function(e,t){if(!(0,o._0)(e)&&!e.shiftKey&&e.key==="Enter"||e.key==="Escape")return t&&(0,I.jl)(t),e.preventDefault(),e.stopPropagation(),!0},kt=function(e){e.currentMode==="wysiwyg"?st(e):e.currentMode==="ir"&&tt(e)},Tn=function(e,t,n){n===void 0&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var r=e.wysiwyg.element;r.innerHTML=e.lute.Md2VditorDOM(t),r.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(a){fe(a,e),a.previousElementSibling.setAttribute("style","display:none")}),Ce(e,n)},mr=function(e,t,n){for(var r=e.startContainer.parentElement,a=!1,s="",k="",C=en(e),M=C.beforeHTML,T=C.afterHTML;r&&!a;){var D=r.tagName;if(D==="STRIKE"&&(D="S"),D==="I"&&(D="EM"),D==="B"&&(D="STRONG"),D==="S"||D==="STRONG"||D==="EM"){var V="",te="",ee="";r.parentElement.getAttribute("data-block")!=="0"&&(te=Pt(r),ee=$t(r)),(M||te)&&(V="".concat(te,"<").concat(D,">").concat(M,"</").concat(D,">"),M=V),(n==="bold"&&D==="STRONG"||n==="italic"&&D==="EM"||n==="strikeThrough"&&D==="S")&&(V+="".concat(s).concat(y.Y.ZWSP,"<wbr>").concat(k),a=!0),(T||ee)&&(T="<".concat(D,">").concat(T,"</").concat(D,">").concat(ee),V+=T),r.parentElement.getAttribute("data-block")!=="0"?(r=r.parentElement,r.innerHTML=V):(r.outerHTML=V,r=r.parentElement),s="<".concat(D,">")+s,k="</".concat(D,">")+k}else a=!0}(0,I.ir)(t.wysiwyg.element,e)},gr=function(e,t,n){if(!(e.wysiwyg.composingLock&&n instanceof CustomEvent)){var r=!0,a=!0;e.wysiwyg.element.querySelector("wbr")&&e.wysiwyg.element.querySelector("wbr").remove();var s=(0,I.RN)(e),k=t.getAttribute("data-type");if(t.classList.contains("vditor-menu--current"))if(k==="strike"&&(k="strikeThrough"),k==="quote"){var C=(0,p._Y)(s.startContainer,"BLOCKQUOTE");C||(C=s.startContainer.childNodes[s.startOffset]),C&&(r=!1,t.classList.remove("vditor-menu--current"),s.insertNode(document.createElement("wbr")),C.outerHTML=C.innerHTML.trim()===""?'<p data-block="0">'.concat(C.innerHTML,"</p>"):C.innerHTML,(0,I.ir)(e.wysiwyg.element,s))}else if(k==="inline-code"){var M=(0,p._Y)(s.startContainer,"CODE");M||(M=s.startContainer.childNodes[s.startOffset]),M&&(M.outerHTML=M.innerHTML.replace(y.Y.ZWSP,"")+"<wbr>",(0,I.ir)(e.wysiwyg.element,s))}else k==="link"?(s.collapsed&&s.selectNode(s.startContainer.parentElement),document.execCommand("unlink",!1,"")):k==="check"||k==="list"||k==="ordered-list"?(Ft(e,s,k),(0,I.ir)(e.wysiwyg.element,s),r=!1,t.classList.remove("vditor-menu--current")):(r=!1,t.classList.remove("vditor-menu--current"),s.toString()===""?mr(s,e,k):document.execCommand(k,!1,""));else{e.wysiwyg.element.childNodes.length===0&&(e.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,I.ir)(e.wysiwyg.element,s));var T=(0,p.pt)(s.startContainer);if(k==="quote"){if(T||(T=s.startContainer.childNodes[s.startOffset]),T){r=!1,t.classList.add("vditor-menu--current"),s.insertNode(document.createElement("wbr"));var D=(0,p._Y)(s.startContainer,"LI");D&&T.contains(D)?D.innerHTML='<blockquote data-block="0">'.concat(D.innerHTML,"</blockquote>"):T.outerHTML='<blockquote data-block="0">'.concat(T.outerHTML,"</blockquote>"),(0,I.ir)(e.wysiwyg.element,s)}}else if(k==="check"||k==="list"||k==="ordered-list")Ft(e,s,k,!1),(0,I.ir)(e.wysiwyg.element,s),r=!1,c(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current");else if(k==="inline-code"){if(s.toString()===""){var V=document.createElement("code");V.textContent=y.Y.ZWSP,s.insertNode(V),s.setStart(V.firstChild,1),s.collapse(!0),(0,I.jl)(s)}else if(s.startContainer.nodeType===3){var V=document.createElement("code");s.surroundContents(V),s.insertNode(V),(0,I.jl)(s)}t.classList.add("vditor-menu--current")}else if(k==="code"){var V=document.createElement("div");V.className="vditor-wysiwyg__block",V.setAttribute("data-type","code-block"),V.setAttribute("data-block","0"),V.setAttribute("data-marker","```"),s.toString()===""?V.innerHTML=`<pre><code><wbr>
</code></pre>`:(V.innerHTML="<pre><code>".concat(s.toString(),"<wbr></code></pre>"),s.deleteContents()),s.insertNode(V),T&&(T.outerHTML=e.lute.SpinVditorDOM(T.outerHTML)),(0,I.ir)(e.wysiwyg.element,s),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(De){fe(De,e)}),t.classList.add("vditor-menu--disabled")}else if(k==="link"){if(s.toString()===""){var te=document.createElement("a");te.innerText=y.Y.ZWSP,s.insertNode(te),s.setStart(te.firstChild,1),s.collapse(!0),nn(e,te,s);var ee=e.wysiwyg.popover.querySelector("input");ee.value="",ee.focus(),a=!1}else{var V=document.createElement("a");V.setAttribute("href",""),V.innerHTML=s.toString(),s.surroundContents(V),s.insertNode(V),(0,I.jl)(s),nn(e,V,s);var Q=e.wysiwyg.popover.querySelectorAll("input");Q[0].value=V.innerText,Q[1].focus()}r=!1,t.classList.add("vditor-menu--current")}else if(k==="table"){var de='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(s.toString().trim()==="")T&&T.innerHTML.trim().replace(y.Y.ZWSP,"")===""?T.outerHTML=de:document.execCommand("insertHTML",!1,de),s.selectNode(e.wysiwyg.element.querySelector("wbr").previousSibling),e.wysiwyg.element.querySelector("wbr").remove(),(0,I.jl)(s);else{de='<table data-block="0"><thead><tr>';var ae=s.toString().split(`
`),J=ae[0].split(",").length>ae[0].split("	").length?",":"	";ae.forEach(function(me,De){De===0?(me.split(J).forEach(function(Te,He){He===0?de+="<th>".concat(Te,"<wbr></th>"):de+="<th>".concat(Te,"</th>")}),de+="</tr></thead>"):(De===1?de+="<tbody><tr>":de+="<tr>",me.split(J).forEach(function(Te){de+="<td>".concat(Te,"</td>")}),de+="</tr>")}),de+="</tbody></table>",document.execCommand("insertHTML",!1,de),(0,I.ir)(e.wysiwyg.element,s)}r=!1,t.classList.add("vditor-menu--disabled")}else if(k==="line"){if(T){var he=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;T.innerHTML.trim()===""?T.outerHTML=he:T.insertAdjacentHTML("afterend",he),(0,I.ir)(e.wysiwyg.element,s)}}else if(r=!1,t.classList.add("vditor-menu--current"),k==="strike"&&(k="strikeThrough"),s.toString()===""&&(k==="bold"||k==="italic"||k==="strikeThrough")){var ce="strong";k==="italic"?ce="em":k==="strikeThrough"&&(ce="s");var V=document.createElement(ce);V.textContent=y.Y.ZWSP,s.insertNode(V),V.previousSibling&&V.previousSibling.textContent===y.Y.ZWSP&&(V.previousSibling.textContent=""),s.setStart(V.firstChild,1),s.collapse(!0),(0,I.jl)(s)}else document.execCommand(k,!1,"")}r&&st(e),a&&Ce(e)}},$e=function(){function e(t,n){var r,a=this;this.element=document.createElement("div"),n.className&&(r=this.element.classList).add.apply(r,n.className.split(" "));var s=n.hotkey?" <".concat((0,o.fG)(n.hotkey),">"):"";n.level===2&&(s=n.hotkey?" &lt;".concat((0,o.fG)(n.hotkey),"&gt;"):"");var k=n.tip?n.tip+s:"".concat(window.VditorI18n[n.name]).concat(s),C=n.name==="upload"?"div":"button";if(n.level===2)this.element.innerHTML="<".concat(C,' data-type="').concat(n.name,'">').concat(k,"</").concat(C,">");else{this.element.classList.add("vditor-toolbar__item");var M=document.createElement(C);M.setAttribute("data-type",n.name),M.className="vditor-tooltipped vditor-tooltipped__".concat(n.tipPosition),M.setAttribute("aria-label",k),M.innerHTML=n.icon,this.element.appendChild(M)}n.prefix&&this.element.children[0].addEventListener((0,o.y3)(),function(T){T.preventDefault(),!a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)&&(t.currentMode==="wysiwyg"?gr(t,a.element.children[0],T):t.currentMode==="ir"?Dr(t,a.element.children[0],n.prefix||"",n.suffix||""):wr(t,a.element.children[0],n.prefix||"",n.suffix||""))})}return e}(),yr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yt=function(e,t,n){var r;if(typeof n!="string"?(x(e,["subToolbar","hint"]),n.preventDefault(),r=g(e)):r=n,!(e.currentMode===t&&typeof n!="string")){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",h(e.toolbar.elements,y.Y.EDIT_TOOLBARS),c(e.toolbar.elements,y.Y.EDIT_TOOLBARS),d(e.toolbar.elements,["outdent","indent"]),t==="ir")_(e.toolbar.elements,["both"]),S(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(r),lt(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Ne(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(s){fe(s,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(s){(0,$.T)(s,{cdn:e.options.cdn,math:e.options.preview.math})});else if(t==="wysiwyg")_(e.toolbar.elements,["both"]),S(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",Ne(e),Tn(e,r,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(s){(0,$.T)(s,{cdn:e.options.cdn,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){S(e.toolbar.elements,["both"]),_(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var a=Ln(r,e);a==="<div data-block='0'></div>"&&(a=""),e.sv.element.innerHTML=a,Ae(e.sv.element),Be(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),Ne(e)}e.undo.resetIcon(e),typeof n!="string"&&(e[e.currentMode].element.focus(),kt(e)),ke(e),Je(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(s){s.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'.concat(e.currentMode,'"]')).classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable,typeof n!="string")}},vr=function(e){yr(t,e);function t(n,r){var a=e.call(this,n,r)||this,s=document.createElement("div");return s.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow"),s.innerHTML='<button data-mode="wysiwyg">'.concat(window.VditorI18n.wysiwyg," &lt;").concat((0,o.fG)("⌥⌘7"),`></button>
<button data-mode="ir">`).concat(window.VditorI18n.instantRendering," &lt;").concat((0,o.fG)("⌥⌘8"),`></button>
<button data-mode="sv">`).concat(window.VditorI18n.splitView," &lt;").concat((0,o.fG)("⌥⌘9"),"></button>"),a.element.appendChild(s),a._bindEvent(n,s,r),a}return t.prototype._bindEvent=function(n,r,a){var s=this.element.children[0];E(n,r,s,a.level),r.children.item(0).addEventListener((0,o.y3)(),function(k){yt(n,"wysiwyg",k),k.preventDefault(),k.stopPropagation()}),r.children.item(1).addEventListener((0,o.y3)(),function(k){yt(n,"ir",k),k.preventDefault(),k.stopPropagation()}),r.children.item(2).addEventListener((0,o.y3)(),function(k){yt(n,"sv",k),k.preventDefault(),k.stopPropagation()})},t}($e),At=function(e,t){return(0,I.Co)(e,t)?getSelection().toString():""},rn=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(g(e)),x(e,["subToolbar","hint"])})},Mn=function(e,t){t.addEventListener("dblclick",function(n){n.target.tagName==="IMG"&&(e.options.image.preview?e.options.image.preview(n.target):e.options.image.isPreview&&(0,oe.o)(n.target,e.options.lang,e.options.theme))})},an=function(e,t){t.addEventListener("blur",function(n){if(e.currentMode==="ir"){var r=e.ir.element.querySelector(".vditor-ir__node--expand");r&&r.classList.remove("vditor-ir__node--expand")}else e.currentMode==="wysiwyg"&&!e.wysiwyg.selectPopover.contains(n.relatedTarget)&&e.wysiwyg.hideComment();e[e.currentMode].range=(0,I.RN)(e),e.options.blur&&e.options.blur(g(e))})},on=function(e,t){t.addEventListener("dragstart",function(n){n.dataTransfer.setData(y.Y.DROP_EDITOR,y.Y.DROP_EDITOR)}),t.addEventListener("drop",function(n){n.dataTransfer.getData(y.Y.DROP_EDITOR)?we(e):(n.dataTransfer.types.includes("Files")||n.dataTransfer.types.includes("text/html"))&&Ut(e,n,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})})},sn=function(e,t,n){t.addEventListener("copy",function(r){return n(r,e)})},ln=function(e,t,n){t.addEventListener("cut",function(r){n(r,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},Pe=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),!!e.options.typewriterMode){var t=e[e.currentMode].element,n=(0,I.Ey)(t).top;e.options.height==="auto"&&!e.element.classList.contains("vditor--fullscreen")&&window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},cn=function(e,t){t.addEventListener("keydown",function(n){if(!n.isComposing&&e.options.keydown&&e.options.keydown(n),!((e.options.hint.extend.length>1||e.toolbar.elements.emoji)&&e.hint.select(n,e))){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(n.key==="Backspace"||Z("⌘X",n))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(Re(e,n))return}else if(e.currentMode==="wysiwyg"){if(tn(e,n))return}else if(e.currentMode==="ir"&&Se(e,n))return;if(e.options.ctrlEnter&&Z("⌘Enter",n)){e.options.ctrlEnter(g(e)),n.preventDefault();return}if(Z("⌘Z",n)&&!e.toolbar.elements.undo){e.undo.undo(e),n.preventDefault();return}if(Z("⌘Y",n)&&!e.toolbar.elements.redo){e.undo.redo(e),n.preventDefault();return}if(n.key==="Escape"){e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!n.isComposing&&e.options.esc(g(e)),n.preventDefault();return}if((0,o._0)(n)&&n.altKey&&!n.shiftKey&&/^Digit[1-6]$/.test(n.code)){if(e.currentMode==="wysiwyg"){var r=n.code.replace("Digit","H");(0,p._Y)(getSelection().getRangeAt(0).startContainer,r)?Mt(e):bt(e,r),Ce(e)}else e.currentMode==="sv"?An(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&Ht(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" ");return n.preventDefault(),!0}if((0,o._0)(n)&&n.altKey&&!n.shiftKey&&/^Digit[7-9]$/.test(n.code))return n.code==="Digit7"?yt(e,"wysiwyg",n):n.code==="Digit8"?yt(e,"ir",n):n.code==="Digit9"&&yt(e,"sv",n),!0;e.options.toolbar.find(function(a){if(!a.hotkey||a.toolbar){if(a.toolbar){var s=a.toolbar.find(function(k){if(!k.hotkey)return!1;if(Z(k.hotkey,n))return e.toolbar.elements[k.name].children[0].dispatchEvent(new CustomEvent((0,o.y3)())),n.preventDefault(),!0});return!!s}return!1}if(Z(a.hotkey,n))return e.toolbar.elements[a.name].children[0].dispatchEvent(new CustomEvent((0,o.y3)())),n.preventDefault(),!0})}})},un=function(e,t){t.addEventListener("selectstart",function(n){t.onmouseup=function(){setTimeout(function(){var r=At(e[e.currentMode].element);r.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&(!(0,p.Th)(n.target,"data-type","footnotes-block")&&!(0,p.Th)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.showComment():e.wysiwyg.hideComment()),e.options.select&&e.options.select(r)):e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment()})}})},dn=function(e,t){var n=(0,I.RN)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var r=(0,p.Th)(n.startContainer,"data-block","0");r||(r=e.sv.element);var a=e.lute.SpinVditorSVDOM(r.textContent);a="<div data-block='0'>"+a.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",r.isEqualNode(e.sv.element)?r.innerHTML=a:r.outerHTML=a,Ae(e.sv.element),(0,I.ir)(e.sv.element,n),Pe(e)},Vt=function(e,t,n){n===void 0&&(n=!0);var r=e;for(r.nodeType===3&&(r=r.parentElement);r;){if(r.getAttribute("data-type")===t)return r;n?r=r.previousElementSibling:r=r.nextElementSibling}return!1},Ln=function(e,t){j("SpinVditorSVDOM",e,"argument",t.options.debugger);var n=t.lute.SpinVditorSVDOM(e);return e="<div data-block='0'>"+n.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",j("SpinVditorSVDOM",e,"result",t.options.debugger),e},br=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,r=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",a=!1;for(t==="newline"&&(a=!0);n&&!a;){var s=n.getAttribute("data-type");if(s==="li-marker"||s==="blockquote-marker"||s==="task-marker"||s==="padding"){var k=n.textContent;if(s==="li-marker"&&(t==="code-block-open-marker"||t==="code-block-info"))r=k.replace(/\S/g," ")+r;else if(t==="code-block-close-marker"&&n.nextElementSibling.isSameNode(e)){var C=Vt(e,"code-block-open-marker");C&&C.previousElementSibling&&(n=C.previousElementSibling,r=k+r)}else r=k+r}else s==="newline"&&(a=!0);n=n.previousElementSibling}return r},Be=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=g(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,o.D)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},An=function(e,t){var n=(0,I.RN)(e),r=(0,L.f)(n.startContainer,"SPAN");r&&r.textContent.trim()!==""&&(t=`
`+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},wr=function(e,t,n,r){var a=(0,I.RN)(e),s=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,I.ir)(e.sv.element,a));var k=(0,p.pt)(a.startContainer),C=(0,L.f)(a.startContainer,"SPAN");if(k){if(s==="link"){var M=void 0;a.toString()===""?M="".concat(n).concat(Lute.Caret).concat(r):M="".concat(n).concat(a.toString()).concat(r.replace(")",Lute.Caret+")")),document.execCommand("insertHTML",!1,M);return}else if(s==="italic"||s==="bold"||s==="strike"||s==="inline-code"||s==="code"||s==="table"||s==="line"){var M=void 0;a.toString()===""?M="".concat(n).concat(Lute.Caret).concat(s==="code"?"":r):M="".concat(n).concat(a.toString()).concat(Lute.Caret).concat(s==="code"?"":r),s==="table"||s==="code"&&C&&C.textContent!==""?M=`

`+M:s==="line"&&(M=`

`.concat(n,`
`).concat(Lute.Caret)),document.execCommand("insertHTML",!1,M);return}else if((s==="check"||s==="list"||s==="ordered-list"||s==="quote")&&C){var T="* ";s==="check"?T="* [ ] ":s==="ordered-list"?T="1. ":s==="quote"&&(T="> ");var D=Vt(C,"newline");D?D.insertAdjacentText("afterend",T):k.insertAdjacentText("afterbegin",T),ve(e);return}(0,I.ir)(e.sv.element,a),Be(e)}},Dn=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},jn=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(n){t.setRequestHeader(n,e.options.upload.headers[n])})},xr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(k){k(s)})}return new(n||(n=Promise))(function(s,k){function C(D){try{T(r.next(D))}catch(V){k(V)}}function M(D){try{T(r.throw(D))}catch(V){k(V)}}function T(D){D.done?s(D.value):a(D.value).then(C,M)}T((r=r.apply(e,t||[])).next())})},kr=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,k;return k={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function C(T){return function(D){return M([T,D])}}function M(T){if(r)throw new TypeError("Generator is already executing.");for(;k&&(k=0,T[0]&&(n=0)),n;)try{if(r=1,a&&(s=T[0]&2?a.return:T[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,T[1])).done)return s;switch(a=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){n.label=T[1];break}if(T[0]===6&&n.label<s[1]){n.label=s[1],s=T;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(T);break}s[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(D){T=[6,D],a=0}finally{r=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},Er=function(){function e(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return e}(),_r=function(e,t){e.tip.hide();var n=[],r="",a="";e.options.lang,e.options;for(var s=function(M,T){var D=t[T],V=!0;D.name||(r+="<li>".concat(window.VditorI18n.nameEmpty,"</li>"),V=!1),D.size>e.options.upload.max&&(r+="<li>".concat(D.name," ").concat(window.VditorI18n.over," ").concat(e.options.upload.max/1024/1024,"M</li>"),V=!1);var te=D.name.lastIndexOf("."),ee=D.name.substr(te),Q=e.options.upload.filename(D.name.substr(0,te))+ee;if(e.options.upload.accept){var de=e.options.upload.accept.split(",").some(function(ae){var J=ae.trim();if(J.indexOf(".")===0){if(ee.toLowerCase()===J.toLowerCase())return!0}else if(D.type.split("/")[0]===J.split("/")[0])return!0;return!1});de||(r+="<li>".concat(D.name," ").concat(window.VditorI18n.fileTypeError,"</li>"),V=!1)}V&&(n.push(D),a+="<li>".concat(Q," ").concat(window.VditorI18n.uploading,"</li>"))},k=t.length,C=0;C<k;C++)s(k,C);return e.tip.show("<ul>".concat(r).concat(a,"</ul>")),n},Sr=function(e,t){var n=Dn(t);n.focus();var r=JSON.parse(e),a="";r.code===1&&(a="".concat(r.msg)),r.data.errFiles&&r.data.errFiles.length>0&&(a="<ul><li>".concat(a,"</li>"),r.data.errFiles.forEach(function(k){var C=k.lastIndexOf("."),M=t.options.upload.filename(k.substr(0,C))+k.substr(C);a+="<li>".concat(M," ").concat(window.VditorI18n.uploadError,"</li>")}),a+="</ul>"),a?t.tip.show(a):t.tip.hide();var s="";Object.keys(r.data.succMap).forEach(function(k){var C=r.data.succMap[k],M=k.lastIndexOf("."),T=k.substr(M),D=t.options.upload.filename(k.substr(0,M))+T;T=T.toLowerCase(),T.indexOf(".wav")===0||T.indexOf(".mp3")===0||T.indexOf(".ogg")===0?t.currentMode==="wysiwyg"?s+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`.concat(C,'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="').concat(C,`"></audio></pre></div>
`):t.currentMode==="ir"?s+='<audio controls="controls" src="'.concat(C,`"></audio>
`):s+="[".concat(D,"](").concat(C,`)
`):T.indexOf(".apng")===0||T.indexOf(".bmp")===0||T.indexOf(".gif")===0||T.indexOf(".ico")===0||T.indexOf(".cur")===0||T.indexOf(".jpg")===0||T.indexOf(".jpeg")===0||T.indexOf(".jfif")===0||T.indexOf(".pjp")===0||T.indexOf(".pjpeg")===0||T.indexOf(".png")===0||T.indexOf(".svg")===0||T.indexOf(".webp")===0?t.currentMode==="wysiwyg"?s+='<img alt="'.concat(D,'" src="').concat(C,`">
`):s+="![".concat(D,"](").concat(C,`)
`):t.currentMode==="wysiwyg"?s+='<a href="'.concat(C,'">').concat(D,`</a>
`):s+="[".concat(D,"](").concat(C,`)
`)}),(0,I.jl)(t.upload.range),document.execCommand("insertHTML",!1,s),t.upload.range=getSelection().getRangeAt(0).cloneRange()},pn=function(e,t,n){return xr(void 0,void 0,void 0,function(){var r,a,Q,s,k,k,C,M,T,D,V,te,ee,Q,de,ae;return kr(this,function(J){switch(J.label){case 0:for(r=[],a=e.options.upload.multiple===!0?t.length:1,Q=0;Q<a;Q++)s=t[Q],s instanceof DataTransferItem&&(s=s.getAsFile()),r.push(s);return e.options.upload.handler?[4,e.options.upload.handler(r)]:[3,2];case 1:return k=J.sent(),n&&(n.value=""),typeof k=="string"?(e.tip.show(k),[2]):[2];case 2:return!e.options.upload.url||!e.upload?(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]):e.options.upload.file?[4,e.options.upload.file(r)]:[3,4];case 3:r=J.sent(),J.label=4;case 4:if(e.options.upload.validate&&(k=e.options.upload.validate(r),typeof k=="string"))return e.tip.show(k),[2];if(C=Dn(e),e.upload.range=(0,I.RN)(e),M=_r(e,r),M.length===0)return n&&(n.value=""),[2];for(T=new FormData,D=e.options.upload.extraData,V=0,te=Object.keys(D);V<te.length;V++)ee=te[V],T.append(ee,D[ee]);for(Q=0,de=M.length;Q<de;Q++)T.append(e.options.upload.fieldName,M[Q]);return ae=new XMLHttpRequest,ae.open("POST",e.options.upload.url),e.options.upload.token&&ae.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(ae.withCredentials=!0),jn(e,ae),e.upload.isUploading=!0,C.setAttribute("contenteditable","false"),ae.onreadystatechange=function(){if(ae.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,C.setAttribute("contenteditable","true"),ae.status>=200&&ae.status<300)if(e.options.upload.success)e.options.upload.success(C,ae.responseText);else{var he=ae.responseText;e.options.upload.format&&(he=e.options.upload.format(t,ae.responseText)),Sr(he,e)}else e.options.upload.error?e.options.upload.error(ae.responseText):e.tip.show(ae.responseText);n&&(n.value=""),e.upload.element.style.display="none"}},ae.upload.onprogress=function(he){if(he.lengthComputable){var ce=he.loaded/he.total*100;e.upload.element.style.display="block";var me=e.upload.element;me.style.width=ce+"%"}},ae.send(T),[2]}})})},Bt=function(e,t,n){var r,a=(0,p.pt)(t.startContainer);if(a||(a=e.wysiwyg.element),n&&n.inputType!=="formatItalic"&&n.inputType!=="deleteByDrag"&&n.inputType!=="insertFromDrop"&&n.inputType!=="formatBold"&&n.inputType!=="formatRemove"&&n.inputType!=="formatStrikeThrough"&&n.inputType!=="insertUnorderedList"&&n.inputType!=="insertOrderedList"&&n.inputType!=="formatOutdent"&&n.inputType!=="formatIndent"&&n.inputType!==""||!n){var s=vt(t.startContainer);s&&s.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(ce){ce.remove()}),t.insertNode(document.createElement("wbr")),a.querySelectorAll("[style]").forEach(function(ce){ce.removeAttribute("style")}),a.querySelectorAll(".vditor-comment").forEach(function(ce){ce.textContent.trim()===""&&(ce.classList.remove("vditor-comment","vditor-comment--focus"),ce.removeAttribute("data-cmtids"))}),(r=a.previousElementSibling)===null||r===void 0||r.querySelectorAll(".vditor-comment").forEach(function(ce){ce.textContent.trim()===""&&(ce.classList.remove("vditor-comment","vditor-comment--focus"),ce.removeAttribute("data-cmtids"))});var k="";a.getAttribute("data-type")==="link-ref-defs-block"&&(a=e.wysiwyg.element);var C=a.isEqualNode(e.wysiwyg.element),M=(0,p.Th)(a,"data-type","footnotes-block");if(C)k=a.innerHTML;else{var T=(0,p.KR)(t.startContainer);if(T&&!M){var D=(0,L.f)(t.startContainer,"BLOCKQUOTE");D?a=(0,p.pt)(t.startContainer)||a:a=T}if(M&&(a=M),k=a.outerHTML,a.tagName==="UL"||a.tagName==="OL"){var V=a.previousElementSibling,te=a.nextElementSibling;V&&(V.tagName==="UL"||V.tagName==="OL")&&(k=V.outerHTML+k,V.remove()),te&&(te.tagName==="UL"||te.tagName==="OL")&&(k=k+te.outerHTML,te.remove()),k=k.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}a.innerText.startsWith("```")||(e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ce){ce&&!a.isEqualNode(ce)&&(k+=ce.outerHTML,ce.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(ce){ce&&!a.isEqualNode(ce)&&(k+=ce.outerHTML,ce.remove())}))}if(k=k.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),k==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(k='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),j("SpinVditorDOM",k,"argument",e.options.debugger),k=e.lute.SpinVditorDOM(k),j("SpinVditorDOM",k,"result",e.options.debugger),C)a.innerHTML=k;else if(a.outerHTML=k,M){var ee=(0,p.Ab)(e.wysiwyg.element.querySelector("wbr"),"LI");if(ee){var Q=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(ee.getAttribute("data-marker"),'"]'));Q&&Q.setAttribute("aria-label",ee.textContent.trim().substr(0,24))}}var de,ae=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");ae.forEach(function(ce,me){me===0?de=ce:(de.insertAdjacentHTML("beforeend",ce.innerHTML),ce.remove())}),ae.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ae[0]);var J,he=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");he.forEach(function(ce,me){me===0?J=ce:(J.insertAdjacentHTML("beforeend",ce.innerHTML),ce.remove())}),he.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",he[0]),(0,I.ir)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(ce){fe(ce,e)}),n&&(n.inputType==="deleteContentBackward"||n.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}ke(e),Ce(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Cr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Tr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(k){k(s)})}return new(n||(n=Promise))(function(s,k){function C(D){try{T(r.next(D))}catch(V){k(V)}}function M(D){try{T(r.throw(D))}catch(V){k(V)}}function T(D){D.done?s(D.value):a(D.value).then(C,M)}T((r=r.apply(e,t||[])).next())})},Mr=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,k;return k={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function C(T){return function(D){return M([T,D])}}function M(T){if(r)throw new TypeError("Generator is already executing.");for(;k&&(k=0,T[0]&&(n=0)),n;)try{if(r=1,a&&(s=T[0]&2?a.return:T[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,T[1])).done)return s;switch(a=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){n.label=T[1];break}if(T[0]===6&&n.label<s[1]){n.label=s[1],s=T;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(T);break}s[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(D){T=[6,D],a=0}finally{r=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},Hn=function(e,t,n){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var r=(0,p.pt)(n);if(r&&r.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},On=function(e,t,n){if(!(n.key==="Enter"||n.key==="Tab"||n.key==="Backspace"||n.key.indexOf("Arrow")>-1||(0,o._0)(n)||n.key==="Escape"||n.shiftKey||n.altKey)){var r=(0,p._Y)(e.startContainer,"P")||(0,p._Y)(e.startContainer,"LI");if(r&&(0,I.ED)(r,t[t.currentMode].element,e).start===0){r.nodeValue&&(r.nodeValue=r.nodeValue.replace(/\u2006/g,""));var a=document.createTextNode(y.Y.ZWSP);e.insertNode(a),e.setStartAfter(a)}}},In=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var n=(0,p.Th)(e.startContainer,"data-type","math-inline")||(0,p.Th)(e.startContainer,"data-type","html-entity")||(0,p.Th)(e.startContainer,"data-type","html-inline");n&&(t==="ArrowDown"&&e.setStartAfter(n.parentElement),t==="ArrowUp"&&e.setStartBefore(n.parentElement))}},Dt=function(e,t){var n=(0,I.RN)(e),r=(0,p.pt)(n.startContainer);r&&(r.insertAdjacentHTML(t,'<p data-block="0">'.concat(y.Y.ZWSP,`<wbr>
</p>`)),(0,I.ir)(e[e.currentMode].element,n),kt(e),we(e))},Lr=function(e){var t=(0,p._Y)(e,"TABLE");return t&&t.rows[0].cells[0].isSameNode(e)?t:!1},Ar=function(e){var t=(0,p._Y)(e,"TABLE");return t&&t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e)?t:!1},Rn=function(e,t,n){n===void 0&&(n=!0);var r=e.previousElementSibling;return r||(e.parentElement.previousElementSibling?r=e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?r=e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:r=null),r&&(t.selectNodeContents(r),n||t.collapse(!1),(0,I.jl)(t)),r},jt=function(e,t,n,r,a){var s=(0,I.ED)(r,e[e.currentMode].element,n);if(t.key==="ArrowDown"&&r.textContent.trimRight().substr(s.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&s.start>=r.textContent.trimRight().length){var k=a.nextElementSibling;return!k||k&&(k.tagName==="TABLE"||k.getAttribute("data-type"))?(a.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(y.Y.ZWSP,"<wbr></p>")),(0,I.ir)(e[e.currentMode].element,n)):(n.selectNodeContents(k),n.collapse(!0),(0,I.jl)(n)),t.preventDefault(),!0}return!1},Et=function(e,t,n,r,a){var s=(0,I.ED)(r,e[e.currentMode].element,n);if(t.key==="ArrowUp"&&r.textContent.substr(0,s.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&n.toString()==="")&&s.start===0){var k=a.previousElementSibling;return!k||k&&(k.tagName==="TABLE"||k.getAttribute("data-type"))?(a.insertAdjacentHTML("beforebegin",'<p data-block="0">'.concat(y.Y.ZWSP,"<wbr></p>")),(0,I.ir)(e[e.currentMode].element,n)):(n.selectNodeContents(k),n.collapse(!1),(0,I.jl)(n)),t.preventDefault(),!0}return!1},Ft=function(e,t,n,r){r===void 0&&(r=!0);var a=(0,p._Y)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(D){D.remove()}),t.insertNode(document.createElement("wbr")),r&&a){for(var s="",k=0;k<a.parentElement.childElementCount;k++){var C=a.parentElement.children[k].querySelector("input");C&&C.remove(),s+='<p data-block="0">'.concat(a.parentElement.children[k].innerHTML.trimLeft(),"</p>")}a.parentElement.insertAdjacentHTML("beforebegin",s),a.parentElement.remove()}else if(a)if(n==="check")a.parentElement.querySelectorAll("li").forEach(function(D){D.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'.concat(D.textContent.indexOf(" ")===0?"":" ")),D.classList.add("vditor-task")});else{a.querySelector("input")&&a.parentElement.querySelectorAll("li").forEach(function(D){D.querySelector("input").remove(),D.classList.remove("vditor-task")});var T=void 0;n==="list"?(T=document.createElement("ul"),T.setAttribute("data-marker","*")):(T=document.createElement("ol"),T.setAttribute("data-marker","1.")),T.setAttribute("data-block","0"),T.setAttribute("data-tight",a.parentElement.getAttribute("data-tight")),T.innerHTML=a.parentElement.innerHTML,a.parentElement.parentNode.replaceChild(T,a.parentElement)}else{var M=(0,p.Th)(t.startContainer,"data-block","0");M||(e[e.currentMode].element.querySelector("wbr").remove(),M=e[e.currentMode].element.querySelector("p"),M.innerHTML="<wbr>"),n==="check"?(M.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '.concat(M.innerHTML,"</li></ul>")),M.remove()):n==="list"?(M.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'.concat(M.innerHTML,"</li></ul>")),M.remove()):n==="ordered-list"&&(M.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'.concat(M.innerHTML,"</li></ol>")),M.remove())}},Nn=function(e,t,n){var r=t.previousElementSibling;if(t&&r){var a=[t];Array.from(n.cloneContents().children).forEach(function(M,T){M.nodeType!==3&&t&&M.textContent.trim()!==""&&t.getAttribute("data-node-id")===M.getAttribute("data-node-id")&&(T!==0&&a.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(M){M.remove()}),n.insertNode(document.createElement("wbr"));var s=r.parentElement,k="";a.forEach(function(M){var T=M.getAttribute("data-marker");T.length!==1&&(T="1".concat(T.slice(-1))),k+='<li data-node-id="'.concat(M.getAttribute("data-node-id"),'" data-marker="').concat(T,'">').concat(M.innerHTML,"</li>"),M.remove()}),r.insertAdjacentHTML("beforeend","<".concat(s.tagName,' data-block="0">').concat(k,"</").concat(s.tagName,">")),e.currentMode==="wysiwyg"?s.outerHTML=e.lute.SpinVditorDOM(s.outerHTML):s.outerHTML=e.lute.SpinVditorIRDOM(s.outerHTML),(0,I.ir)(e[e.currentMode].element,n);var C=(0,p.KR)(n.startContainer);C&&C.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(M){fe(M,e),e.currentMode==="wysiwyg"&&M.previousElementSibling.setAttribute("style","display:none")}),we(e),kt(e)}else e[e.currentMode].element.focus()},fn=function(e,t,n,r){var a=(0,p._Y)(t.parentElement,"LI");if(a){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(V){V.remove()}),n.insertNode(document.createElement("wbr"));var s=t.parentElement,k=s.cloneNode(),C=[t];Array.from(n.cloneContents().children).forEach(function(V,te){V.nodeType!==3&&t&&V.textContent.trim()!==""&&t.getAttribute("data-node-id")===V.getAttribute("data-node-id")&&(te!==0&&C.push(t),t=t.nextElementSibling)});var M=!1,T="";s.querySelectorAll("li").forEach(function(V){M&&(T+=V.outerHTML,!V.nextElementSibling&&!V.previousElementSibling?V.parentElement.remove():V.remove()),V.isSameNode(C[C.length-1])&&(M=!0)}),C.reverse().forEach(function(V){a.insertAdjacentElement("afterend",V)}),T&&(k.innerHTML=T,C[0].insertAdjacentElement("beforeend",k)),e.currentMode==="wysiwyg"?r.outerHTML=e.lute.SpinVditorDOM(r.outerHTML):r.outerHTML=e.lute.SpinVditorIRDOM(r.outerHTML),(0,I.ir)(e[e.currentMode].element,n);var D=(0,p.KR)(n.startContainer);D&&D.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(V){fe(V,e),e.currentMode==="wysiwyg"&&V.previousElementSibling.setAttribute("style","display:none")}),we(e),kt(e)}else e[e.currentMode].element.focus()},zt=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,r=e.rows[0].cells.length,a=e.rows.length,s=0,k=0;k<a;k++)for(var C=0;C<r;C++)if(e.rows[k].cells[C].isSameNode(n)){s=C;break}for(var M=0;M<a;M++)e.rows[M].cells[s].setAttribute("align",t)},hn=function(e){var t=e.trimRight().split(`
`).pop();return t===""?!1:(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2?!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1||t.indexOf("    ")===0||t.indexOf("	")===0):!1},mn=function(e){var t=e.trimRight().split(`
`);return e=t.pop(),e.indexOf("    ")===0||e.indexOf("	")===0||(e=e.trimLeft(),e===""||t.length===0)?!1:e.replace(/-/g,"")===""||e.replace(/=/g,"")===""},we=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?Ce(e,t):e.currentMode==="ir"?lt(e,t):e.currentMode==="sv"&&Be(e,t)},$n=function(e,t,n,r){var a,s=e.startContainer,k=(0,p._Y)(s,"LI");if(k){if(!(0,o._0)(r)&&!r.altKey&&r.key==="Enter"&&!r.shiftKey&&n&&k.contains(n)&&n.nextElementSibling)return k&&!k.textContent.endsWith(`
`)&&k.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),we(t),r.preventDefault(),!0;if(!(0,o._0)(r)&&!r.shiftKey&&!r.altKey&&r.key==="Backspace"&&!k.previousElementSibling&&e.toString()===""&&(0,I.ED)(k,t[t.currentMode].element,e).start===0)return k.nextElementSibling?(k.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(k.innerHTML,"</p>")),k.remove()):k.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(k.innerHTML,"</p>"),(0,I.ir)(t[t.currentMode].element,e),we(t),r.preventDefault(),!0;if(!(0,o._0)(r)&&!r.shiftKey&&!r.altKey&&r.key==="Backspace"&&k.textContent.trim().replace(y.Y.ZWSP,"")===""&&e.toString()===""&&((a=k.previousElementSibling)===null||a===void 0?void 0:a.tagName)==="LI")return k.previousElementSibling.insertAdjacentText("beforeend",`

`),e.selectNodeContents(k.previousElementSibling),e.collapse(!1),k.remove(),(0,I.ir)(t[t.currentMode].element,e),we(t),r.preventDefault(),!0;if(!(0,o._0)(r)&&!r.altKey&&r.key==="Tab"){var C=!1;if((e.startOffset===0&&(s.nodeType===3&&!s.previousSibling||s.nodeType!==3&&s.nodeName==="LI")||k.classList.contains("vditor-task")&&e.startOffset===1&&s.previousSibling.nodeType!==3&&s.previousSibling.tagName==="INPUT")&&(C=!0),C||e.toString()!=="")return r.shiftKey?fn(t,k,e,k.parentElement):Nn(t,k,e),r.preventDefault(),!0}}return!1},gn=function(e,t,n){if(e.options.tab&&n.key==="Tab")return n.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),(0,I.jl)(t),we(e),n.preventDefault(),!0},Pn=function(e,t,n,r){if(n){if(!(0,o._0)(e)&&!e.altKey&&e.key==="Enter"){var a=String.raw(Xn||(Xn=Cr(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),s=a.split("|");if(a.startsWith("|")&&a.endsWith("|")&&s.length>3){var k=s.map(function(){return"---"}).join("|");return k=n.textContent+`
`+k.substring(3,k.length-3)+`
|<wbr>`,n.outerHTML=t.lute.SpinVditorDOM(k),(0,I.ir)(t[t.currentMode].element,r),we(t),Pe(t),e.preventDefault(),!0}if(hn(n.innerHTML)&&n.previousElementSibling){var C="",M=n.innerHTML.trimRight().split(`
`);return M.length>1&&(M.pop(),C='<p data-block="0">'.concat(M.join(`
`),"</p>")),n.insertAdjacentHTML("afterend","".concat(C,`<hr data-block="0"><p data-block="0"><wbr>
</p>`)),n.remove(),(0,I.ir)(t[t.currentMode].element,r),we(t),Pe(t),e.preventDefault(),!0}if(mn(n.innerHTML))return t.currentMode==="wysiwyg"?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,I.ir)(t[t.currentMode].element,r),we(t),Pe(t),e.preventDefault(),!0}if(r.collapsed&&n.previousElementSibling&&e.key==="Backspace"&&!(0,o._0)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split(`
`).length>1&&(0,I.ED)(n,t[t.currentMode].element,r).start===0){var T=(0,p.Rp)(n.previousElementSibling);return T.textContent.endsWith(`
`)||(T.textContent=T.textContent+`
`),T.parentElement.insertAdjacentHTML("beforeend","<wbr>".concat(n.innerHTML)),n.remove(),(0,I.ir)(t[t.currentMode].element,r),!1}return!1}},Vn=function(e,t,n){for(var r="",a=0;a<n.parentElement.childElementCount;a++)r+='<td align="'.concat(n.parentElement.children[a].getAttribute("align"),'"> </td>');n.tagName==="TH"?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>".concat(r,"</tr></tbody>")):n.parentElement.insertAdjacentHTML("afterend","<tr>".concat(r,"</tr>")),we(e)},Bn=function(e,t,n){for(var r="",a=0;a<n.parentElement.childElementCount;a++)n.tagName==="TH"?r+='<th align="'.concat(n.parentElement.children[a].getAttribute("align"),'"> </th>'):r+='<td align="'.concat(n.parentElement.children[a].getAttribute("align"),'"> </td>');if(n.tagName==="TH"){n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>".concat(r,"</tr></thead>")),t.insertNode(document.createElement("wbr"));var s=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",s),n.parentElement.parentElement.remove(),(0,I.ir)(e.ir.element,t)}else n.parentElement.insertAdjacentHTML("beforebegin","<tr>".concat(r,"</tr>"));we(e)},Yt=function(e,t,n,r){r===void 0&&(r="afterend");for(var a=0,s=n.previousElementSibling;s;)a++,s=s.previousElementSibling;for(var k=0;k<t.rows.length;k++)k===0?t.rows[k].cells[a].insertAdjacentHTML(r,"<th> </th>"):t.rows[k].cells[a].insertAdjacentHTML(r,"<td> </td>");we(e)},Fn=function(e,t,n){if(n.tagName==="TD"){var r=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(r.previousElementSibling.lastElementChild.lastElementChild),r.childElementCount===1?r.remove():n.parentElement.remove(),t.collapse(!1),(0,I.jl)(t),we(e)}},zn=function(e,t,n,r){for(var a=0,s=r.previousElementSibling;s;)a++,s=s.previousElementSibling;(r.previousElementSibling||r.nextElementSibling)&&(t.selectNodeContents(r.previousElementSibling||r.nextElementSibling),t.collapse(!0));for(var k=0;k<n.rows.length;k++){var C=n.rows[k].cells;if(C.length===1){n.remove(),kt(e);break}C[a].remove()}(0,I.jl)(t),we(e)},Yn=function(e,t,n){var r=n.startContainer,a=(0,p._Y)(r,"TD")||(0,p._Y)(r,"TH");if(a){if(!(0,o._0)(t)&&!t.altKey&&t.key==="Enter"){(!a.lastElementChild||a.lastElementChild&&(!a.lastElementChild.isSameNode(a.lastChild)||a.lastElementChild.tagName!=="BR"))&&a.insertAdjacentHTML("beforeend","<br>");var s=document.createElement("br");return n.insertNode(s),n.setStartAfter(s),we(e),Pe(e),t.preventDefault(),!0}if(t.key==="Tab"){if(t.shiftKey)return Rn(a,n),t.preventDefault(),!0;var k=a.nextElementSibling;return k||(a.parentElement.nextElementSibling?k=a.parentElement.nextElementSibling.firstElementChild:a.parentElement.parentElement.tagName==="THEAD"&&a.parentElement.parentElement.nextElementSibling?k=a.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:k=null),k&&(n.selectNodeContents(k),(0,I.jl)(n)),t.preventDefault(),!0}var C=a.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),a.tagName==="TH")return C.previousElementSibling?(n.selectNodeContents(C.previousElementSibling),n.collapse(!1),(0,I.jl)(n)):Dt(e,"beforebegin"),!0;for(var M=0,T=a.parentElement;M<T.cells.length&&!T.cells[M].isSameNode(a);M++);var D=T.previousElementSibling;return D||(D=T.parentElement.previousElementSibling.firstChild),n.selectNodeContents(D.cells[M]),n.collapse(!1),(0,I.jl)(n),!0}if(t.key==="ArrowDown"){t.preventDefault();var T=a.parentElement;if(!T.nextElementSibling&&a.tagName==="TD")return C.nextElementSibling?(n.selectNodeContents(C.nextElementSibling),n.collapse(!0),(0,I.jl)(n)):Dt(e,"afterend"),!0;for(var M=0;M<T.cells.length&&!T.cells[M].isSameNode(a);M++);var k=T.nextElementSibling;return k||(k=T.parentElement.nextElementSibling.firstChild),n.selectNodeContents(k.cells[M]),n.collapse(!0),(0,I.jl)(n),!0}if(e.currentMode==="wysiwyg"&&!(0,o._0)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var V=e.wysiwyg.popover.querySelector(".vditor-input");return V.focus(),V.select(),t.preventDefault(),!0}if(!(0,o._0)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&n.startOffset===0&&n.toString()===""){var te=Rn(a,n,!1);return!te&&C&&(C.textContent.trim()===""?(C.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,I.ir)(e[e.currentMode].element,n)):(n.setStartBefore(C),n.collapse(!0)),we(e)),t.preventDefault(),!0}if(Z("⇧⌘F",t))return Bn(e,n,a),t.preventDefault(),!0;if(Z("⌘=",t))return Vn(e,n,a),t.preventDefault(),!0;if(Z("⇧⌘G",t))return Yt(e,C,a,"beforebegin"),t.preventDefault(),!0;if(Z("⇧⌘=",t))return Yt(e,C,a),t.preventDefault(),!0;if(Z("⌘-",t))return Fn(e,n,a),t.preventDefault(),!0;if(Z("⇧⌘-",t))return zn(e,n,C,a),t.preventDefault(),!0;if(Z("⇧⌘L",t)){if(e.currentMode==="ir")return zt(C,"left"),we(e),t.preventDefault(),!0;var ee=e.wysiwyg.popover.querySelector('[data-type="left"]');if(ee)return ee.click(),t.preventDefault(),!0}if(Z("⇧⌘C",t)){if(e.currentMode==="ir")return zt(C,"center"),we(e),t.preventDefault(),!0;var ee=e.wysiwyg.popover.querySelector('[data-type="center"]');if(ee)return ee.click(),t.preventDefault(),!0}if(Z("⇧⌘R",t)){if(e.currentMode==="ir")return zt(C,"right"),we(e),t.preventDefault(),!0;var ee=e.wysiwyg.popover.querySelector('[data-type="right"]');if(ee)return ee.click(),t.preventDefault(),!0}}return!1},Un=function(e,t,n,r){if(n.tagName==="PRE"&&Z("⌘A",t))return r.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&r.toString()==="")return r.insertNode(document.createTextNode(e.options.tab)),r.collapse(!1),we(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,o._0)(t)&&!t.shiftKey&&!t.altKey){var a=(0,I.ED)(n,e[e.currentMode].element,r);if((a.start===0||a.start===1&&n.innerText===`
`)&&r.toString()==="")return n.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(n.firstElementChild.innerHTML,"</p>"),(0,I.ir)(e[e.currentMode].element,r),we(e),t.preventDefault(),!0}return!(0,o._0)(t)&&!t.altKey&&t.key==="Enter"?(n.firstElementChild.textContent.endsWith(`
`)||n.firstElementChild.insertAdjacentText("beforeend",`
`),r.extractContents(),r.insertNode(document.createTextNode(`
`)),r.collapse(!1),(0,I.jl)(r),(0,o.gm)()||(e.currentMode==="wysiwyg"?Bt(e,r):Ie(e,r)),Pe(e),t.preventDefault(),!0):!1},qn=function(e,t,n,r){var a=t.startContainer,s=(0,p._Y)(a,"BLOCKQUOTE");if(s&&t.toString()===""){if(n.key==="Backspace"&&!(0,o._0)(n)&&!n.shiftKey&&!n.altKey&&(0,I.ED)(s,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),s.outerHTML=s.innerHTML,(0,I.ir)(e[e.currentMode].element,t),we(e),n.preventDefault(),!0;if(r&&n.key==="Enter"&&!(0,o._0)(n)&&!n.shiftKey&&!n.altKey&&r.parentElement.tagName==="BLOCKQUOTE"){var k=!1;if(r.innerHTML.replace(y.Y.ZWSP,"")===`
`||r.innerHTML.replace(y.Y.ZWSP,"")===""?(k=!0,r.remove()):r.innerHTML.endsWith(`

`)&&(0,I.ED)(r,e[e.currentMode].element,t).start===r.textContent.length-1&&(r.innerHTML=r.innerHTML.substr(0,r.innerHTML.length-2),k=!0),k)return s.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(y.Y.ZWSP,`<wbr>
</p>`)),(0,I.ir)(e[e.currentMode].element,t),we(e),n.preventDefault(),!0}var C=(0,p.pt)(a);if(e.currentMode==="wysiwyg"&&C&&Z("⇧⌘;",n))return t.insertNode(document.createElement("wbr")),C.outerHTML='<blockquote data-block="0">'.concat(C.outerHTML,"</blockquote>"),(0,I.ir)(e.wysiwyg.element,t),Ce(e),n.preventDefault(),!0;if(jt(e,n,t,s,s)||Et(e,n,t,s,s))return!0}return!1},Wn=function(e,t,n){var r=t.startContainer,a=(0,p._Y)(r,"li");if(a&&a.classList.contains("vditor-task")){if(Z("⇧⌘J",n)){var s=a.firstElementChild;return s.checked?s.removeAttribute("checked"):s.setAttribute("checked","checked"),we(e),n.preventDefault(),!0}if(n.key==="Backspace"&&!(0,o._0)(n)&&!n.shiftKey&&!n.altKey&&t.toString()===""&&t.startOffset===1&&(r.nodeType===3&&r.previousSibling&&r.previousSibling.tagName==="INPUT"||r.nodeType!==3)){var k=a.previousElementSibling;if(a.querySelector("input").remove(),k){var C=(0,p.Rp)(k);C.parentElement.insertAdjacentHTML("beforeend","<wbr>"+a.innerHTML.trim()),a.remove()}else a.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(a.innerHTML.trim()||`
`,"</p>")),a.nextElementSibling?a.remove():a.parentElement.remove();return(0,I.ir)(e[e.currentMode].element,t),we(e),n.preventDefault(),!0}if(n.key==="Enter"&&!(0,o._0)(n)&&!n.shiftKey&&!n.altKey){if(a.textContent.trim()==="")if((0,p.KJ)(a.parentElement,"vditor-task")){var M=(0,p.KR)(r);M&&fn(e,a,t,M)}else if(a.nextElementSibling){var T="",D="",V=!1;Array.from(a.parentElement.children).forEach(function(de){a.isSameNode(de)?V=!0:V?T+=de.outerHTML:D+=de.outerHTML});var te=a.parentElement.tagName,ee=a.parentElement.tagName==="OL"?"":' data-marker="'.concat(a.parentElement.getAttribute("data-marker"),'"'),Q="";D&&(Q=a.parentElement.tagName==="UL"?"":' start="1"',D="<".concat(te,' data-tight="true"').concat(ee,' data-block="0">').concat(D,"</").concat(te,">")),a.parentElement.outerHTML="".concat(D,`<p data-block="0"><wbr>
</p><`).concat(te,`
 data-tight="true"`).concat(ee,' data-block="0"').concat(Q,">").concat(T,"</").concat(te,">")}else a.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),a.parentElement.querySelectorAll("li").length===1?a.parentElement.remove():a.remove();else r.nodeType!==3&&t.startOffset===0&&r.firstChild.tagName==="INPUT"?t.setStart(r.childNodes[1],1):(t.setEndAfter(a.lastChild),a.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'.concat(a.getAttribute("data-marker"),'"><input type="checkbox"> <wbr></li>')),document.querySelector("wbr").after(t.extractContents()));return(0,I.ir)(e[e.currentMode].element,t),we(e),Pe(e),n.preventDefault(),!0}}return!1},Kn=function(e,t,n,r){if(t.startContainer.nodeType!==3){var a=t.startContainer.children[t.startOffset];if(a&&a.tagName==="HR")return t.selectNodeContents(a.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(r){var s=r.previousElementSibling;if(s&&(0,I.ED)(r,e[e.currentMode].element,t).start===0&&((0,o.gm)()&&s.tagName==="HR"||s.tagName==="TABLE")){if(s.tagName==="TABLE"){var k=s.lastElementChild.lastElementChild.lastElementChild;k.innerHTML=k.innerHTML.trimLeft()+"<wbr>"+r.textContent.trim(),r.remove()}else s.remove();return(0,I.ir)(e[e.currentMode].element,t),we(e),n.preventDefault(),!0}}return!1},Zn=function(e){(0,o.gm)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},Gn=function(e,t,n){var r,a;if(!(0,o.gm)())return!1;if(e.key==="ArrowUp"&&t&&((r=t.previousElementSibling)===null||r===void 0?void 0:r.tagName)==="TABLE"){var s=t.previousElementSibling;return n.selectNodeContents(s.rows[s.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return e.key==="ArrowDown"&&t&&((a=t.nextElementSibling)===null||a===void 0?void 0:a.tagName)==="TABLE"?(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0):!1},Ut=function(e,t,n){return Tr(void 0,void 0,void 0,function(){var r,a,s,k,C,M,T,D,V,te,ee,Q,de,J,ae,J,he;return Mr(this,function(ce){switch(ce.label){case 0:return e[e.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(r=t.clipboardData.getData("text/html"),a=t.clipboardData.getData("text/plain"),s=t.clipboardData.files):(r=t.dataTransfer.getData("text/html"),a=t.dataTransfer.getData("text/plain"),t.dataTransfer.types.includes("Files")&&(s=t.dataTransfer.items)),k={},C=function(me,De){if(!De)return["",Lute.WalkContinue];if(e.options.upload.renderLinkDest)return e.options.upload.renderLinkDest(e,me,De);var Te=me.TokensStr();if(me.__internal_object__.Parent.Type===34&&Te&&Te.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var He=new XMLHttpRequest;He.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&He.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(He.withCredentials=!0),jn(e,He),He.setRequestHeader("Content-Type","application/json; charset=utf-8"),He.onreadystatechange=function(){if(He.readyState===XMLHttpRequest.DONE){if(He.status===200){var Ke=He.responseText;e.options.upload.linkToImgFormat&&(Ke=e.options.upload.linkToImgFormat(He.responseText));var Ye=JSON.parse(Ke);if(Ye.code!==0){e.tip.show(Ye.msg);return}var Ze=Ye.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Ve){Ve.textContent===Ze&&(Ve.textContent=Ye.data.url)});else{var ye=e[e.currentMode].element.querySelector('img[src="'.concat(Ze,'"]'));ye.src=Ye.data.url,e.currentMode==="ir"&&(ye.previousElementSibling.previousElementSibling.innerHTML=Ye.data.url)}we(e)}else e.tip.show(He.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(He.responseText)}},He.send(JSON.stringify({url:Te}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'.concat(Lute.EscapeHTMLStr(Te),"</span>"),Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'.concat(Lute.EscapeHTMLStr(Te),"</span>"),Lute.WalkContinue]},(r.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'.concat(a,'">').concat(a,"</a>")||r.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'.concat(a,'">').concat(a,"</a><!--EndFragment-->"))&&(r=""),M=new DOMParser().parseFromString(r,"text/html"),M.body&&(r=M.body.innerHTML),r=Lute.Sanitize(r),e.wysiwyg.getComments(e),T=e[e.currentMode].element.scrollHeight,D=se(r,a,e.currentMode),V=e.currentMode==="sv"?(0,p.Th)(t.target,"data-type","code-block"):(0,p._Y)(t.target,"CODE"),V?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,a.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(te=(0,I.ED)(t.target,e[e.currentMode].element),V.parentElement.tagName!=="PRE"&&(a+=y.Y.ZWSP),V.textContent=V.textContent.substring(0,te.start)+a+V.textContent.substring(te.end),(0,I.Fm)(te.start+a.length,te.start+a.length,V.parentElement),!((he=V.parentElement)===null||he===void 0)&&he.nextElementSibling.classList.contains("vditor-".concat(e.currentMode,"__preview"))&&(V.parentElement.nextElementSibling.innerHTML=V.outerHTML,fe(V.parentElement.nextElementSibling,e))),[3,8]):[3,1]);case 1:return D?(n.pasteCode(D),[3,8]):[3,2];case 2:return r.trim()===""?[3,3]:(ee=document.createElement("div"),ee.innerHTML=r,ee.querySelectorAll("[style]").forEach(function(me){me.removeAttribute("style")}),ee.querySelectorAll(".vditor-copy").forEach(function(me){me.remove()}),e.currentMode==="ir"?(k.HTML2VditorIRDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:k}),(0,I.Z2)(e.lute.HTML2VditorIRDOM(ee.innerHTML),e)):e.currentMode==="wysiwyg"?(k.HTML2VditorDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:k}),(0,I.Z2)(e.lute.HTML2VditorDOM(ee.innerHTML),e)):(k.Md2VditorSVDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:k}),dn(e,e.lute.HTML2Md(ee.innerHTML).trimRight())),e.outline.render(e),[3,8]);case 3:return s.length>0?e.options.upload.url||e.options.upload.handler?[4,pn(e,s)]:[3,5]:[3,7];case 4:return ce.sent(),[3,6];case 5:Q=new FileReader,"clipboardData"in t?(s=t.clipboardData.files,de=s[0]):t.dataTransfer.types.includes("Files")&&(s=t.dataTransfer.items,de=s[0].getAsFile()),de&&de.type.startsWith("image")&&(Q.readAsDataURL(de),Q.onload=function(){var me="";e.currentMode==="wysiwyg"?me+='<img alt="'.concat(de.name,'" src="').concat(Q.result.toString(),`">
`):me+="![".concat(de.name,"](").concat(Q.result.toString(),`)
`),document.execCommand("insertHTML",!1,me)}),ce.label=6;case 6:return[3,8];case 7:a.trim()!==""&&s.length===0&&(J=(0,I.RN)(e),J.toString()!==""&&e.lute.IsValidLinkDest(a)&&(a="[".concat(J.toString(),"](").concat(a,")")),e.currentMode==="ir"?(k.Md2VditorIRDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:k}),(0,I.Z2)(e.lute.Md2VditorIRDOM(a),e)):e.currentMode==="wysiwyg"?(k.Md2VditorDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:k}),(0,I.Z2)(e.lute.Md2VditorDOM(a),e)):(k.Md2VditorSVDOM={renderLinkDest:C},e.lute.SetJSRenderers({renderers:k}),dn(e,a)),e.outline.render(e)),ce.label=8;case 8:return e.currentMode!=="sv"&&(ae=(0,p.pt)((0,I.RN)(e).startContainer),ae&&(J=(0,I.RN)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(me){me.remove()}),J.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?ae.outerHTML=e.lute.SpinVditorDOM(ae.outerHTML):ae.outerHTML=e.lute.SpinVditorIRDOM(ae.outerHTML),(0,I.ir)(e[e.currentMode].element,J)),e[e.currentMode].element.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(me){fe(me,e)})),e.wysiwyg.triggerRemoveComment(e),we(e),e[e.currentMode].element.scrollHeight-T>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&Pe(e),[2]}})})},Xn,Jn=function(e){var t,n;e.hint.render(e);var r=(0,I.RN)(e).startContainer,a=(0,p.Th)(r,"data-type","code-block-info");if(a)if(a.textContent.replace(y.Y.ZWSP,"")===""&&e.hint.recentLanguage){a.textContent=y.Y.ZWSP+e.hint.recentLanguage;var s=(0,I.RN)(e);s.selectNodeContents(a)}else{var k=[],C=a.textContent.substring(0,(0,I.ED)(a,e.ir.element).start).replace(y.Y.ZWSP,"");(e.options.preview.hljs.langs||y.Y.ALIAS_CODE_LANGUAGES.concat(((n=(t=window.hljs)===null||t===void 0?void 0:t.listLanguages())!==null&&n!==void 0?n:[]).sort())).forEach(function(M){M.indexOf(C.toLowerCase())>-1&&k.push({html:M,value:M})}),e.hint.genHTML(k,C,e)}},lt=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&Jn(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var n=g(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,o.D)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},Ht=function(e,t){var n=(0,I.RN)(e),r=(0,p.pt)(n.startContainer)||n.startContainer;if(r){var a=r.querySelector(".vditor-ir__marker--heading");a?a.innerHTML=t:(r.insertAdjacentText("afterbegin",t),n.selectNodeContents(r),n.collapse(!1)),Ie(e,n.cloneRange()),tt(e)}},qt=function(e,t,n){var r=(0,p.Th)(e.startContainer,"data-type",n);if(r){r.firstElementChild.remove(),r.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var a=document.createElement("div");a.innerHTML=t.lute.SpinVditorIRDOM(r.outerHTML),r.outerHTML=a.firstElementChild.innerHTML.trim()}},Dr=function(e,t,n,r){var a=(0,I.RN)(e),s=t.getAttribute("data-type"),k=a.startContainer;k.nodeType===3&&(k=k.parentElement);var C=!0;if(t.classList.contains("vditor-menu--current"))if(s==="quote"){var M=(0,p._Y)(k,"BLOCKQUOTE");M&&(a.insertNode(document.createElement("wbr")),M.outerHTML=M.innerHTML.trim()===""?'<p data-block="0">'.concat(M.innerHTML,"</p>"):M.innerHTML)}else if(s==="link"){var T=(0,p.Th)(a.startContainer,"data-type","a");if(T){var D=(0,p.KJ)(a.startContainer,"vditor-ir__link");D?(a.insertNode(document.createElement("wbr")),T.outerHTML=D.innerHTML):T.outerHTML=T.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else s==="italic"?qt(a,e,"em"):s==="bold"?qt(a,e,"strong"):s==="strike"?qt(a,e,"s"):s==="inline-code"?qt(a,e,"code"):(s==="check"||s==="list"||s==="ordered-list")&&(Ft(e,a,s),C=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,I.ir)(e.ir.element,a));var V=(0,p.pt)(a.startContainer);if(s==="line"){if(V){var te=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;V.innerHTML.trim()===""?V.outerHTML=te:V.insertAdjacentHTML("afterend",te)}}else if(s==="quote")V&&(a.insertNode(document.createElement("wbr")),V.outerHTML='<blockquote data-block="0">'.concat(V.outerHTML,"</blockquote>"),C=!1,t.classList.add("vditor-menu--current"));else if(s==="link"){var ee=void 0;a.toString()===""?ee="".concat(n,"<wbr>").concat(r):ee="".concat(n).concat(a.toString()).concat(r.replace(")","<wbr>)")),document.execCommand("insertHTML",!1,ee),C=!1,t.classList.add("vditor-menu--current")}else if(s==="italic"||s==="bold"||s==="strike"||s==="inline-code"||s==="code"||s==="table"){var ee=void 0;a.toString()===""?ee="".concat(n,"<wbr>").concat(r):(s==="code"?ee="".concat(n,`
`).concat(a.toString(),"<wbr>").concat(r):s==="table"?ee="".concat(n).concat(a.toString(),"<wbr>").concat(r):ee="".concat(n).concat(a.toString()).concat(r,"<wbr>"),a.deleteContents()),(s==="table"||s==="code")&&(ee=`
`+ee+`

`);var Q=document.createElement("span");Q.innerHTML=ee,a.insertNode(Q),Ie(e,a),s==="table"&&(a.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,I.jl)(a))}else(s==="check"||s==="list"||s==="ordered-list")&&(Ft(e,a,s,!1),C=!1,c(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}(0,I.ir)(e.ir.element,a),lt(e),C&&tt(e)},jr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(k){k(s)})}return new(n||(n=Promise))(function(s,k){function C(D){try{T(r.next(D))}catch(V){k(V)}}function M(D){try{T(r.throw(D))}catch(V){k(V)}}function T(D){D.done?s(D.value):a(D.value).then(C,M)}T((r=r.apply(e,t||[])).next())})},Hr=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,k;return k={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function C(T){return function(D){return M([T,D])}}function M(T){if(r)throw new TypeError("Generator is already executing.");for(;k&&(k=0,T[0]&&(n=0)),n;)try{if(r=1,a&&(s=T[0]&2?a.return:T[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,T[1])).done)return s;switch(a=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){n.label=T[1];break}if(T[0]===6&&n.label<s[1]){n.label=s[1],s=T;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(T);break}s[2]&&n.ops.pop(),n.trys.pop();continue}T=t.call(e,n)}catch(D){T=[6,D],a=0}finally{r=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},Or=function(){function e(t){var n=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(r,a){n.element.style.display="none";var s=decodeURIComponent(r.getAttribute("data-value")),k=window.getSelection().getRangeAt(0);if(a.currentMode==="ir"){var C=(0,p.Th)(k.startContainer,"data-type","code-block-info");if(C){C.textContent=y.Y.ZWSP+s.trimRight(),k.selectNodeContents(C),k.collapse(!1),lt(a),C.parentElement.querySelectorAll("code").forEach(function(V){V.className="language-"+s.trimRight()}),fe(C.parentElement.querySelector(".vditor-ir__preview"),a),n.recentLanguage=s.trimRight();return}}if(a.currentMode==="wysiwyg"&&k.startContainer.nodeType!==3){var M=k.startContainer,T=void 0;if(M.classList.contains("vditor-input")?T=M:T=M.firstElementChild,T&&T.classList.contains("vditor-input")){T.value=s.trimRight(),k.selectNodeContents(T),k.collapse(!1),T.dispatchEvent(new CustomEvent("input",{detail:1})),n.recentLanguage=s.trimRight();return}}if(k.setStart(k.startContainer,n.lastIndex),k.deleteContents(),a.options.hint.parse?a.currentMode==="sv"?(0,I.Z2)(a.lute.SpinVditorSVDOM(s),a):a.currentMode==="wysiwyg"?(0,I.Z2)(a.lute.SpinVditorDOM(s),a):(0,I.Z2)(a.lute.SpinVditorIRDOM(s),a):(0,I.Z2)(s,a),n.splitChar===":"&&s.indexOf(":")>-1&&a.currentMode!=="sv"&&k.insertNode(document.createTextNode(" ")),k.collapse(!1),(0,I.jl)(k),a.currentMode==="wysiwyg"){var D=(0,p.KJ)(k.startContainer,"vditor-wysiwyg__block");D&&D.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(D.lastElementChild.innerHTML=D.firstElementChild.innerHTML,fe(D.lastElementChild,a))}else if(a.currentMode==="ir"){var D=(0,p.KJ)(k.startContainer,"vditor-ir__marker--pre");D&&D.nextElementSibling.classList.contains("vditor-ir__preview")&&(D.nextElementSibling.innerHTML=D.innerHTML,fe(D.nextElementSibling,a))}we(a)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var n=this;if(window.getSelection().focusNode){var r,a=getSelection().getRangeAt(0);r=a.startContainer.textContent.substring(0,a.startOffset)||"";var s=this.getKey(r,t.options.hint.extend);if(typeof s>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var k=s===""?t.options.hint.emoji:t.lute.GetEmojis(),C=[];Object.keys(k).forEach(function(M){M.indexOf(s.toLowerCase())===0&&(k[M].indexOf(".")>-1?C.push({html:'<img src="'.concat(k[M],'" title=":').concat(M,':"/> :').concat(M,":"),value:":".concat(M,":")}):C.push({html:'<span class="vditor-hint__emoji">'.concat(k[M],"</span>").concat(M),value:k[M]}))}),this.genHTML(C,s,t)}else t.options.hint.extend.forEach(function(M){M.key===n.splitChar&&(clearTimeout(n.timeId),n.timeId=window.setTimeout(function(){return jr(n,void 0,void 0,function(){var T;return Hr(this,function(D){switch(D.label){case 0:return T=this.genHTML,[4,M.hint(s)];case 1:return T.apply(this,[D.sent(),s,t]),[2]}})})},t.options.hint.delay))})}},e.prototype.genHTML=function(t,n,r){var a=this;if(t.length===0){this.element.style.display="none";return}var s=r[r.currentMode].element,k=(0,I.Ey)(s),C=k.left+(r.options.outline.position==="left"?r.outline.element.offsetWidth:0),M=k.top,T="";t.forEach(function(V,te){if(!(te>7)){var ee=V.html;if(n!==""){var Q=ee.lastIndexOf(">")+1,de=ee.substr(Q),ae=de.toLowerCase().indexOf(n.toLowerCase());ae>-1&&(de=de.substring(0,ae)+"<b>"+de.substring(ae,ae+n.length)+"</b>"+de.substring(ae+n.length),ee=ee.substr(0,Q)+de)}T+='<button type="button" data-value="'.concat(encodeURIComponent(V.value),` "
`).concat(te===0?"class='vditor-hint--current'":"","> ").concat(ee,"</button>")}}),this.element.innerHTML=T;var D=parseInt(document.defaultView.getComputedStyle(s,null).getPropertyValue("line-height"),10);this.element.style.top="".concat(M+(D||22),"px"),this.element.style.left="".concat(C,"px"),this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(V){V.addEventListener("click",function(te){a.fillEmoji(V,r),te.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top="".concat(M-this.element.offsetHeight,"px")),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")},e.prototype.select=function(t,n){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var r=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),r.removeAttribute("class"),r.nextElementSibling?r.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),r.removeAttribute("class"),r.previousElementSibling)r.previousElementSibling.className="vditor-hint--current";else{var a=this.element.children.length;this.element.children[a-1].className="vditor-hint--current"}return!0}else if(!(0,o._0)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"&&!t.isComposing)return t.preventDefault(),t.stopPropagation(),this.fillEmoji(r,n),!0;return!1},e.prototype.getKey=function(t,n){var r=this;this.lastIndex=-1,this.splitChar="",n.forEach(function(T){var D=t.lastIndexOf(T.key);r.lastIndex<D&&(r.splitChar=T.key,r.lastIndex=D)});var a;if(this.lastIndex===-1)return a;var s=t.split(this.splitChar),k=s[s.length-1],C=32;if(s.length>1&&k.trim()===k)if(s.length===2&&s[0]===""&&s[1].length<C)a=s[1];else{var M=s[s.length-2].slice(-1);(0,u.p)(M)===" "&&k.length<C&&(a=k)}return a},e}(),Ir=function(){function e(t){this.composingLock=!1;var n=document.createElement("div");n.className="vditor-ir",n.innerHTML='<pre class="vditor-reset" placeholder="'.concat(t.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>`),this.element=n.firstElementChild,this.bindEvent(t),rn(t,this.element),Mn(t,this.element),an(t,this.element),cn(t,this.element),un(t,this.element),on(t,this.element),sn(t,this.element,this.copy),ln(t,this.element,this.copy)}return e.prototype.copy=function(t,n){var r=getSelection().getRangeAt(0);if(r.toString()!==""){t.stopPropagation(),t.preventDefault();var a=document.createElement("div");a.appendChild(r.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorIRDOM2Md(a.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(r){Ut(t,r,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})}),this.element.addEventListener("scroll",function(){x(t,["hint"])}),this.element.addEventListener("compositionstart",function(r){n.composingLock=!0}),this.element.addEventListener("compositionend",function(r){(0,o.gm)()||Ie(t,getSelection().getRangeAt(0).cloneRange()),n.composingLock=!1}),this.element.addEventListener("input",function(r){if(!(r.inputType==="deleteByDrag"||r.inputType==="insertFromDrop")){if(n.preventInput){n.preventInput=!1,lt(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}n.composingLock||r.data==="‘"||r.data==="“"||r.data==="《"||Ie(t,getSelection().getRangeAt(0).cloneRange(),!1,r)}}),this.element.addEventListener("click",function(r){if(r.target.tagName==="INPUT"){r.target.checked?r.target.setAttribute("checked","checked"):r.target.removeAttribute("checked"),n.preventInput=!0,lt(t);return}var a=(0,I.RN)(t),s=(0,p.KJ)(r.target,"vditor-ir__preview");if(s||(s=(0,p.KJ)(a.startContainer,"vditor-ir__preview")),s&&(s.previousElementSibling.firstElementChild?a.selectNodeContents(s.previousElementSibling.firstElementChild):a.selectNodeContents(s.previousElementSibling),a.collapse(!0),(0,I.jl)(a),Pe(t)),r.target.tagName==="IMG"){var k=r.target.parentElement.querySelector(".vditor-ir__marker--link");k&&(a.selectNode(k),(0,I.jl)(a))}var C=(0,p.Th)(r.target,"data-type","a");if(C&&!C.classList.contains("vditor-ir__node--expand")){t.options.link.click?t.options.link.click(C.querySelector(":scope > .vditor-ir__marker--link")):t.options.link.isOpen&&window.open(C.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(r.target.isEqualNode(n.element)&&n.element.lastElementChild&&a.collapsed){var M=n.element.lastElementChild.getBoundingClientRect();r.y>M.top+M.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(y.Y.ZWSP,"")===""?(a.selectNodeContents(n.element.lastElementChild),a.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(y.Y.ZWSP,"<wbr></p>")),(0,I.ir)(n.element,a)))}a.toString()===""?K(a,t):setTimeout(function(){K((0,I.RN)(t),t)}),Ee(r,t),tt(t)}),this.element.addEventListener("keyup",function(r){if(!(r.isComposing||(0,o._0)(r))){if(r.key==="Enter"&&Pe(t),tt(t),(r.key==="Backspace"||r.key==="Delete")&&t.ir.element.innerHTML!==""&&t.ir.element.childNodes.length===1&&t.ir.element.firstElementChild&&t.ir.element.firstElementChild.tagName==="P"&&t.ir.element.firstElementChild.childElementCount===0&&(t.ir.element.textContent===""||t.ir.element.textContent===`
`)){t.ir.element.innerHTML="";return}var a=(0,I.RN)(t);r.key==="Backspace"?((0,o.gm)()&&a.startContainer.textContent===`
`&&a.startOffset===1&&(a.startContainer.textContent="",K(a,t)),n.element.querySelectorAll(".language-math").forEach(function(k){var C=k.querySelector("br");C&&C.remove()})):r.key.indexOf("Arrow")>-1?((r.key==="ArrowLeft"||r.key==="ArrowRight")&&Jn(t),K(a,t)):r.keyCode===229&&r.code===""&&r.key==="Unidentified"&&K(a,t);var s=(0,p.KJ)(a.startContainer,"vditor-ir__preview");if(s){if(r.key==="ArrowUp"||r.key==="ArrowLeft")return s.previousElementSibling.firstElementChild?a.selectNodeContents(s.previousElementSibling.firstElementChild):a.selectNodeContents(s.previousElementSibling),a.collapse(!1),r.preventDefault(),!0;if(s.tagName==="SPAN"&&(r.key==="ArrowDown"||r.key==="ArrowRight"))return s.parentElement.getAttribute("data-type")==="html-entity"?(s.parentElement.insertAdjacentText("afterend",y.Y.ZWSP),a.setStart(s.parentElement.nextSibling,1)):a.selectNodeContents(s.parentElement.lastElementChild),a.collapse(!1),r.preventDefault(),!0}}})},e}(),Qn=function(e){if(e.currentMode==="sv")return e.lute.Md2HTML(g(e));if(e.currentMode==="wysiwyg")return e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML);if(e.currentMode==="ir")return e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML)},Rr=v(796),er=v(70),Nr=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'.concat(t,`</div>
<div class="vditor-outline__content"></div>`)}return e.prototype.render=function(t){var n="";return t.preview.element.style.display==="block"?n=(0,er.N)(t.preview.previewElement,this.element.lastElementChild,t):n=(0,er.N)(t[t.currentMode].element,this.element.lastElementChild,t),n},e.prototype.toggle=function(t,n,r){var a;n===void 0&&(n=!0),r===void 0&&(r=!0);var s=(a=t.toolbar.elements.outline)===null||a===void 0?void 0:a.firstElementChild;if(n&&window.innerWidth>=y.Y.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),s==null||s.classList.add("vditor-menu--current")):(this.element.style.display="none",s==null||s.classList.remove("vditor-menu--current")),r&&getSelection().rangeCount>0){var k=getSelection().getRangeAt(0);t[t.currentMode].element.contains(k.startContainer)&&(0,I.jl)(k)}Ne(t)},e}(),$r=v(0),Pr=function(){function e(t){var n=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",t.options.classes.preview&&this.previewElement.classList.add(t.options.classes.preview),this.previewElement.style.maxWidth=t.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(M){if(M.target.tagName!=="TEXTAREA"){var T=document.createElement("div");T.className="vditor-reset",T.appendChild(getSelection().getRangeAt(0).cloneContents()),n.copyToX(t,T,"default"),M.preventDefault()}}),this.previewElement.addEventListener("click",function(M){var T=(0,p._Y)(M.target,"SPAN");if(T&&(0,p.KJ)(T,"vditor-toc")){var D=n.previewElement.querySelector("#"+T.getAttribute("data-target-id"));D&&(n.element.scrollTop=D.offsetTop);return}if(M.target.tagName==="A"){t.options.link.click?t.options.link.click(M.target):t.options.link.isOpen&&window.open(M.target.getAttribute("href")),M.preventDefault();return}M.target.tagName==="IMG"&&(t.options.image.preview?t.options.image.preview(M.target):t.options.image.isPreview&&(0,oe.o)(M.target,t.options.lang,t.options.theme))}),this.element.appendChild(this.previewElement);var r=t.options.preview.actions;if(r.length!==0){var a=document.createElement("div");a.className="vditor-preview__action";for(var s=[],k=0;k<r.length;k++){var C=r[k];if(typeof C=="object"){s.push('<button type="button" data-type="'.concat(C.key,'" class="').concat(C.className,'"').concat(C.tooltip?' aria-label="'.concat(C.tooltip,'"'):"",'">').concat(C.text,"</button>"));continue}switch(C){case"desktop":s.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":s.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":s.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":s.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":s.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}a.innerHTML=s.join(""),a.addEventListener((0,o.y3)(),function(M){var T=(0,L.f)(M.target,"BUTTON");if(T){var D=T.getAttribute("data-type"),V=r.find(function(te){return(te==null?void 0:te.key)===D});if(V){V.click(D);return}if(D==="mp-wechat"||D==="zhihu"){n.copyToX(t,n.previewElement.cloneNode(!0),D);return}D==="desktop"?n.previewElement.style.width="auto":D==="tablet"?n.previewElement.style.width="780px":n.previewElement.style.width="360px",n.previewElement.scrollWidth>n.previewElement.parentElement.clientWidth&&(n.previewElement.style.width="auto"),n.render(t),a.querySelectorAll("button").forEach(function(te){te.classList.remove("vditor-preview__action--current")}),T.classList.add("vditor-preview__action--current")}}),this.element.insertBefore(a,this.previewElement)}}return e.prototype.render=function(t,n){var r=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide();return}if(n){this.previewElement.innerHTML=n;return}if(g(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var a=new Date().getTime(),s=g(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var k=new XMLHttpRequest;k.open("POST",t.options.preview.url),k.setRequestHeader("Content-Type","application/json;charset=UTF-8"),k.onreadystatechange=function(){if(k.readyState===XMLHttpRequest.DONE)if(k.status===200){var M=JSON.parse(k.responseText);if(M.code!==0){t.tip.show(M.msg);return}t.options.preview.transform&&(M.data=t.options.preview.transform(M.data)),r.previewElement.innerHTML=M.data,r.afterRender(t,a)}else{var T=t.lute.Md2HTML(s);t.options.preview.transform&&(T=t.options.preview.transform(T)),r.previewElement.innerHTML=T,r.afterRender(t,a)}},k.send(JSON.stringify({markdownText:s}))}else{var C=t.lute.Md2HTML(s);t.options.preview.transform&&(C=t.options.preview.transform(C)),r.previewElement.innerHTML=C,r.afterRender(t,a)}},t.options.preview.delay)},e.prototype.afterRender=function(t,n){t.options.preview.parse&&t.options.preview.parse(this.element);var r=new Date().getTime()-n;new Date().getTime()-n>2600?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",r.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var a=t.preview.element.querySelector(".vditor-comment--focus");a&&a.classList.remove("vditor-comment--focus"),(0,P.o)(t.preview.previewElement,t.options.preview.hljs),(0,R.$)(t.options.preview.hljs,t.preview.previewElement,t.options.cdn),(0,B.e)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,N.K)(t.preview.previewElement,t.options.cdn),(0,G.Y)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,F.D)(t.preview.previewElement,t.options.cdn),(0,Y.m)(t.preview.previewElement,t.options.cdn),(0,A.v)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,z.l)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,q.M)(t.preview.previewElement,t.options.cdn),(0,O.$)(t.preview.previewElement,t.options.cdn),t.options.preview.render.media.enable&&(0,$r.l)(t.preview.previewElement),t.options.customRenders.forEach(function(C){C.render(t.preview.previewElement,t)});var s=t.preview.element,k=t.outline.render(t);k===""&&(k="[ToC]"),s.querySelectorAll('[data-type="toc-block"]').forEach(function(C){C.innerHTML=k,(0,$.T)(C,{cdn:t.options.cdn,math:t.options.preview.math})}),(0,$.T)(t.preview.previewElement,{cdn:t.options.cdn,math:t.options.preview.math})},e.prototype.copyToX=function(t,n,r){r===void 0&&(r="mp-wechat"),r!=="zhihu"?n.querySelectorAll(".katex-html .base").forEach(function(s){s.style.display="initial"}):n.querySelectorAll(".language-math").forEach(function(s){s.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'.concat(s.getAttribute("data-math"),'\\" style="display: block; margin: 0 auto; max-width: 100%;">')}),n.style.backgroundColor="#fff",n.querySelectorAll("code").forEach(function(s){s.style.backgroundImage="none"}),this.element.append(n);var a=n.ownerDocument.createRange();a.selectNode(n),(0,I.jl)(a),document.execCommand("copy"),n.remove(),t.tip.show(["zhihu","mp-wechat"].includes(r)?"已复制，可到".concat(r==="zhihu"?"知乎":"微信公众号平台","进行粘贴"):"已复制到剪切板")},e}(),Vr=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--".concat(t.options.resize.position),this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("mousedown",function(r){var a=document,s=r.clientY,k=t.element.offsetHeight,C=63+t.element.querySelector(".vditor-toolbar").clientHeight;a.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),n.element.classList.add("vditor-resize--selected"),a.onmousemove=function(M){t.options.resize.position==="top"?t.element.style.height=Math.max(C,k+(s-M.clientY))+"px":t.element.style.height=Math.max(C,k+(M.clientY-s))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},a.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-k),window.captureEvents&&window.captureEvents(),a.onmousemove=null,a.onmouseup=null,a.ondragstart=null,a.onselectstart=null,a.onselect=null,n.element.classList.remove("vditor-resize--selected")}})},e}(),Br=function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),rn(t,this.element),an(t,this.element),cn(t,this.element),un(t,this.element),on(t,this.element),sn(t,this.element,this.copy),ln(t,this.element,this.copy)}return e.prototype.copy=function(t,n){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",At(n[n.currentMode].element))},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(r){Ut(t,r,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var r=n.element.scrollTop,a=n.element.clientHeight,s=n.element.scrollHeight-parseFloat(n.element.style.paddingBottom||"0"),k=t.preview.element;r/a>.5?k.scrollTop=(r+a)*k.scrollHeight/s-a:k.scrollTop=r*k.scrollHeight/s}}),this.element.addEventListener("compositionstart",function(r){n.composingLock=!0}),this.element.addEventListener("compositionend",function(r){(0,o.gm)()||ve(t,r),n.composingLock=!1}),this.element.addEventListener("input",function(r){if(!(r.inputType==="deleteByDrag"||r.inputType==="insertFromDrop")&&!(n.composingLock||r.data==="‘"||r.data==="“"||r.data==="《")){if(n.preventInput){n.preventInput=!1,Be(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}ve(t,r)}}),this.element.addEventListener("keyup",function(r){if(!(r.isComposing||(0,o._0)(r))){if((r.key==="Backspace"||r.key==="Delete")&&t.sv.element.innerHTML!==""&&t.sv.element.childNodes.length===1&&t.sv.element.firstElementChild&&t.sv.element.firstElementChild.tagName==="DIV"&&t.sv.element.firstElementChild.childElementCount===2&&(t.sv.element.firstElementChild.textContent===""||t.sv.element.textContent===`
`)){t.sv.element.innerHTML="";return}r.key==="Enter"&&Pe(t)}})},e}(),tr=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,n){var r=this;n===void 0&&(n=6e3),this.element.className="vditor-tip vditor-tip--show",n===0?(this.element.innerHTML='<div class="vditor-tip__content">'.concat(t,`
<div class="vditor-tip__close">X</div></div>`),this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){r.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'.concat(t,"</div>"),setTimeout(function(){r.hide()},n)),this.element.removeAttribute("style"),setTimeout(function(){var a=r.element.getBoundingClientRect();a.top<46&&(r.element.style.position="fixed",r.element.style.top="46px")},150)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),yn=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),l(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",c(t.toolbar.elements,["both"]);break}t.devtools&&t.devtools.renderEchart(t)}},Fr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zr=function(e){Fr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return n.options.preview.mode==="both"&&a.element.children[0].classList.add("vditor-menu--current"),a.element.children[0].addEventListener((0,o.y3)(),function(s){var k=a.element.firstElementChild;k.classList.contains(y.Y.CLASS_MENU_DISABLED)||(s.preventDefault(),n.currentMode==="sv"&&(n.options.preview.mode==="both"?yn("editor",n):yn("both",n)))}),a}return t}($e),Yr=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return e}(),nr=v(13),Ur=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qr=function(e){Ur(t,e);function t(n,r){var a=e.call(this,n,r)||this,s=a.element.children[0],k=document.createElement("div");k.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow");var C="";return y.Y.CODE_THEME.forEach(function(M){C+="<button>".concat(M,"</button>")}),k.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(C,"</div>"),k.addEventListener((0,o.y3)(),function(M){M.target.tagName==="BUTTON"&&(x(n,["subToolbar"]),n.options.preview.hljs.style=M.target.textContent,(0,nr.h)(M.target.textContent,n.options.cdn),M.preventDefault(),M.stopPropagation())}),a.element.appendChild(k),E(n,k,s,r.level),a}return t}($e),Wr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kr=function(e){Wr(t,e);function t(n,r){var a=e.call(this,n,r)||this,s=a.element.children[0],k=document.createElement("div");k.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow");var C="";return Object.keys(n.options.preview.theme.list).forEach(function(M){C+='<button data-type="'.concat(M,'">').concat(n.options.preview.theme.list[M],"</button>")}),k.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(C,"</div>"),k.addEventListener((0,o.y3)(),function(M){M.target.tagName==="BUTTON"&&(x(n,["subToolbar"]),n.options.preview.theme.current=M.target.getAttribute("data-type"),(0,pe.H)(n.options.preview.theme.current,n.options.preview.theme.path),M.preventDefault(),M.stopPropagation())}),a.element.appendChild(k),E(n,k,s,r.level),a}return t}($e),Zr=function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,n){var r=n.endsWith(`
`)?n.length-1:n.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var a=t[t.currentMode].element.cloneNode(!0);a.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(s){s.remove()}),r=a.textContent.length}typeof t.options.counter.max=="number"?(r>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML="".concat(r,"/").concat(t.options.counter.max)):this.element.innerHTML="".concat(r),this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(r,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e}(),Gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xr=function(e){Gr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].innerHTML=r.icon,a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),!s.currentTarget.classList.contains(y.Y.CLASS_MENU_DISABLED)&&r.click(s,n)}),a}return t}($e),Jr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qr=function(e){Jr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.firstElementChild.addEventListener((0,o.y3)(),function(s){var k=a.element.firstElementChild;k.classList.contains(y.Y.CLASS_MENU_DISABLED)||(s.preventDefault(),k.classList.contains("vditor-menu--current")?(k.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",Ne(n)):(k.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",Ne(n),n.devtools.renderEchart(n)))}),a}return t}($e),ea=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return e}(),ta=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),na=function(e){ta(t,e);function t(n,r){var a=e.call(this,n,r)||this,s=document.createElement("div");s.className="vditor-panel vditor-panel--arrow";var k="";return Object.keys(n.options.hint.emoji).forEach(function(C){var M=n.options.hint.emoji[C];M.indexOf(".")>-1?k+='<button data-value=":'.concat(C,': " data-key=":').concat(C,`:"><img
data-value=":`).concat(C,': " data-key=":').concat(C,':" class="vditor-emojis__icon" src="').concat(M,'"/></button>'):k+='<button data-value="'.concat(M,` "
 data-key="`).concat(C,'"><span class="vditor-emojis__icon">').concat(M,"</span></button>")}),s.innerHTML='<div class="vditor-emojis" style="max-height: '.concat(n.options.height==="auto"?"auto":n.options.height-80,'px">').concat(k,`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`).concat(n.options.hint.emojiTail||"",`</span>
</div>`),a.element.appendChild(s),E(n,s,a.element.firstElementChild,r.level),a.bindEvent(n),a}return t.prototype.bindEvent=function(n){var r=this;this.element.lastElementChild.addEventListener((0,o.y3)(),function(a){var s=(0,L.f)(a.target,"BUTTON");if(s){a.preventDefault();var k=s.getAttribute("data-value"),C=(0,I.RN)(n),M=k;if(n.currentMode==="wysiwyg"?M=n.lute.SpinVditorDOM(k):n.currentMode==="ir"&&(M=n.lute.SpinVditorIRDOM(k)),k.indexOf(":")>-1&&n.currentMode!=="sv"){var T=document.createElement("div");T.innerHTML=M,M=T.firstElementChild.firstElementChild.outerHTML+" ",(0,I.Z2)(M,n)}else C.extractContents(),C.insertNode(document.createTextNode(k)),(0,p.pt)(C.startContainer)||Tt(n,C);C.collapse(!1),(0,I.jl)(C),r.element.lastElementChild.style.display="none",we(n)}}),this.element.lastElementChild.addEventListener("mouseover",function(a){var s=(0,L.f)(a.target,"BUTTON");s&&(r.element.querySelector(".vditor-emojis__tip").innerHTML=s.getAttribute("data-key"))})},t}($e),rr=function(e,t,n){var r=document.createElement("a");"download"in r?(r.download=n,r.style.display="none",r.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(r),r.click(),r.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},ra=function(e){var t=g(e);rr(e,t,t.substr(0,10)+".md")},aa=function(e){e.tip.show(window.VditorI18n.generate,3800);var t=document.querySelector("#vditorExportIframe");t.contentDocument.open(),t.contentDocument.write('<link rel="stylesheet" href="'.concat(e.options.cdn,`/dist/index.css"/>
<script src="`).concat(e.options.cdn,`/dist/method.min.js"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`).concat(e.options.cdn,`",
    markdown: {
      theme: `).concat(JSON.stringify(e.options.preview.theme),`
    },
    hljs: {
      style: "`).concat(e.options.preview.hljs.style,`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`)),t.contentDocument.close(),setTimeout(function(){t.contentWindow.postMessage(g(e),"*")},200)},ia=function(e){var t=Qn(e),n='<html><head><link rel="stylesheet" type="text/css" href="'.concat(e.options.cdn,`/dist/index.css"/>
<script src="`).concat(e.options.cdn,"/dist/js/i18n/").concat(e.options.lang,`.js"><\/script>
<script src="`).concat(e.options.cdn,`/dist/method.min.js"><\/script></head>
<body><div class="vditor-reset" id="preview">`).concat(t,`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`).concat(e.options.preview.theme.current,"', '").concat(e.options.preview.theme.path,`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`).concat(JSON.stringify(e.options.preview.hljs),", previewElement, '").concat(e.options.cdn,`');
    Vditor.mathRender(previewElement, {
        cdn: '`).concat(e.options.cdn,`',
        math: `).concat(JSON.stringify(e.options.preview.math),`,
    });
    Vditor.mermaidRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.SMILESRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.markmapRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.flowchartRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.graphvizRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.chartRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.mindmapRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.abcRender(previewElement, '`).concat(e.options.cdn,`');
    `).concat(e.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"",`
    Vditor.speechRender(previewElement);
<\/script>
<script src="`).concat(e.options.cdn,"/dist/js/icons/").concat(e.options.icon,'.js"><\/script></body></html>');rr(e,n,t.substr(0,10)+".html")},oa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sa=function(e){oa(t,e);function t(n,r){var a=e.call(this,n,r)||this,s=a.element.children[0],k=document.createElement("div");return k.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow"),k.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,k.addEventListener((0,o.y3)(),function(C){var M=C.target;if(M.tagName==="BUTTON"){switch(M.getAttribute("data-type")){case"markdown":ra(n);break;case"pdf":aa(n);break;case"html":ia(n);break}x(n,["subToolbar"]),C.preventDefault(),C.stopPropagation()}}),a.element.appendChild(k),E(n,k,s,r.level),a}return t}($e),la=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ca=function(e){la(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a._bindEvent(n,r),a}return t.prototype._bindEvent=function(n,r){this.element.children[0].addEventListener((0,o.y3)(),function(a){a.preventDefault(),n.element.className.includes("vditor--fullscreen")?(r.level||(this.innerHTML=r.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(s){var k=n.toolbar.elements[s].firstChild;k&&(k.className=k.className.replace("__s","__n"),n.options.toolbar.forEach(function(C){typeof C!="string"&&C.tipPosition&&C.name===k.dataset.type&&(k.className="vditor-tooltipped vditor-tooltipped__".concat(C.tipPosition))}))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(r.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(s){var k=n.toolbar.elements[s].firstChild;k&&(k.className=k.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),r.click&&r.click(a,n),Ne(n),Je(n)})},t}($e),ua=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),da=function(e){ua(t,e);function t(n,r){var a=e.call(this,n,r)||this,s=document.createElement("div");return s.className="vditor-hint vditor-panel--arrow",s.innerHTML='<button data-tag="h1" data-value="# ">'.concat(window.VditorI18n.heading1," ").concat((0,o.fG)("&lt;⌥⌘1>"),`</button>
<button data-tag="h2" data-value="## ">`).concat(window.VditorI18n.heading2," &lt;").concat((0,o.fG)("⌥⌘2"),`></button>
<button data-tag="h3" data-value="### ">`).concat(window.VditorI18n.heading3," &lt;").concat((0,o.fG)("⌥⌘3"),`></button>
<button data-tag="h4" data-value="#### ">`).concat(window.VditorI18n.heading4," &lt;").concat((0,o.fG)("⌥⌘4"),`></button>
<button data-tag="h5" data-value="##### ">`).concat(window.VditorI18n.heading5," &lt;").concat((0,o.fG)("⌥⌘5"),`></button>
<button data-tag="h6" data-value="###### ">`).concat(window.VditorI18n.heading6," &lt;").concat((0,o.fG)("⌥⌘6"),"></button>"),a.element.appendChild(s),a._bindEvent(n,s),a}return t.prototype._bindEvent=function(n,r){var a=this.element.children[0];a.addEventListener((0,o.y3)(),function(k){k.preventDefault(),clearTimeout(n.wysiwyg.afterRenderTimeoutId),clearTimeout(n.ir.processTimeoutId),clearTimeout(n.sv.processTimeoutId),!a.classList.contains(y.Y.CLASS_MENU_DISABLED)&&(a.blur(),a.classList.contains("vditor-menu--current")?(n.currentMode==="wysiwyg"?(Mt(n),Ce(n)):n.currentMode==="ir"&&Ht(n,""),a.classList.remove("vditor-menu--current")):(x(n,["subToolbar"]),r.style.display="block"))});for(var s=0;s<6;s++)r.children.item(s).addEventListener((0,o.y3)(),function(k){k.preventDefault(),n.currentMode==="wysiwyg"?(bt(n,k.target.getAttribute("data-tag")),Ce(n),a.classList.add("vditor-menu--current")):n.currentMode==="ir"?(Ht(n,k.target.getAttribute("data-value")),a.classList.add("vditor-menu--current")):An(n,k.target.getAttribute("data-value")),r.style.display="none"})},t}($e),pa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fa=function(e){pa(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),n.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),a}return t}($e),ha=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ma=function(e){ha(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].addEventListener((0,o.y3)(),function(s){if(s.preventDefault(),!(a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)||n.currentMode==="sv")){var k=(0,I.RN)(n),C=(0,p._Y)(k.startContainer,"LI");C&&Nn(n,C,k)}}),a}return t}($e),ga=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ya=function(e){ga(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),n.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`.concat(y.g," / Lute v").concat(Lute.Version,`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`),0)}),a}return t}($e),va=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ba=function(e){va(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),!(a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)||n.currentMode==="sv")&&Dt(n,"afterend")}),a}return t}($e),wa=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xa=function(e){wa(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),!(a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)||n.currentMode==="sv")&&Dt(n,"beforebegin")}),a}return t}($e),ka=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ea=function(e){ka(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.element.children[0].addEventListener((0,o.y3)(),function(s){if(s.preventDefault(),!(a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)||n.currentMode==="sv")){var k=(0,I.RN)(n),C=(0,p._Y)(k.startContainer,"LI");C&&fn(n,C,k,C.parentElement)}}),a}return t}($e),_a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sa=function(e){_a(t,e);function t(n,r){var a=e.call(this,n,r)||this;return n.options.outline&&a.element.firstElementChild.classList.add("vditor-menu--current"),a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault();var k=n.toolbar.elements.outline.firstElementChild;k.classList.contains(y.Y.CLASS_MENU_DISABLED)||(n.options.outline.enable=!a.element.firstElementChild.classList.contains("vditor-menu--current"),n.outline.toggle(n,n.options.outline.enable))}),a}return t}($e),Ca=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ta=function(e){Ca(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a._bindEvent(n),a}return t.prototype._bindEvent=function(n){var r=this;this.element.children[0].addEventListener((0,o.y3)(),function(a){a.preventDefault();var s=r.element.firstElementChild;if(!s.classList.contains(y.Y.CLASS_MENU_DISABLED)){var k=y.Y.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);s.classList.contains("vditor-menu--current")?(s.classList.remove("vditor-menu--current"),n.currentMode==="sv"?(n.sv.element.style.display="block",n.options.preview.mode==="both"?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),h(n.toolbar.elements,k),n.outline.render(n)):(d(n.toolbar.elements,k),n.preview.element.style.display="block",n.currentMode==="sv"?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),s.classList.add("vditor-menu--current"),x(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),Ne(n)}})},t}($e),Ma=function(){function e(t){this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var n;if(typeof AudioContext<"u")n=new AudioContext;else if(webkitAudioContext)n=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=n.sampleRate;var r=n.createGain(),a=n.createMediaStreamSource(t);a.connect(r),this.recorder=n.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,r.connect(this.recorder),this.recorder.connect(n.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,n){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(n)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),n=this.mergeBuffers(this.rightChannel),r=new Float32Array(t.length),a=0;a<t.length;++a)r[a]=.5*(t[a]+n[a]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(r=this.downSampleBuffer(r,this.SAMPLE_RATE));var s=44+r.length*2,k=new ArrayBuffer(s),C=new DataView(k);this.writeUTFBytes(C,0,"RIFF"),C.setUint32(4,s,!0),this.writeUTFBytes(C,8,"WAVE"),this.writeUTFBytes(C,12,"fmt "),C.setUint32(16,16,!0),C.setUint16(20,1,!0),C.setUint16(22,1,!0),C.setUint32(24,this.SAMPLE_RATE,!0),C.setUint32(28,this.SAMPLE_RATE*2,!0),C.setUint16(32,2,!0),C.setUint16(34,16,!0);var M=r.length*2;this.writeUTFBytes(C,36,"data"),C.setUint32(40,M,!0);for(var T=r.length,D=44,V=1,te=0;te<T;te++)C.setInt16(D,r[te]*(32767*V),!0),D+=2;return new Blob([C],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,n){if(n===this.DEFAULT_SAMPLE_RATE||n>this.DEFAULT_SAMPLE_RATE)return t;for(var r=this.DEFAULT_SAMPLE_RATE/n,a=Math.round(t.length/r),s=new Float32Array(a),k=0,C=0;k<s.length;){for(var M=Math.round((k+1)*r),T=0,D=0,V=C;V<M&&V<t.length;V++)T+=t[V],D++;s[k]=T/D,k++,C=M}return s},e.prototype.mergeBuffers=function(t){for(var n=new Float32Array(this.recordingLength),r=0,a=t.length,s=0;s<a;++s){var k=t[s];n.set(k,r),r+=k.length}return n},e.prototype.writeUTFBytes=function(t,n,r){for(var a=r.length,s=0;s<a;s++)t.setUint8(n+s,r.charCodeAt(s))},e}(),La=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aa=function(e){La(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a._bindEvent(n),a}return t.prototype._bindEvent=function(n){var r=this,a;this.element.children[0].addEventListener((0,o.y3)(),function(s){if(s.preventDefault(),!r.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)){var k=n[n.currentMode].element;if(!a){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(M){a=new Ma(M),a.recorder.onaudioprocess=function(T){if(a.isRecording){var D=T.inputBuffer.getChannelData(0),V=T.inputBuffer.getChannelData(1);a.cloneChannelData(D,V)}},a.startRecordingNewWavFile(),n.tip.show(window.VditorI18n.recording),k.setAttribute("contenteditable","false"),r.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(window.VditorI18n["record-tip"])});return}if(a.isRecording){a.stopRecording(),n.tip.hide();var C=new File([a.buildWavFileBlob()],"record".concat(new Date().getTime(),".wav"),{type:"video/webm"});pn(n,[C]),r.element.children[0].classList.remove("vditor-menu--current")}else n.tip.show(window.VditorI18n.recording),k.setAttribute("contenteditable","false"),a.startRecordingNewWavFile(),r.element.children[0].classList.add("vditor-menu--current")}})},t}($e),Da=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ja=function(e){Da(t,e);function t(n,r){var a=e.call(this,n,r)||this;return d({redo:a.element},["redo"]),a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),!a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)&&n.undo.redo(n)}),a}return t}($e),Ha=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oa=function(e){Ha(t,e);function t(n,r){var a=e.call(this,n,r)||this;return d({undo:a.element},["undo"]),a.element.children[0].addEventListener((0,o.y3)(),function(s){s.preventDefault(),!a.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)&&n.undo.undo(n)}),a}return t}($e),Ia=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ra=function(e){Ia(t,e);function t(n,r){var a=e.call(this,n,r)||this,s='<input type="file"';return n.options.upload.multiple&&(s+=' multiple="multiple"'),n.options.upload.accept&&(s+=' accept="'.concat(n.options.upload.accept,'"')),a.element.children[0].innerHTML="".concat(r.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>').concat(s,">"),a._bindEvent(n),a}return t.prototype._bindEvent=function(n){var r=this;this.element.children[0].addEventListener((0,o.y3)(),function(a){if(r.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)){a.stopPropagation(),a.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function(a){if(r.element.firstElementChild.classList.contains(y.Y.CLASS_MENU_DISABLED)){a.stopPropagation(),a.preventDefault();return}a.target.files.length!==0&&pn(n,a.target.files,a.target)})},t}($e),Na=function(){function e(t){var n=this,r=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",r.toolbar.forEach(function(a,s){var k=n.genItem(t,a,s);if(n.element.appendChild(k),a.toolbar){var C=document.createElement("div");C.className="vditor-hint vditor-panel--arrow",C.addEventListener((0,o.y3)(),function(M){C.style.display="none"}),a.toolbar.forEach(function(M,T){M.level=2,C.appendChild(n.genItem(t,M,s+T))}),k.appendChild(C),E(t,C,k.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new Zr(t),this.element.appendChild(t.counter.element))}return e.prototype.updateConfig=function(t,n){t.options.toolbarConfig=Object.assign({hide:!1,pin:!1},n),t.options.toolbarConfig.hide?this.element.classList.add("vditor-toolbar--hide"):this.element.classList.remove("vditor-toolbar--hide"),t.options.toolbarConfig.pin?this.element.classList.add("vditor-toolbar--pin"):this.element.classList.remove("vditor-toolbar--pin")},e.prototype.genItem=function(t,n,r){var a;switch(n.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":a=new $e(t,n);break;case"emoji":a=new na(t,n);break;case"headings":a=new da(t,n);break;case"|":a=new ea;break;case"br":a=new Yr;break;case"undo":a=new Oa(t,n);break;case"redo":a=new ja(t,n);break;case"help":a=new fa(t,n);break;case"both":a=new zr(t,n);break;case"preview":a=new Ta(t,n);break;case"fullscreen":a=new ca(t,n);break;case"upload":a=new Ra(t,n);break;case"record":a=new Aa(t,n);break;case"info":a=new ya(t,n);break;case"edit-mode":a=new vr(t,n);break;case"devtools":a=new Qr(t,n);break;case"outdent":a=new Ea(t,n);break;case"indent":a=new ma(t,n);break;case"outline":a=new Sa(t,n);break;case"insert-after":a=new ba(t,n);break;case"insert-before":a=new xa(t,n);break;case"code-theme":a=new qr(t,n);break;case"content-theme":a=new Kr(t,n);break;case"export":a=new sa(t,n);break;default:a=new Xr(t,n);break}if(a){var s=n.name;return(s==="br"||s==="|")&&(s=s+r),this.elements[s]=a.element,a.element}},e}(),$a=v(192),Pa=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new $a}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?h(t.toolbar.elements,["undo"]):d(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?h(t.toolbar.elements,["redo"]):d(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var n=this[t.currentMode].undoStack.pop();n&&(this[t.currentMode].redoStack.push(n),this.renderDiff(n,t),this[t.currentMode].hasUndo=!0,x(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var n=this[t.currentMode].redoStack.pop();n&&(this[t.currentMode].undoStack.push(n),this.renderDiff(n,t,!0))}},e.prototype.recordFirstPosition=function(t,n){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0)&&!((0,o.gm)()&&n.key==="Backspace")&&!(0,o.nr)()){var r=this.addCaret(t);r.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=r,this[t.currentMode].lastText=r)}},e.prototype.addToUndoStack=function(t){var n=this.addCaret(t,!0),r=this.dmp.diff_main(n,this[t.currentMode].lastText,!0),a=this.dmp.patch_make(n,this[t.currentMode].lastText,r);a.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=n,this[t.currentMode].undoStack.push(a),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,d(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&h(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,n,r){r===void 0&&(r=!1);var a;if(r){var s=this.dmp.patch_deepCopy(t).reverse();s.forEach(function(C){C.diffs.forEach(function(M){M[0]=-M[0]})}),a=this.dmp.patch_apply(s,this[n.currentMode].lastText)[0]}else a=this.dmp.patch_apply(t,this[n.currentMode].lastText)[0];if(this[n.currentMode].lastText=a,n[n.currentMode].element.innerHTML=a,n.currentMode!=="sv"&&(n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview")).forEach(function(C){C.parentElement.querySelector(".language-echarts")&&(n.currentMode==="ir"?C.parentElement.outerHTML=n.lute.SpinVditorIRDOM(C.parentElement.outerHTML):C.parentElement.outerHTML=n.lute.SpinVditorDOM(C.parentElement.outerHTML))}),n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(C){fe(C,n)})),n[n.currentMode].element.querySelector("wbr"))(0,I.ir)(n[n.currentMode].element,n[n.currentMode].element.ownerDocument.createRange()),Pe(n);else{var k=getSelection().getRangeAt(0);k.setEndBefore(n[n.currentMode].element),k.collapse(!1)}ke(n),we(n,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),kt(n),n[n.currentMode].element.querySelectorAll(".vditor-".concat(n.currentMode,"__preview[data-render='2']")).forEach(function(C){fe(C,n)}),this[n.currentMode].undoStack.length>1?h(n.toolbar.elements,["undo"]):d(n.toolbar.elements,["undo"]),this[n.currentMode].redoStack.length!==0?h(n.toolbar.elements,["redo"]):d(n.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,n){n===void 0&&(n=!1);var r;if(getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var a=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(a.startContainer)){r=a.cloneRange();var s=document.createElement("span");s.className="vditor-wbr",a.insertNode(s)}}var k=t[t.currentMode].element.cloneNode(!0);k.querySelectorAll(".vditor-".concat(t.currentMode,"__preview[data-render='1']")).forEach(function(M){M.firstElementChild&&(M.firstElementChild.classList.contains("language-echarts")||M.firstElementChild.classList.contains("language-plantuml")||M.firstElementChild.classList.contains("language-mindmap")?(M.firstElementChild.removeAttribute("_echarts_instance_"),M.firstElementChild.removeAttribute("data-processed"),M.firstElementChild.innerHTML=M.previousElementSibling.firstElementChild.innerHTML,M.setAttribute("data-render","2")):M.firstElementChild.classList.contains("language-math")&&(M.setAttribute("data-render","2"),M.firstElementChild.textContent=M.firstElementChild.getAttribute("data-math"),M.firstElementChild.removeAttribute("data-math")))});var C=k.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(M){M.remove()}),n&&r&&(0,I.jl)(r),C.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),Va=v(905),Ba=function(){function e(t){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:y.Y.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:"".concat(y.Y.CDN,"/dist/images/emoji"),extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:y.Y.HLJS_OPTIONS,markdown:y.Y.MARKDOWN_OPTIONS,math:y.Y.MATH_OPTIONS,maxWidth:800,mode:"both",theme:y.Y.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(n){return n.replace(/\W/g,"")},linkToImgUrl:"",max:10*1024*1024,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,n,r,a,s,k,C,M,T;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((n=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||n===void 0)&&n.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((s=(a=(r=this.options.preview)===null||r===void 0?void 0:r.render)===null||a===void 0?void 0:a.media)===null||s===void 0)&&s.enable&&(this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable),!((k=this.options.hint)===null||k===void 0)&&k.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment),this.options.cdn&&(!((M=(C=this.options.preview)===null||C===void 0?void 0:C.theme)===null||M===void 0)&&M.path||(this.defaultOptions.preview.theme.path="".concat(this.options.cdn,"/dist/css/content-theme")),!((T=this.options.hint)===null||T===void 0)&&T.emojiPath||(this.defaultOptions.hint.emojiPath="".concat(this.options.cdn,"/dist/images/emoji"))));var D=(0,Va.h)(this.defaultOptions,this.options);if(D.cache.enable&&!D.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return D},e.prototype.mergeToolbar=function(t){var n=this,r=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],a=[];return t.forEach(function(s){var k=s;r.forEach(function(C){typeof s=="string"&&C.name===s&&(k=C),typeof s=="object"&&C.name===s.name&&(k=Object.assign({},C,s))}),s.toolbar&&(k.toolbar=n.mergeToolbar(s.toolbar)),a.push(k)}),a},e}(),Fa=function(){function e(t){var n=this;this.composingLock=!1,this.commentIds=[];var r=document.createElement("div");r.className="vditor-wysiwyg",r.innerHTML='<pre class="vditor-reset" placeholder="'.concat(t.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`).concat(window.VditorI18n.comment,`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`),this.element=r.firstElementChild,this.popover=r.firstElementChild.nextElementSibling,this.selectPopover=r.lastElementChild,this.bindEvent(t),rn(t,this.element),Mn(t,this.element),an(t,this.element),cn(t,this.element),un(t,this.element),on(t,this.element),sn(t,this.element,this.copy),ln(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var a=Lute.NewNodeID(),s=getSelection().getRangeAt(0),k=s.cloneRange(),C=s.extractContents(),M,T,D=!1,V=!1;C.childNodes.forEach(function(Q,de){var ae=!1;if(Q.nodeType===3?ae=!0:Q.classList.contains("vditor-comment")?Q.classList.contains("vditor-comment")&&Q.setAttribute("data-cmtids",Q.getAttribute("data-cmtids")+" "+a):ae=!0,ae)if(Q.nodeType!==3&&Q.getAttribute("data-block")==="0"&&de===0&&k.startOffset>0)Q.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(Q.innerHTML,"</span>"),M=Q;else if(Q.nodeType!==3&&Q.getAttribute("data-block")==="0"&&de===C.childNodes.length-1&&k.endOffset<k.endContainer.textContent.length)Q.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(Q.innerHTML,"</span>"),T=Q;else if(Q.nodeType!==3&&Q.getAttribute("data-block")==="0")de===0?D=!0:de===C.childNodes.length-1&&(V=!0),Q.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(Q.innerHTML,"</span>");else{var J=document.createElement("span");J.classList.add("vditor-comment"),J.setAttribute("data-cmtids",a),Q.parentNode.insertBefore(J,Q),J.appendChild(Q)}});var te=(0,p.pt)(k.startContainer);te&&(M?(te.insertAdjacentHTML("beforeend",M.innerHTML),M.remove()):te.textContent.trim().replace(y.Y.ZWSP,"")===""&&D&&te.remove());var ee=(0,p.pt)(k.endContainer);ee&&(T?(ee.insertAdjacentHTML("afterbegin",T.innerHTML),T.remove()):ee.textContent.trim().replace(y.Y.ZWSP,"")===""&&V&&ee.remove()),s.insertNode(C),t.options.comment.add(a,s.toString(),n.getComments(t,!0)),Ce(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.hideComment()})}return e.prototype.getComments=function(t,n){var r=this;if(n===void 0&&(n=!1),t.currentMode==="wysiwyg"&&t.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(s){r.commentIds=r.commentIds.concat(s.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var a=[];if(n)return this.commentIds.forEach(function(s){a.push({id:s,top:r.element.querySelector('.vditor-comment[data-cmtids="'.concat(s,'"]')).offsetTop})}),a}else return[]},e.prototype.triggerRemoveComment=function(t){var n=function(s,k){var C=new Set(k);return s.filter(function(M){return!C.has(M)})};if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var r=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var a=n(r,this.commentIds);a.length>0&&t.options.comment.remove(a)}},e.prototype.showComment=function(){var t=(0,I.Ey)(this.element);this.selectPopover.setAttribute("style","left:".concat(t.left,"px;display:block;top:").concat(Math.max(-8,t.top-21),"px"))},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},e.prototype.copy=function(t,n){var r=getSelection().getRangeAt(0);if(r.toString()!==""){t.stopPropagation(),t.preventDefault();var a=(0,p._Y)(r.startContainer,"CODE"),s=(0,p._Y)(r.endContainer,"CODE");if(a&&s&&s.isSameNode(a)){var k="";a.parentElement.tagName==="PRE"?k=r.toString():k="`"+r.toString()+"`",t.clipboardData.setData("text/plain",k),t.clipboardData.setData("text/html","");return}var C=(0,p._Y)(r.startContainer,"A"),M=(0,p._Y)(r.endContainer,"A");if(C&&M&&M.isSameNode(C)){var T=C.getAttribute("title")||"";T&&(T=' "'.concat(T,'"')),t.clipboardData.setData("text/plain","[".concat(r.toString(),"](").concat(C.getAttribute("href")).concat(T,")")),t.clipboardData.setData("text/html","");return}var D=document.createElement("div");D.appendChild(r.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorDOM2Md(D.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(x(t,["hint"]),!(n.popover.style.display!=="block"||n.selectPopover.style.display!=="block")){var r=parseInt(n.popover.getAttribute("data-top"),10);if(t.options.height!=="auto"){if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var a=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(r-t.wysiwyg.element.scrollTop,n.element.clientHeight-21))+"px";n.popover.style.display==="block"&&(n.popover.style.top=a),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=a)}return}else if(!t.options.toolbarConfig.pin)return;var s=Math.max(r,window.scrollY-t.element.offsetTop-8)+"px";n.popover.style.display==="block"&&(n.popover.style.top=s),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=s)}}),this.element.addEventListener("scroll",function(){if(x(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),n.popover.style.display==="block"){var r=parseInt(n.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,a=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(a=window.scrollY-t.element.offsetTop+a);var s=Math.max(a,Math.min(r,n.element.clientHeight-21))+"px";n.popover.style.top=s,n.selectPopover.style.top=s}}),this.element.addEventListener("paste",function(r){Ut(t,r,{pasteCode:function(a){var s=(0,I.RN)(t),k=document.createElement("template");k.innerHTML=a,s.insertNode(k.content.cloneNode(!0));var C=(0,p.Th)(s.startContainer,"data-block","0");C?C.outerHTML=t.lute.SpinVditorDOM(C.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),(0,I.ir)(t.wysiwyg.element,s)}})}),this.element.addEventListener("compositionstart",function(){n.composingLock=!0}),this.element.addEventListener("compositionend",function(r){var a=(0,L.c)(getSelection().getRangeAt(0).startContainer);if(a&&a.textContent===""){ke(t);return}(0,o.gm)()||Bt(t,getSelection().getRangeAt(0).cloneRange(),r),n.composingLock=!1}),this.element.addEventListener("input",function(r){if(!(r.inputType==="deleteByDrag"||r.inputType==="insertFromDrop")){if(n.preventInput){n.preventInput=!1,Ce(t);return}if(n.composingLock||r.data==="‘"||r.data==="“"||r.data==="《"){Ce(t);return}var a=getSelection().getRangeAt(0),s=(0,p.pt)(a.startContainer);if(s||(Tt(t,a),s=(0,p.pt)(a.startContainer)),!!s){for(var k=(0,I.ED)(s,t.wysiwyg.element,a).start,C=!0,M=k-1;M>s.textContent.substr(0,k).lastIndexOf(`
`);M--)if(s.textContent.charAt(M)!==" "&&s.textContent.charAt(M)!=="	"){C=!1;break}k===0&&(C=!1);for(var T=!0,M=k-1;M<s.textContent.length;M++)if(s.textContent.charAt(M)!==" "&&s.textContent.charAt(M)!==`
`){T=!1;break}T&&/^#{1,6} $/.test(s.textContent)&&(T=!1);var D=(0,L.c)(getSelection().getRangeAt(0).startContainer);if(D&&D.textContent===""&&(ke(t),D.remove()),C&&s.getAttribute("data-type")!=="code-block"||T||mn(s.innerHTML)||hn(s.innerHTML)&&s.previousElementSibling){typeof t.options.input=="function"&&t.options.input(g(t));return}r.inputType==="insertParagraph"&&n.element.innerHTML==="<p><br></p><p><br></p>"&&s.previousElementSibling.remove(),Bt(t,a,r)}}}),this.element.addEventListener("click",function(r){if(r.target.tagName==="INPUT"){var a=r.target;a.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),n.preventInput=!0,getSelection().rangeCount>0&&(0,I.jl)(getSelection().getRangeAt(0)),Ce(t);return}if(r.target.tagName==="IMG"&&!r.target.parentElement.classList.contains("vditor-wysiwyg__preview")){r.target.getAttribute("data-type")==="link-ref"?be(t,r.target):hr(r,t);return}var s=(0,p._Y)(r.target,"A");if(s){t.options.link.click?t.options.link.click(s):t.options.link.isOpen&&window.open(s.getAttribute("href")),r.preventDefault();return}var k=(0,I.RN)(t);if(r.target.isEqualNode(n.element)&&n.element.lastElementChild&&k.collapsed){var C=n.element.lastElementChild.getBoundingClientRect();r.y>C.top+C.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(y.Y.ZWSP,"")===""?(k.selectNodeContents(n.element.lastElementChild),k.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(y.Y.ZWSP,"<wbr></p>")),(0,I.ir)(n.element,k)))}st(t);var M=(0,p.KJ)(r.target,"vditor-wysiwyg__preview");M||(M=(0,p.KJ)((0,I.RN)(t).startContainer,"vditor-wysiwyg__preview")),M&&gt(M,t),Ee(r,t)}),this.element.addEventListener("keyup",function(r){if(!(r.isComposing||(0,o._0)(r))){r.key==="Enter"&&Pe(t),(r.key==="Backspace"||r.key==="Delete")&&t.wysiwyg.element.innerHTML!==""&&t.wysiwyg.element.childNodes.length===1&&t.wysiwyg.element.firstElementChild&&t.wysiwyg.element.firstElementChild.tagName==="P"&&t.wysiwyg.element.firstElementChild.childElementCount===0&&(t.wysiwyg.element.textContent===""||t.wysiwyg.element.textContent===`
`)&&(t.wysiwyg.element.innerHTML="");var a=(0,I.RN)(t);if(r.key==="Backspace"&&(0,o.gm)()&&a.startContainer.textContent===`
`&&a.startOffset===1&&(a.startContainer.textContent=""),Tt(t,a),st(t),!(r.key!=="ArrowDown"&&r.key!=="ArrowRight"&&r.key!=="Backspace"&&r.key!=="ArrowLeft"&&r.key!=="ArrowUp")){(r.key==="ArrowLeft"||r.key==="ArrowRight")&&t.hint.render(t);var s=(0,p.KJ)(a.startContainer,"vditor-wysiwyg__preview");if(!s&&a.startContainer.nodeType!==3&&a.startOffset>0){var k=a.startContainer;k.classList.contains("vditor-wysiwyg__block")&&(s=k.lastElementChild)}if(s){var C=s.previousElementSibling;if(C.style.display==="none"){r.key==="ArrowDown"||r.key==="ArrowRight"?gt(s,t):gt(s,t,!1);return}var M=s.previousElementSibling;if(M.tagName==="PRE"&&(M=M.firstElementChild),r.key==="ArrowDown"||r.key==="ArrowRight"){var k=s.parentElement,T=Qt(k);if(T&&T.nodeType!==3){var D=T.querySelector(".vditor-wysiwyg__preview");if(D){gt(D,t);return}}if(T.nodeType===3){for(;T.textContent.length===0&&T.nextSibling;)T=T.nextSibling;a.setStart(T,1)}else a.setStart(T.firstChild,0)}else a.selectNodeContents(M),a.collapse(!1)}}}})},e}(),za=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ya=function(e){za(t,e);function t(n,r){var a=e.call(this)||this;if(a.version=y.g,typeof n=="string"){if(r?r.cache?r.cache.id||(r.cache.id="vditor".concat(n)):r.cache={id:"vditor".concat(n)}:r={cache:{id:"vditor".concat(n)}},!document.getElementById(n))return a.showErrorTip("Failed to get element by id: ".concat(n)),a;n=document.getElementById(n)}var s=new Ba(r),k=s.merge();if(k.i18n)window.VditorI18n=k.i18n,a.init(n,k);else if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(k.lang)){var C="vditorI18nScript",M=C+k.lang;document.querySelectorAll('head script[id^="'.concat(C,'"]')).forEach(function(T){T.id!==M&&document.head.removeChild(T)}),(0,w.Z)("".concat(k.cdn,"/dist/js/i18n/").concat(k.lang,".js"),M).then(function(){a.init(n,k)}).catch(function(T){a.showErrorTip("GET ".concat(k.cdn,"/dist/js/i18n/").concat(k.lang,".js net::ERR_ABORTED 404 (Not Found)"))})}else throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return a}return t.prototype.showErrorTip=function(n){var r=new tr;document.body.appendChild(r.element),r.show(n,0)},t.prototype.updateToolbarConfig=function(n){this.vditor.toolbar.updateConfig(this.vditor,n)},t.prototype.setTheme=function(n,r,a,s){this.vditor.options.theme=n,le(this.vditor),r&&(this.vditor.options.preview.theme.current=r,(0,pe.H)(r,s||this.vditor.options.preview.theme.path)),a&&(this.vditor.options.preview.hljs.style=a,(0,nr.h)(a,this.vditor.options.cdn))},t.prototype.getValue=function(){return g(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){x(this.vditor,["subToolbar","hint","popover"]),d(this.vditor.toolbar.elements,y.Y.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){h(this.vditor.toolbar.elements,y.Y.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return At(this.vditor.wysiwyg.element);if(this.vditor.currentMode==="sv")return At(this.vditor.sv.element);if(this.vditor.currentMode==="ir")return At(this.vditor.ir.element)},t.prototype.renderPreview=function(n){this.vditor.preview.render(this.vditor,n)},t.prototype.getCursorPosition=function(){return(0,I.Ey)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){this.vditor.options.cache.enable&&(0,o.D)()&&localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(n){return this.vditor.lute.HTML2Md(n)},t.prototype.exportJSON=function(n){return this.vditor.lute.RenderJSON(n)},t.prototype.getHTML=function(){return Qn(this.vditor)},t.prototype.tip=function(n,r){this.vditor.tip.show(n,r)},t.prototype.setPreviewMode=function(n){yn(n,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(n){document.execCommand("insertHTML",!1,n)},t.prototype.insertValue=function(n,r){r===void 0&&(r=!0);var a=(0,I.RN)(this.vditor);a.collapse(!0);var s=document.createElement("template");s.innerHTML=n,a.insertNode(s.content.cloneNode(!0)),a.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,r&&ve(this.vditor)):this.vditor.currentMode==="wysiwyg"?r&&Bt(this.vditor,getSelection().getRangeAt(0)):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,r&&Ie(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.insertMD=function(n){this.vditor.currentMode==="ir"?(0,I.Z2)(this.vditor.lute.Md2VditorIRDOM(n),this.vditor):this.vditor.currentMode==="wysiwyg"?(0,I.Z2)(this.vditor.lute.Md2VditorDOM(n),this.vditor):dn(this.vditor,n),this.vditor.outline.render(this.vditor),we(this.vditor)},t.prototype.setValue=function(n,r){var a=this;r===void 0&&(r=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>".concat(this.vditor.lute.SpinVditorSVDOM(n),"</div>"),Be(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?Tn(this.vditor,n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(n),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(s){fe(s,a.vditor)}),lt(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),n||(x(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),r&&this.clearStack()},t.prototype.insertEmptyBlock=function(n){Dt(this.vditor,n)},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var n=document.getElementById("vditorIconScript");n&&n.remove(),this.clearCache(),Qe(),this.vditor.wysiwyg.unbindListener()},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var r=function(a){a.classList.remove("vditor-comment--hover"),n.forEach(function(s){a.getAttribute("data-cmtids").indexOf(s)>-1&&a.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)})}},t.prototype.unHlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var r=function(a){n.forEach(function(s){a.getAttribute("data-cmtids").indexOf(s)>-1&&a.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)})}},t.prototype.removeCommentIds=function(n){var r=this;if(this.vditor.currentMode==="wysiwyg"){var a=function(s,k){var C=s.getAttribute("data-cmtids").split(" ");C.find(function(M,T){if(M===k)return C.splice(T,1),!0}),C.length===0?(s.outerHTML=s.innerHTML,(0,I.RN)(r.vditor).collapse(!0)):s.setAttribute("data-cmtids",C.join(" "))};n.forEach(function(s){r.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(k){a(k,s)}),r.vditor.preview.element.style.display!=="none"&&r.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(k){a(k,s)})}),Ce(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.init=function(n,r){var a=this;this.vditor={currentMode:r.mode,element:n,hint:new Or(r.hint.extend),lute:void 0,options:r,originalInnerHTML:n.innerHTML,outline:new Nr(window.VditorI18n.outline),tip:new tr},this.vditor.sv=new Br(this.vditor),this.vditor.undo=new Pa,this.vditor.wysiwyg=new Fa(this.vditor),this.vditor.ir=new Ir(this.vditor),this.vditor.toolbar=new Na(this.vditor),r.resize.enable&&(this.vditor.resize=new Vr(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new i),(r.upload.url||r.upload.handler)&&(this.vditor.upload=new Er),(0,w.Z)(r._lutePath||"".concat(r.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){a.vditor.lute=(0,Rr.X)({autoSpace:a.vditor.options.preview.markdown.autoSpace,gfmAutoLink:a.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:a.vditor.options.preview.markdown.codeBlockPreview,emojiSite:a.vditor.options.hint.emojiPath,emojis:a.vditor.options.hint.emoji,fixTermTypo:a.vditor.options.preview.markdown.fixTermTypo,footnotes:a.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:a.vditor.options.preview.math.inlineDigit,linkBase:a.vditor.options.preview.markdown.linkBase,linkPrefix:a.vditor.options.preview.markdown.linkPrefix,listStyle:a.vditor.options.preview.markdown.listStyle,mark:a.vditor.options.preview.markdown.mark,mathBlockPreview:a.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:a.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:a.vditor.options.preview.markdown.sanitize,toc:a.vditor.options.preview.markdown.toc}),a.vditor.preview=new Pr(a.vditor),ze(a.vditor),r.after&&r.after(),r.icon&&(0,w.U)("".concat(r.cdn,"/dist/js/icons/").concat(r.icon,".js"),"vditorIconScript")})},t}(m.default);const Ua=Ya})(),f=f.default,f})())}(Zt)),Zt.exports}var ai=ri();const Cn=Sn(ai),ii={name:"VditorComponents",props:{idname:{type:String,default:"Vditor"},placeholder:{type:String,default:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"},uploadurl:{type:String,default:"http://127.0.0.1:8080/uploads/file"},markdown:{type:String,default:""},cache:{type:Boolean,default:!1},cacheid:{type:String,default:"Vditor"},height:{type:Number,default:500},hide:{type:Boolean,default:!1},uploadsize:{type:Number,default:20*1024*1024}},data(){return{idName:this.idname,cacheId:this.cacheid,cacheEnable:this.cache,markdownStr:this.markdown,maxHeight:this.height,hideBar:this.hide,contentEditor:null,defaultPlaceholder:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。",emojis:{0:"😀",1:"😁",2:"😂",3:"😃",4:"😄",5:"😅",6:"😆",7:"😉",8:"😊",9:"😋",10:"😎",11:"😍",12:"😘",13:"😗",14:"😙",15:"😚",16:"☺",17:"😇",18:"😐",19:"😑",20:"😶",21:"😏",22:"😣",23:"😥",24:"😮",25:"😯",26:"😪",27:"😫",28:"😴",29:"😌",30:"😛",31:"😜",32:"😝",33:"😒",34:"😓",35:"😔",36:"😕",37:"😲",38:"😷",39:"😖",40:"😞",41:"😟",42:"😤",43:"😢",44:"😭",45:"😦",46:"😧",47:"😨",48:"😬",49:"😰",50:"😱",51:"😳",52:"😵",53:"😡",54:"😠",doge:"/emoji/doge.png",huaji:"/emoji/huaji.gif",trollface:"/emoji/trollface.png","+1":"👍","-1":"👎",heart:"❤"}}},mounted(){this.contentEditor=new Cn(this.idName,{toolbarConfig:{pin:!1,hide:this.hideBar},toolbar:["emoji","headings","bold","italic","strike","|","line","quote","list","edit-mode",{name:"more",toolbar:["insert-after","fullscreen","info","help"]}],height:this.maxHeight,hint:{emojiPath:"/emoji",emoji:this.emojis},cache:{enable:this.cacheEnable,id:this.cacheId},placeholder:this.placeholder,after:()=>{this.contentEditor.setValue(this.markdownStr),this.$emit("after",!0)},blur:ne=>{this.$emit("vditor-input",this.contentEditor.getValue())}})},methods:{setTextValue(ne){this.contentEditor.setValue(ne)},call(ne){console.log(ne)}}},oi=["id"];function si(ne,X,b,H,v,f){return je(),it("div",{id:v.idName},null,8,oi)}const li=ut(ii,[["render",si]]),ci={name:"ShowMarkdown",props:{markdown:{type:String,default:""},speech:{type:Boolean,default:!1},anchor:{type:Number,default:1}},data(){return{markdownText:this.markdown,speechValue:this.speech,anchorNum:this.anchor}},mounted(){this.previevMarkdown()},updated(){},methods:{previevMarkdown(){Cn.preview(this.$refs.markdownView,this.markdownText,{speech:{enable:this.speech},emojiPath:"/emoji",anchor:this.anchorNum})}}},ui={ref:"markdownView"};function di(ne,X,b,H,v,f){return je(),it("div",null,[Le("div",ui,null,512)])}const fr=ut(ci,[["render",di]]),pi={components:{ShowMarkdown:fr},props:{comment:{type:Object,default:null},father:{type:Object,default:null}},data(){var ne;return{TimeUtil:xn,content:"",showMessage:!1,message:"",likeCount:((ne=this.comment)==null?void 0:ne.likeCount)||0}},created(){},mounted(){},methods:{parserUa(){const ne=new pr(this.comment.ua);return`${ne.getOS().name} ${ne.getBrowser().name}`},setComment(){this.$emit("comment",this.comment)},like(){const ne={targetId:this.comment.id,targetType:1,type:0};this.httpPost("/click/like",ne,X=>{X.status===200?(this.message="点赞成功",this.likeCount+=1,this.showMessage=!0):(this.message=X.message,this.showMessage=!0)})}}},fi={class:"d-flex align-center"},hi={class:"text-subtitle-2 font-weight-medium"},mi={class:"text-caption text-grey"},gi={key:0,class:"text-body-2 text-primary mb-1"},yi={class:"d-flex justify-end align-center"},vi={class:"text-body-2 mr-4"},bi={class:"text-body-2"};function wi(ne,X,b,H,v,f){const m=ie("v-img"),y=ie("v-avatar"),u=ie("router-link"),g=ie("v-col"),w=ie("v-chip"),i=ie("v-spacer"),o=ie("v-row"),c=ie("ShowMarkdown"),l=ie("v-btn"),h=ie("v-tooltip"),d=ie("v-divider"),_=ie("v-snackbar"),S=ie("v-card");return je(),Ue(S,{variant:"flat",class:"pa-3 my-2",color:"grey-lighten-4"},{default:W(()=>[U(o,null,{default:W(()=>[U(g,{cols:"12",class:"pb-0"},{default:W(()=>[U(o,{"no-gutters":""},{default:W(()=>[U(g,{cols:"auto"},{default:W(()=>[U(u,{to:`/user/${b.comment.userId}`},{default:W(()=>[U(y,{size:"32",class:"mr-3"},{default:W(()=>[U(m,{src:b.comment.avatarUrl},null,8,["src"])]),_:1})]),_:1},8,["to"])]),_:1}),U(g,null,{default:W(()=>[Le("div",fi,[U(u,{to:`/user/${b.comment.userId}`,class:"text-decoration-none"},{default:W(()=>[Le("span",hi,Me(b.comment.username),1)]),_:1},8,["to"]),U(w,{class:"ml-2",color:"primary",size:"x-small","text-color":"white"},{default:W(()=>[_e(Me(f.parserUa()),1)]),_:1}),U(i),Le("span",mi,Me(v.TimeUtil.renderTime(b.comment.createTime)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),U(o,null,{default:W(()=>[U(g,{class:"pl-12 py-2"},{default:W(()=>[b.comment.parentCommentId!=b.father.id?(je(),it("div",gi,[X[3]||(X[3]=_e(" 回复 ")),U(u,{to:`/user/${b.comment.parentUserId}`,class:"text-decoration-none",target:"_blank"},{default:W(()=>[_e(" @"+Me(b.comment.username)+": ",1)]),_:1},8,["to"])])):ht("",!0),U(c,{markdown:b.comment.comment,anchor:0},null,8,["markdown"])]),_:1})]),_:1}),U(o,null,{default:W(()=>[U(g,null,{default:W(()=>[Le("div",yi,[U(h,{text:"评论",location:"top"},{activator:W(({props:x})=>[U(l,Gt(x,{variant:"text",color:"indigo",onClick:f.setComment,icon:"mdi-comment",size:"small",class:"mr-1"}),null,16,["onClick"])]),_:1}),Le("span",vi,Me(b.comment.commentCount),1),U(h,{text:"赞",location:"top"},{activator:W(({props:x})=>[U(l,Gt(x,{size:"small",variant:"text",color:"primary",onClick:X[0]||(X[0]=E=>f.like()),icon:"mdi-thumb-up",class:"mr-1"}),null,16)]),_:1}),Le("span",bi,Me(v.likeCount),1)])]),_:1})]),_:1}),U(d,{class:"mt-2"}),U(_,{modelValue:v.showMessage,"onUpdate:modelValue":X[2]||(X[2]=x=>v.showMessage=x),location:"top",timeout:3e3},{actions:W(()=>[U(l,{color:"pink",variant:"text",onClick:X[1]||(X[1]=x=>v.showMessage=!1)},{default:W(()=>X[4]||(X[4]=[_e("关闭")])),_:1})]),default:W(()=>[_e(Me(v.message)+" ",1)]),_:1},8,["modelValue"])]),_:1})}const xi=ut(pi,[["render",wi]]),ki={props:{placeholder:{type:String,default:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。"},uploadurl:{type:String,default:"http://127.0.0.1:8080/uploads/file"},idname:{type:String,default:"two-comment-vditor"}},data(){return{idName:this.idname,defaultPlaceholder:"请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。",emojis:{0:"😀",1:"😁",2:"😂",3:"😃",4:"😄",5:"😅",6:"😆",7:"😉",8:"😊",9:"😋",10:"😎",11:"😍",12:"😘",13:"😗",14:"😙",15:"😚",16:"☺",17:"😇",18:"😐",19:"😑",20:"😶",21:"😏",22:"😣",23:"😥",24:"😮",25:"😯",26:"😪",27:"😫",28:"😴",29:"😌",30:"😛",31:"😜",32:"😝",33:"😒",34:"😓",35:"😔",36:"😕",37:"😲",38:"😷",39:"😖",40:"😞",41:"😟",42:"😤",43:"😢",44:"😭",45:"😦",46:"😧",47:"😨",48:"😬",49:"😰",50:"😱",51:"😳",52:"😵",53:"😡",54:"😠","+1":"👍","-1":"👎",heart:"❤"}}},mounted(){this.newVditor()},methods:{setPlaceholderTxte(ne){this.contentEditor.placeholder=ne,console.log(this.contentEditor.placeholder)},setTextValue(ne){this.contentEditor.setValue(ne)},newVditor(){this.contentEditor=new Cn(this.idName,{toolbarConfig:{pin:!1},toolbar:["emoji","edit-mode"],height:200,cache:{enable:!1},placeholder:this.placeholder,blur:ne=>{this.$emit("vditor-input",this.contentEditor.getValue())}})}}},Ei=["id"];function _i(ne,X,b,H,v,f){return je(),it("div",{id:v.idName},null,8,Ei)}const Si=ut(ki,[["render",_i]]),Ci={name:"SecondComment",components:{Card:xi,SecondCommentVditor:Si},props:{father:{type:Object,default:null},type:{type:Number,default:2}},data(){return{activeTab:"1",secondList:[],page:1,size:10,length:1,sort:1,total:0,comment:{comment:"",type:this.type,articleId:this.father.articleId,parentCommentId:this.father.id,parentUserId:this.father.userId},commentPlaceholder:"",message:"",showMessage:!1,secondCommentKey:0,uploadurl:this.SERVER_API_URL+"/uploads/file",userInfo:kn()}},created(){this.getSecondList()},methods:{getComment(ne){this.$refs.commentTop.scrollIntoView({behavior:"smooth"}),this.commentPlaceholder="回复 @"+ne.username+": "+ne.comment,this.secondCommentKey++,this.comment.parentCommentId=ne.id},getVerifyImage(){this.verifyImageUrl=this.SERVER_API_URL+"/verifyImage?t="+new Date().getTime()},getSecondList(){this.httpGet(`/comment/list?article=${this.father.articleId}&fatherId=${this.father.id}&page=${this.page}&limit=${this.size}&sort=${this.sort}&type=2`,ne=>{ne.status===200&&(this.secondList=ne.data.list,this.length=ne.data.totalPage,this.total=ne.data.totalCount)})},submit(){if(this.userInfo.userData==null){this.message="请先登录后再评论！",this.showMessage=!0;return}if(this.comment.comment==null||this.comment.comment===""||this.comment.comment===`
`){this.message="评论内容不能为空！",this.showMessage=!0;return}this.httpPost("/comment/save",this.comment,ne=>{ne.status===200?(this.message="评论成功！",this.showMessage=!0,this.comment.comment="",this.$refs.secondCommentView.setTextValue(""),this.getSecondList()):(this.message=ne.message,this.showMessage=!0)})},pageChange(ne){this.page=ne,this.getSecondList()},getSecondCommentText(ne){this.comment.comment=ne},setSort(ne){this.sort=ne,this.activeTab=ne.toString(),this.getSecondList()}}},Ti={id:"commentTop",ref:"commentTop"},Mi={class:"d-flex align-center"},Li={class:"d-flex justify-end mt-3"};function Ai(ne,X,b,H,v,f){const m=ie("v-spacer"),y=ie("v-col"),u=ie("v-row"),g=ie("SecondCommentVditor"),w=ie("v-btn"),i=ie("v-card"),o=ie("v-divider"),c=ie("v-tab"),l=ie("v-tabs"),h=ie("v-icon"),d=ie("Card"),_=ie("v-pagination"),S=ie("v-container"),x=ie("v-snackbar");return je(),Ue(i,{flat:""},{default:W(()=>[Le("div",Ti,null,512),U(S,null,{default:W(()=>[U(u,null,{default:W(()=>[U(y,null,{default:W(()=>[Le("div",Mi,[X[7]||(X[7]=Le("h3",{class:"text-h5 font-weight-medium"},"评论",-1)),U(m)])]),_:1})]),_:1}),U(u,null,{default:W(()=>[U(y,null,{default:W(()=>[U(i,{variant:"text",class:"pa-3"},{default:W(()=>[(je(),Ue(g,{key:v.secondCommentKey,ref:"secondCommentView",idname:`second-comment-${b.father.id}`,placeholder:v.commentPlaceholder,onVditorInput:f.getSecondCommentText},null,8,["idname","placeholder","onVditorInput"])),Le("div",Li,[U(w,{color:"success",onClick:f.submit},{default:W(()=>X[8]||(X[8]=[_e("提交评论")])),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1}),U(o,{class:"my-4"}),U(u,null,{default:W(()=>[U(y,null,{default:W(()=>[U(l,{modelValue:v.activeTab,"onUpdate:modelValue":X[3]||(X[3]=E=>v.activeTab=E),color:"primary","bg-color":"transparent"},{default:W(()=>[U(c,{value:"1",onClick:X[0]||(X[0]=E=>f.setSort(1))},{default:W(()=>X[9]||(X[9]=[_e("时间倒序")])),_:1}),U(c,{value:"0",onClick:X[1]||(X[1]=E=>f.setSort(0))},{default:W(()=>X[10]||(X[10]=[_e("评论时间")])),_:1}),U(c,{value:"2"},{default:W(()=>X[11]||(X[11]=[_e("最多点赞")])),_:1}),U(c,{value:"3",onClick:X[2]||(X[2]=E=>f.setSort(3))},{default:W(()=>X[12]||(X[12]=[_e("最多评论")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),U(o,{class:"mb-4"}),v.total==0?(je(),Ue(u,{key:0,justify:"center",class:"my-6"},{default:W(()=>[U(h,{icon:"mdi-message-text-outline",size:"large",color:"grey-lighten-1",class:"mr-2"}),X[13]||(X[13]=Le("h3",{class:"text-grey-lighten-1"},"暂无评论，来抢个沙发吧！",-1))]),_:1})):(je(!0),it(En,{key:1},_n(v.secondList,E=>(je(),Ue(u,{key:E.id},{default:W(()=>[U(y,null,{default:W(()=>[U(d,{father:b.father,comment:E,type:b.type,onComment:f.getComment},null,8,["father","comment","type","onComment"])]),_:2},1024)]),_:2},1024))),128)),U(u,{justify:"center",class:"my-4"},{default:W(()=>[U(_,{"total-visible":7,modelValue:v.page,"onUpdate:modelValue":[X[4]||(X[4]=E=>v.page=E),f.pageChange],length:v.length,rounded:"circle",color:"blue"},null,8,["modelValue","length","onUpdate:modelValue"])]),_:1})]),_:1}),U(x,{modelValue:v.showMessage,"onUpdate:modelValue":X[6]||(X[6]=E=>v.showMessage=E),location:"top",timeout:3e3},{actions:W(()=>[U(w,{color:"pink",variant:"text",onClick:X[5]||(X[5]=E=>v.showMessage=!1)},{default:W(()=>X[14]||(X[14]=[_e("关闭")])),_:1})]),default:W(()=>[_e(Me(v.message)+" ",1)]),_:1},8,["modelValue"])]),_:1})}const Di=ut(Ci,[["render",Ai]]),ji={name:"CommentCard",components:{ShowMarkdown:fr,SecondComment:Di},props:{comment:{type:Object,default:null},authorId:{type:Number,default:-1},showcomment:{type:Boolean,default:!0},ratings:{type:Boolean,default:!1},type:{type:Number,default:1}},data(){return{TimeUtil:xn,showSecond:!1,secondCommendKey:0,showMessage:!1,message:""}},created(){},methods:{parserUa(){const ne=new pr(this.comment.ua);return`${ne.getOS().name} ${ne.getBrowser().name}`},openSecond(){this.secondCommendKey=Math.random()*1e4,this.showSecond=!0},like(){}}},Hi=["name"],Oi={class:"d-flex align-center"},Ii={class:"text-subtitle-1 font-weight-medium"},Ri={class:"text-caption text-grey"},Ni={class:"d-flex justify-end align-center"},$i={key:1,class:"text-body-2 mr-4"},Pi={class:"text-body-2"};function Vi(ne,X,b,H,v,f){const m=ie("v-img"),y=ie("v-avatar"),u=ie("router-link"),g=ie("v-col"),w=ie("v-chip"),i=ie("v-spacer"),o=ie("v-row"),c=ie("ShowMarkdown"),l=ie("v-btn"),h=ie("v-tooltip"),d=ie("SecondComment"),_=ie("v-card-text"),S=ie("v-card"),x=ie("v-dialog"),E=ie("v-snackbar");return je(),Ue(S,{variant:"flat",class:"pa-3 my-2",color:"grey-lighten-5"},{default:W(()=>[Le("a",{name:b.comment.id},null,8,Hi),U(o,null,{default:W(()=>[U(g,{cols:"12",class:"pb-0"},{default:W(()=>[U(o,{"no-gutters":""},{default:W(()=>[U(g,{cols:"auto"},{default:W(()=>[U(u,{to:`/user/${b.comment.userId}`},{default:W(()=>[U(y,{size:"45",class:"mr-3"},{default:W(()=>[U(m,{src:b.comment.avatarUrl},null,8,["src"])]),_:1})]),_:1},8,["to"])]),_:1}),U(g,null,{default:W(()=>[Le("div",Oi,[U(u,{to:`/user/${b.comment.userId}`,class:"text-decoration-none"},{default:W(()=>[Le("span",Ii,Me(b.comment.username),1)]),_:1},8,["to"]),b.comment.userId==b.authorId?(je(),Ue(w,{key:0,class:"ml-2",color:"green",size:"x-small","text-color":"white"},{default:W(()=>X[5]||(X[5]=[_e(" 楼主 ")])),_:1})):ht("",!0),U(w,{class:"ml-2",color:"primary",size:"x-small","text-color":"white"},{default:W(()=>[_e(Me(f.parserUa()),1)]),_:1}),U(i),Le("span",Ri,Me(v.TimeUtil.renderTime(b.comment.createTime)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),U(o,null,{default:W(()=>[U(g,{class:"pl-12 pt-2 pb-2"},{default:W(()=>[U(c,{markdown:b.comment.comment,anchor:0},null,8,["markdown"])]),_:1})]),_:1}),U(o,null,{default:W(()=>[U(g,null,{default:W(()=>[Le("div",Ni,[b.showcomment?(je(),Ue(h,{key:0,text:"评论",location:"top"},{activator:W(({props:p})=>[U(l,Gt(p,{variant:"text",color:"blue",onClick:X[0]||(X[0]=L=>f.openSecond()),icon:"mdi-comment",size:"small",class:"mr-1"}),null,16)]),_:1})):ht("",!0),b.showcomment?(je(),it("span",$i,Me(b.comment.commentCount),1)):ht("",!0),U(h,{text:"赞",location:"top"},{activator:W(({props:p})=>[U(l,Gt(p,{size:"small",variant:"text",color:"green",onClick:X[1]||(X[1]=L=>f.like()),icon:"mdi-thumb-up",class:"mr-1"}),null,16)]),_:1}),Le("span",Pi,Me(b.comment.likeCount),1)])]),_:1})]),_:1}),U(x,{modelValue:v.showSecond,"onUpdate:modelValue":X[2]||(X[2]=p=>v.showSecond=p),"max-width":"1000"},{default:W(()=>[U(S,null,{default:W(()=>[U(_,{class:"pa-0"},{default:W(()=>[(je(),Ue(d,{key:v.secondCommendKey,father:b.comment},null,8,["father"]))]),_:1})]),_:1})]),_:1},8,["modelValue"]),U(E,{modelValue:v.showMessage,"onUpdate:modelValue":X[4]||(X[4]=p=>v.showMessage=p),location:"top",timeout:3e3},{actions:W(()=>[U(l,{color:"pink",variant:"text",onClick:X[3]||(X[3]=p=>v.showMessage=!1)},{default:W(()=>X[6]||(X[6]=[_e("关闭")])),_:1})]),default:W(()=>[_e(Me(v.message)+" ",1)]),_:1},8,["modelValue"])]),_:1})}const Bi=ut(ji,[["render",Vi]]),Fi={name:"VideoComment",components:{Vditor:li,CommentCard:Bi},props:{count:{type:Number,default:0},article:{type:Number,default:0},authorId:{type:Number,default:0},typenum:{type:Number,default:1}},data(){return{commentCount:this.count,activeTab:"1",commentData:{articleId:this.article,comment:"",type:this.typenum,parentCommentId:0},showMessage:!1,message:"",commentsList:[],page:1,total:0,length:15,type:0,sort:1,size:15,userInfo:kn()}},created(){this.getCommentList()},methods:{getCommentList(){this.httpGet(`/comment/list?article=${this.article}&type=1&sort=${this.sort}&page=${this.page}&limit=${this.size}`,ne=>{this.commentsList=ne.data.list,this.page=ne.data.currPage,this.length=ne.data.totalPage,this.total=ne.data.totalCount})},getCommentText(ne){this.commentData.comment=ne},submitComment(){if(this.userInfo.userData==null){this.message="请先登录后再评论！",this.showMessage=!0;return}if(this.commentData.comment===""||this.commentData.comment==null||this.commentData.comment===`
`){this.message="评论内容不能为空！",this.showMessage=!0;return}this.httpPost("/comment/save",this.commentData,ne=>{ne.status===200?(this.message="评论成功",this.showMessage=!0,this.commentData.comment="",this.$refs.commentVditor.setTextValue(""),this.getCommentList()):(this.message=ne.message,this.showMessage=!0)})},pageChange(ne){this.page=ne,this.getCommentList()},setType(ne){this.sort=ne,this.activeTab=ne.toString(),this.getCommentList()}}},zi={class:"d-flex align-center mb-4"},Yi={class:"text-h5 font-weight-medium"},Ui={class:"d-flex justify-end mt-3"};function qi(ne,X,b,H,v,f){const m=ie("v-spacer"),y=ie("v-col"),u=ie("v-row"),g=ie("Vditor"),w=ie("v-btn"),i=ie("v-card"),o=ie("v-divider"),c=ie("v-tab"),l=ie("v-tabs"),h=ie("v-icon"),d=ie("CommentCard"),_=ie("v-pagination"),S=ie("v-container"),x=ie("v-snackbar");return je(),Ue(i,null,{default:W(()=>[U(S,null,{default:W(()=>[U(u,null,{default:W(()=>[U(y,null,{default:W(()=>[Le("div",zi,[Le("h2",Yi,Me(v.commentCount)+" 条评论",1),U(m)])]),_:1})]),_:1}),U(u,null,{default:W(()=>[U(y,null,{default:W(()=>[U(i,{variant:"text",class:"pa-3 mb-3"},{default:W(()=>[U(g,{ref:"commentVditor",height:150,onVditorInput:f.getCommentText},null,8,["onVditorInput"]),Le("div",Ui,[U(w,{color:"primary",onClick:f.submitComment},{default:W(()=>X[6]||(X[6]=[_e("发表评论")])),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1}),U(o,{class:"mb-4"}),U(u,{class:"mb-3"},{default:W(()=>[U(y,null,{default:W(()=>[U(l,{modelValue:v.activeTab,"onUpdate:modelValue":X[2]||(X[2]=E=>v.activeTab=E),color:"primary","bg-color":"transparent"},{default:W(()=>[U(c,{value:"1",onClick:X[0]||(X[0]=E=>f.setType(1))},{default:W(()=>X[7]||(X[7]=[_e("时间倒序")])),_:1}),U(c,{value:"2"},{default:W(()=>X[8]||(X[8]=[_e("最多点赞")])),_:1}),U(c,{value:"3",onClick:X[1]||(X[1]=E=>f.setType(3))},{default:W(()=>X[9]||(X[9]=[_e("最多评论")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),U(o),v.total==0?(je(),Ue(u,{key:0,justify:"center",class:"my-6"},{default:W(()=>[U(h,{icon:"mdi-message-text-outline",size:"large",color:"grey-lighten-1",class:"mr-2"}),X[10]||(X[10]=Le("h3",{class:"text-grey-lighten-1"},"暂无评论",-1))]),_:1})):(je(!0),it(En,{key:1},_n(v.commentsList,E=>(je(),Ue(u,{key:E.id},{default:W(()=>[U(y,null,{default:W(()=>[U(d,{"author-id":b.authorId,comment:E},null,8,["author-id","comment"])]),_:2},1024)]),_:2},1024))),128)),U(u,{justify:"center",class:"my-4"},{default:W(()=>[U(_,{modelValue:v.page,"onUpdate:modelValue":[X[3]||(X[3]=E=>v.page=E),f.pageChange],rounded:"circle",length:v.length,color:"blue","total-visible":7},null,8,["modelValue","length","onUpdate:modelValue"])]),_:1}),U(o,{class:"mt-2"})]),_:1}),U(x,{modelValue:v.showMessage,"onUpdate:modelValue":X[5]||(X[5]=E=>v.showMessage=E),location:"top",timeout:3e3},{actions:W(()=>[U(w,{color:"pink",variant:"text",onClick:X[4]||(X[4]=E=>v.showMessage=!1)},{default:W(()=>X[11]||(X[11]=[_e("关闭")])),_:1})]),default:W(()=>[_e(Me(v.message)+" ",1)]),_:1},8,["modelValue"])]),_:1})}const Wi=ut(Fi,[["render",qi]]),Ki={name:"VideoView",components:{PlayerVideo:ti,Comment:Wi},data(){return{score:0,TimeUtil:xn,id:0,videoData:null,windowSize:{},colsWidth:8,isLiked:!1,isDisliked:!1}},created(){window.scrollTo({top:0,behavior:"smooth"}),this.id=parseInt(this.$route.params.id),this.videoInfo(),this.onResize(),window.addEventListener("resize",this.onResize)},beforeUnmount(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.windowSize={x:window.innerWidth,y:window.innerHeight},this.windowSize.x<900?this.colsWidth=12:this.colsWidth=8},videoInfo(){this.httpGet(`/article/video/${this.id}`,ne=>{ne.status===200&&ne.data.isShow?(this.videoData=ne.data,document.title=ne.data.title,this.likeCount=ne.data.likeCount||0,this.dislikeCount=ne.data.dislikeCount||0):this.$router.push("/")})},likeVideo(){},dislikeVideo(){}}},Zi={class:"d-flex align-center"},Gi={class:"text-subtitle-1 font-weight-bold"},Xi={class:"text-caption text-grey"},Ji={class:"d-flex align-start"},Qi={class:"text-body-2"};function eo(ne,X,b,H,v,f){const m=ie("PlayerVideo"),y=ie("v-col"),u=ie("v-row"),g=ie("v-container"),w=ie("v-card-title"),i=ie("v-btn"),o=ie("v-spacer"),c=ie("v-chip"),l=ie("v-card-actions"),h=ie("router-link"),d=ie("v-card-subtitle"),_=ie("v-divider"),S=ie("v-card"),x=ie("v-img"),E=ie("v-avatar"),p=ie("v-card-text"),L=ie("v-chip-group"),j=ie("Comment");return je(),it("div",null,[U(g,{fluid:""},{default:W(()=>[U(u,{style:{"padding-top":"12px","padding-bottom":"12px"}},{default:W(()=>[U(y,{style:{"padding-bottom":"0px"}},{default:W(()=>[v.videoData!=null?(je(),Ue(m,{key:0,article:parseInt(v.id),video:v.videoData.video[0],picurl:v.videoData.imgUrl},null,8,["article","video","picurl"])):ht("",!0)]),_:1})]),_:1})]),_:1}),v.videoData!=null?(je(),Ue(g,{key:0,style:{"padding-top":"0px"}},{default:W(()=>[U(u,null,{default:W(()=>[U(y,{cols:v.colsWidth},{default:W(()=>[U(S,{flat:""},{default:W(()=>[U(w,{class:"text-h5 px-0"},{default:W(()=>[_e(Me(v.videoData.title),1)]),_:1}),U(l,{class:"px-0 py-2"},{default:W(()=>[U(i,{"prepend-icon":"mdi-thumb-up",variant:"tonal",color:"primary",disabled:v.isLiked},{default:W(()=>[_e(Me(v.videoData.likeCount),1)]),_:1},8,["disabled"]),U(i,{"prepend-icon":"mdi-thumb-down",variant:"tonal",color:"error",disabled:v.isDisliked},{default:W(()=>[_e(Me(v.videoData.dislikeCount),1)]),_:1},8,["disabled"]),U(i,{"prepend-icon":"mdi-share",variant:"tonal"},{default:W(()=>X[0]||(X[0]=[_e(" 分享 ")])),_:1}),U(i,{"prepend-icon":"mdi-content-save",variant:"tonal"},{default:W(()=>X[1]||(X[1]=[_e(" 收藏 ")])),_:1}),U(o),U(c,{variant:"outlined",color:"blue",class:"mr-2"},{default:W(()=>[_e(Me(v.videoData.viewCount)+" 次观看 ",1)]),_:1}),U(c,{variant:"outlined"},{default:W(()=>[_e(Me(v.videoData.danmakuCount)+" 弹幕 ",1)]),_:1})]),_:1}),U(d,{class:"px-0 py-2"},{default:W(()=>[v.videoData.childrenCategory.fatherId!==0?(je(),Ue(h,{key:0,to:`/v/${v.videoData.fatherCategory.id}`,class:"category-link text-decoration-none"},{default:W(()=>[_e(Me(v.videoData.fatherCategory.name),1)]),_:1},8,["to"])):ht("",!0),X[2]||(X[2]=_e(" / ")),U(h,{to:`/v/${v.videoData.childrenCategory.id}`,class:"category-link text-decoration-none"},{default:W(()=>[_e(Me(v.videoData.childrenCategory.name),1)]),_:1},8,["to"]),_e("      发布于： "+Me(v.TimeUtil.renderTime(v.videoData.createTime)),1)]),_:1}),U(_,{class:"my-2"})]),_:1}),U(S,{class:"my-2",variant:"elevated"},{default:W(()=>[U(u,{"no-gutters":""},{default:W(()=>[U(y,{cols:"12",sm:"auto",class:"pa-2"},{default:W(()=>[Le("div",Zi,[U(h,{to:`/user/${v.videoData.userId}`},{default:W(()=>[U(E,{size:"48",class:"mr-2"},{default:W(()=>[U(x,{src:v.videoData.avatarUrl,alt:"用户头像"},null,8,["src"])]),_:1})]),_:1},8,["to"]),Le("div",null,[U(h,{to:`/user/${v.videoData.userId}`,class:"text-decoration-none"},{default:W(()=>[Le("div",Gi,Me(v.videoData.username),1)]),_:1},8,["to"]),Le("div",Xi,"个性签名: "+Me(v.videoData.introduction),1)]),U(o),U(i,{variant:"outlined",density:"comfortable",color:"primary",class:"ml-2"},{default:W(()=>[_e("关注："+Me(v.videoData.followCount),1)]),_:1})])]),_:1})]),_:1}),U(_),U(p,{class:"py-2"},{default:W(()=>[Le("div",Ji,[Le("div",Qi,Me(v.videoData.describes),1)])]),_:1}),U(p,{class:"pt-0 pb-2"},{default:W(()=>[U(L,null,{default:W(()=>[(je(!0),it(En,null,_n(v.videoData.tag,O=>(je(),Ue(c,{key:O,size:"small",variant:"flat",color:"primary",density:"comfortable",class:"mr-1"},{default:W(()=>[_e(Me(O),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),U(j,{article:v.id,"author-id":v.videoData.userId,typenum:1,count:v.videoData.commentCount},null,8,["article","author-id","count"])]),_:1},8,["cols"]),v.colsWidth===8?(je(),Ue(y,{key:0,cols:"4"},{default:W(()=>[U(S,{class:"mb-4",variant:"elevated"},{default:W(()=>[U(w,null,{default:W(()=>X[3]||(X[3]=[_e("推荐视频")])),_:1}),U(p,null,{default:W(()=>X[4]||(X[4]=[Le("p",{class:"text-center text-body-2 text-grey"},"暂无推荐视频",-1)])),_:1})]),_:1})]),_:1})):ht("",!0)]),_:1})]),_:1})):ht("",!0)])}const ao=ut(Ki,[["render",eo]]);export{ao as default};
